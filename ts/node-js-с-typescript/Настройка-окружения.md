---
aliases: [Настройка Node.js с TypeScript, Окружение TypeScript для сервера]
tags: [typescript, nodejs, setup, environment]
---

# Настройка окружения для Node.js с TypeScript

## Введение

Создание правильного окружения для разработки на Node.js с TypeScript критически важно для эффективной работы. В этом руководстве мы рассмотрим шаги по настройке полнофункционального окружения, включая установку зависимостей, конфигурацию TypeScript и подготовку инструментов для разработки.

## Основные компоненты окружения

Для начала работы с Node.js и TypeScript нам понадобятся следующие компоненты:

- Node.js (версия 14 и выше рекомендуется)
- npm или yarn в качестве менеджера пакетов
- TypeScript и соответствующие типы
- ts-node для выполнения TypeScript файлов напрямую
- nodemon для автоматической перезагрузки при разработке

## Установка Node.js и npm

Убедитесь, что у вас установлена последняя LTS версия Node.js. Она включает npm по умолчанию.

```bash
node --version
npm --version
```

## Инициализация проекта

Создайте новую директорию для проекта и инициализируйте его:

```bash
mkdir my-ts-node-project
cd my-ts-node-project
npm init -y
```

## Установка зависимостей

Установите TypeScript как зависимость разработки:

```bash
npm install -D typescript @types/node ts-node nodemon
```

- `typescript` - компилятор TypeScript
- `@types/node` - определения типов для Node.js API
- `ts-node` - позволяет запускать TypeScript файлы напрямую без предварительной компиляции
- `nodemon` - перезапускает приложение при изменениях файлов

## Конфигурация TypeScript (tsconfig.json)

Создайте файл `tsconfig.json` в корне проекта:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "removeComments": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "noImplicitThis": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "moduleResolution": "node",
    "baseUrl": "./",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist"
  ]
}
```

### Объяснение ключевых опций:

- `target`: Указывает версию ECMAScript, в которую компилируется код
- `module`: Определяет систему модулей для генерируемого JavaScript
- `outDir`: Папка, в которую будут помещены скомпилированные JavaScript файлы
- `rootDir`: Корневая папка исходных файлов TypeScript
- `strict`: Включает все строгие проверки типов
- `esModuleInterop`: Позволяет использовать импорт из модулей ES с корректными определениями типов
- `skipLibCheck`: Пропускает проверку типов в файлах библиотек для ускорения компиляции
- `baseUrl` и `paths`: Позволяют использовать алиасы для импортов

## Настройка скриптов в package.json

Добавьте следующие скрипты в ваш `package.json`:

```json
{
  "scripts": {
    "dev": "nodemon --exec ts-node src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js",
    "start:dev": "ts-node src/index.ts",
    "clean": "rm -rf dist"
  }
}
```

### Описание скриптов:

- `dev`: Запускает приложение в режиме разработки с автоматической перезагрузкой
- `build`: Компилирует TypeScript файлы в JavaScript
- `start`: Запускает скомпилированное приложение
- `start:dev`: Запускает TypeScript файлы напрямую через ts-node
- `clean`: Удаляет папку с компилированными файлами

## Структура проекта

Рекомендуемая структура проекта:

```
my-ts-node-project/
├── src/
│   ├── index.ts
│   ├── controllers/
│   ├── models/
│   ├── routes/
│   └── utils/
├── dist/ (генерируется при компиляции)
├── node_modules/
├── package.json
├── tsconfig.json
└── .gitignore
```

## Создание первого файла

Создайте файл `src/index.ts`:

```typescript
// src/index.ts
import * as fs from 'fs';
import * as path from 'path';

interface ServerConfig {
  port: number;
  host: string;
}

const config: ServerConfig = {
  port: 3000,
  host: 'localhost'
};

console.log(`Сервер запускается на http://${config.host}:${config.port}`);

// Пример работы с файловой системой
const dataPath = path.join(__dirname, '../data.txt');
const content = `Сервер запущен в ${new Date().toISOString()}\n`;

fs.appendFileSync(dataPath, content);
console.log('Данные записаны в файл');
```

## Дополнительные инструменты

### ESLint с TypeScript

Установите ESLint для проверки кода:

```bash
npm install -D eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin
```

Создайте файл `.eslintrc.js`:

```javascript
module.exports = {
  parser: '@typescript-eslint/parser',
  plugins: ['@typescript-eslint'],
  extends: [
    'eslint:recommended',
    '@typescript-eslint/recommended'
  ],
  env: {
    node: true,
    es6: true
  }
};
```

### Prettier для форматирования кода

Установите Prettier:

```bash
npm install -D prettier eslint-config-prettier eslint-plugin-prettier
```

Создайте файл `.prettierrc`:

```json
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

## Заключение

Теперь у вас есть полнофункциональное окружение для разработки Node.js приложений с использованием TypeScript. Вы можете запустить приложение в режиме разработки с помощью команды:

```bash
npm run dev
```

Для компиляции TypeScript в JavaScript используйте:

```bash
npm run build
```

Эта настройка обеспечивает строгую типизацию, автодополнение, проверку ошибок и другие преимущества TypeScript в вашем Node.js проекте.

## См. также

- [[Express-с-TypeScript]]
- [[Работа-с-файлами]]
- [[Подключение-к-базам-данных]]
- [[Типизация-API]]
- [[Конфигурация-TypeScript]]