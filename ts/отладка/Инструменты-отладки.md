---
aliases: ["Инструменты отладки", "Debugging Tools", "Отладчики"]
tags: [typescript, debugging, tools, development]
---

# Инструменты отладки TypeScript

Инструменты отладки играют ключевую роль в разработке TypeScript-приложений, позволяя эффективно находить, анализировать и устранять ошибки. В этой статье рассматриваются различные инструменты отладки, доступные для TypeScript-разработчиков.

## Встроенные инструменты отладки

### Браузерные инструменты разработчика

Современные браузеры предоставляют мощные инструменты отладки, которые работают с TypeScript через Source Maps:

#### Chrome DevTools
- **Sources Panel**: Позволяет просматривать исходный TypeScript-код, устанавливать точки останова и отслеживать выполнение
- **Console**: Для логирования и интерактивной отладки
- **Network**: Для отладки сетевых запросов
- **Performance**: Для анализа производительности

#### Firefox Developer Tools
- Похожие возможности с Chrome DevTools
- Улучшенная поддержка Source Maps
- Встроенный отладчик JavaScript

#### Safari Web Inspector
- Инструменты отладки для Safari
- Поддержка TypeScript через Source Maps

### Node.js Inspector

Для отладки серверного TypeScript-кода:

```bash
node --inspect=0.0.0.0:9229 dist/index.js
```

Или при запуске с ts-node:

```bash
node --inspect=0.0.0.0:9229 -r ts-node/register src/index.ts
```

## IDE-инструменты отладки

### Visual Studio Code

VS Code предоставляет встроенный отладчик с поддержкой TypeScript:

#### Настройка отладки

Файл `.vscode/launch.json`:

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Debug TypeScript",
      "program": "${workspaceFolder}/src/index.ts",
      "sourceMaps": true,
      "outFiles": ["${workspaceFolder}/dist/**/*.js"],
      "preLaunchTask": "tsc: build - tsconfig.json",
      "skipFiles": [
        "<node_internals>/**",
        "node_modules/**"
      ]
    }
  ]
}
```

#### Полезные расширения

- **Debugger for Chrome**: Интеграция с Chrome DevTools
- **Debugger for Firefox**: Интеграция с Firefox Developer Tools
- **TypeScript Hero**: Улучшенная навигация по коду
- **Path Intellisense**: Автодополнение путей к файлам

### WebStorm

- Интегрированный отладчик с поддержкой TypeScript
- Визуализация стека вызовов
- Интерактивная отладка
- Поддержка фреймворков (React, Vue и т.д.)

## Инструменты командной строки

### ts-node

Позволяет запускать TypeScript-файлы напрямую:

```bash
npx ts-node src/index.ts
```

Для отладки:

```bash
npx ts-node --inspect=0.0.0.0:9229 src/index.ts
```

### nodemon

Автоматически перезапускает приложение при изменениях:

```bash
npx nodemon --exec ts-node src/index.ts
```

### tsc-watch

Отслеживает изменения файлов и перекомпилирует TypeScript:

```bash
npx tsc-watch --onSuccess "node dist/index.js"
```

## Инструменты логирования

### Winston

Мощная библиотека логирования с поддержкой TypeScript:

```typescript
import winston from 'winston';

const logger = winston.createLogger({
  level: 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.splat(),
    winston.format.json()
  ),
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

logger.error('An error occurred', new Error('Sample error'));
```

### Pino

Высокопроизводительная библиотека логирования:

```typescript
import pino from 'pino';

const logger = pino({
  level: 'debug',
  transport: {
    target: 'pino-pretty'
  }
});

logger.info('Application started');
```

## Инструменты для анализа кода

### ESLint

Анализирует код на наличие потенциальных ошибок:

```json
{
  "extends": [
    "@typescript-eslint/recommended"
  ],
  "parser": "@typescript-eslint/parser",
  "plugins": [
    "@typescript-eslint"
  ],
  "rules": {
    "@typescript-eslint/no-unused-vars": "error",
    "@typescript-eslint/explicit-function-return-type": "warn"
  }
}
```

### TypeScript Compiler

Сам компилятор TypeScript является мощным инструментом отладки:

```bash
npx tsc --noEmit --watch
```

### TSLint (устаревший, но может встречаться)

Альтернатива ESLint для анализа кода.

## Инструменты тестирования

### Jest

Фреймворк для тестирования с отличной поддержкой TypeScript:

```typescript
// example.test.ts
describe('Calculator', () => {
  test('adds 1 + 2 to equal 3', () => {
    expect(1 + 2).toBe(3);
  });
});
```

Запуск с отладкой:

```bash
node --inspect-brk node_modules/.bin/jest --runInBand
```

### Vitest

Более быстрый альтернативный фреймворк для тестирования:

```bash
npx vitest
```

## Инструменты профилирования

### Clinic.js

Инструмент для профилирования Node.js приложений:

```bash
npx clinic doctor -- node dist/index.js
```

### 0x

Инструмент для профилирования производительности:

```bash
npx 0x node dist/index.js
```

## Инструменты отладки фронтенда

### React DevTools

Для отладки React-приложений с TypeScript:

```bash
npm install -g react-devtools
```

### Vue DevTools

Для отладки Vue-приложений с TypeScript.

### Redux DevTools

Для отладки приложений с использованием Redux:

```typescript
// В конфигурации store
const composeEnhancers = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;
```

## Инструменты отладки баз данных

### Prisma Studio

Для отладки приложений, использующих Prisma ORM:

```bash
npx prisma studio
```

## Инструменты отладки API

### Postman

Для тестирования API-запросов.

### Insomnia

Альтернатива Postman с поддержкой TypeScript-скриптов.

## Инструменты отладки производительности

### Webpack Bundle Analyzer

Для анализа размера бандлов:

```bash
npx webpack-bundle-analyzer dist/main.js
```

### Lighthouse

Для аудита производительности веб-приложений.

## Современные подходы к отладке

### Remote Debugging

Отладка приложений на удаленных устройствах:

```bash
# Для Node.js приложений
node --inspect=0.0.0.0:9229 dist/index.js
```

### Debugging в Docker-контейнерах

Настройка отладки внутри контейнеров:

```dockerfile
EXPOSE 9229
CMD ["node", "--inspect=0.0.0.0:9229", "dist/index.js"]
```

### Hot Module Replacement (HMR)

Для быстрого обновления кода без перезапуска приложения:

```typescript
// В webpack.config.js
module.exports = {
  // ...
  devServer: {
    hot: true
  }
};
```

## Практические советы по отладке

### Использование console.log с осторожностью

```typescript
// Вместо простого console.log
console.log('User data:', JSON.stringify(user, null, 2));

// Используйте более информативные метки
console.log('[User Service] Fetching user with ID:', userId);
```

### Условные точки останова

Используйте условные точки останова для отладки в циклах:

```typescript
for (let i = 0; i < items.length; i++) {
  const item = items[i];
  // Установите условную точку останова: i === 5
  processItem(item);
}
```

### Использование debugger

```typescript
function processComplexData(data: any[]) {
  if (process.env.NODE_ENV === 'development') {
    debugger; // Точка останова, активируемая только в dev-режиме
  }
  return data.map(transform);
}
```

## Интеграция инструментов

### Совместное использование инструментов

Эффективная отладка часто требует комбинации нескольких инструментов:

1. Использование ESLint для статического анализа
2. Использование TypeScript Compiler для проверки типов
3. Использование отладчика IDE для пошагового выполнения
4. Использование браузерных инструментов для фронтенд-отладки
5. Использование инструментов логирования для отслеживания ошибок в production

> [!tip] Совет
> Создайте стандартный набор инструментов отладки для вашей команды, чтобы обеспечить согласованность подходов к отладке.

## Заключение

Инструменты отладки TypeScript - это важная часть процесса разработки. Выбор правильных инструментов и правильное их использование могут значительно ускорить процесс нахождения и устранения ошибок. Важно подбирать инструменты в зависимости от типа приложения (фронтенд, бэкенд, мобильное и т.д.) и конкретных задач отладки.

См. также:
- [[Отладка-в-IDE]]
- [[Source-map]]
- [[Типизированные-ошибки]]
- [[Логирование-с-типами]]