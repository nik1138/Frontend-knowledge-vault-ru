# Конфигурация TypeScript

Конфигурация TypeScript осуществляется через файл `tsconfig.json`, который определяет параметры компилятора, структуру проекта и поведение системы типов. Правильная настройка конфигурации критически важна для эффективной разработки и поддержки TypeScript-проектов.

## Содержание раздела

1. [[ts/configuration/basic-setup|Базовая настройка]] - Основные параметры конфигурации
2. [[ts/configuration/compiler-options|Опции компилятора]] - Подробное описание всех опций
3. [[ts/configuration/project-references|Ссылки на проекты]] - Много-проектные конфигурации
4. [[ts/configuration/build-modes|Режимы сборки]] - Инкрементальная и композитная сборка
5. [[ts/configuration/path-mapping|Сопоставление путей]] - Псевдонимы и разрешение модулей
6. [[ts/configuration/watch-options|Опции наблюдения]] - Настройка режима разработки
7. [[ts/configuration/type-acquisition|Получение типов]] - Автоматическое получение типов
8. [[ts/configuration/performance|Оптимизация производительности]] - Настройки для ускорения компиляции

## Введение

Файл `tsconfig.json` - это основной конфигурационный файл TypeScript, который определяет:
- Какие файлы включать в компиляцию
- Какие параметры компилятора использовать
- Как организовать структуру проекта
- Как разрешать модули и зависимости

## Основные концепции

### 1. Структура tsconfig.json

```json
{
  "compilerOptions": {
    // Основные опции
    "target": "es2020",
    "module": "commonjs",
    "lib": ["es2020"],
    
    // Строгая типизация
    "strict": true,
    
    // Декораторы
    "experimentalDecorators": true,
    "emitDecoratorMetadata": true,
    
    // Исходные карты
    "sourceMap": true,
    
    // Директории
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist"
  ]
}
```

### 2. Режимы конфигурации

TypeScript поддерживает несколько режимов конфигурации:

```json
{
  // Разработка
  "compilerOptions": {
    "target": "es2020",
    "module": "esnext",
    "sourceMap": true,
    "noEmitOnError": false
  }
}
```

```json
{
  // Продакшн
  "compilerOptions": {
    "target": "es2018",
    "module": "commonjs",
    "sourceMap": false,
    "removeComments": true,
    "noEmitOnError": true
  }
}
```

### 3. Расширение конфигураций

Конфигурации могут расширять другие конфигурации:

```json
// tsconfig.base.json
{
  "compilerOptions": {
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true
  }
}

// tsconfig.json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "target": "es2020",
    "outDir": "./dist"
  },
  "include": ["src/**/*"]
}
```

## Практическое применение

### 1. Конфигурация для Node.js

```json
{
  "compilerOptions": {
    "target": "es2020",
    "module": "commonjs",
    "lib": ["es2020"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "resolveJsonModule": true,
    "sourceMap": true,
    "declaration": true,
    "declarationMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### 2. Конфигурация для React

```json
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "strict": true,
    "forceConsistentCasingInFileNames": true,
    "noFallthroughCasesInSwitch": true,
    "module": "esnext",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx"
  },
  "include": ["src"]
}
```

### 3. Конфигурация для библиотек

```json
{
  "compilerOptions": {
    "target": "es2018",
    "module": "esnext",
    "lib": ["es2018"],
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "removeComments": false,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "importHelpers": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "**/*.test.ts"]
}
```

## Расширенные возможности

### 1. Много-проектные конфигурации

```json
// tsconfig.json
{
  "files": [],
  "references": [
    { "path": "./packages/core" },
    { "path": "./packages/ui" },
    { "path": "./packages/api" }
  ]
}

// packages/core/tsconfig.json
{
  "compilerOptions": {
    "composite": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"]
}
```

### 2. Условная конфигурация

```json
// tsconfig.dev.json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "sourceMap": true,
    "noEmitOnError": false,
    "diagnostics": true
  }
}

// tsconfig.prod.json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "sourceMap": false,
    "removeComments": true,
    "noEmitOnError": true
  }
}
```

### 3. Псевдонимы путей

```json
{
  "compilerOptions": {
    "baseUrl": "src",
    "paths": {
      "@/*": ["*"],
      "@components/*": ["components/*"],
      "@utils/*": ["utils/*"],
      "@types/*": ["types/*"]
    }
  }
}
```

## Оптимизация и производительность

### 1. Инкрементальная сборка

```json
{
  "compilerOptions": {
    "incremental": true,
    "tsBuildInfoFile": "./dist/.tsbuildinfo"
  }
}
```

### 2. Композитные проекты

```json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "declarationMap": true
  }
}
```

### 3. Оптимизация наблюдения

```json
{
  "watchOptions": {
    "watchFile": "useFsEvents",
    "watchDirectory": "useFsEvents",
    "fallbackPolling": "dynamicPriority",
    "synchronousWatchDirectory": true,
    "excludeDirectories": ["**/node_modules", "_build"]
  }
}
```

## Лучшие практики

### 1. Строгая типизация

```json
{
  "compilerOptions": {
    "strict": true,
    "noImplicitAny": true,
    "strictNullChecks": true,
    "strictFunctionTypes": true,
    "strictBindCallApply": true,
    "strictPropertyInitialization": true,
    "noImplicitThis": true,
    "alwaysStrict": true
  }
}
```

### 2. Совместимость

```json
{
  "compilerOptions": {
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "forceConsistentCasingInFileNames": true,
    "skipLibCheck": true
  }
}
```

### 3. Безопасность

```json
{
  "compilerOptions": {
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true
  }
}
```

## Инструменты и утилиты

### 1. CLI для конфигурации

```bash
# Инициализация tsconfig.json
tsc --init

# Проверка конфигурации
tsc --showConfig

# Компиляция с определенной конфигурацией
tsc -p tsconfig.prod.json
```

### 2. Анализ конфигурации

```bash
# Анализ производительности
tsc --diagnostics

# Подробная информация о компиляции
tsc --extendedDiagnostics

# Трассировка разрешения модулей
tsc --traceResolution
```

## Связи с другими концепциями

Конфигурация TypeScript тесно связана с другими аспектами разработки:

- [[ts/advanced-modules/Продвинутые_модули|Продвинутые модули]] - Настройка разрешения модулей
- [[ts/advanced-modules/module-resolution|Разрешение модулей]] - Псевдонимы путей и baseUrl
- [[ts/advanced-modules/bundling|Бандлинг модулей]] - Интеграция с бандлерами
- [[ts/decorators/Декораторы|Декораторы]] - Настройка поддержки декораторов
- [[ts/type-system/interfaces|Интерфейсы]] - Строгая типизация

## Рекомендации по изучению

1. Начните с базовой конфигурации для вашего типа проекта
2. Освойте расширение конфигураций для разных окружений
3. Практикуйтесь в настройке путей и разрешения модулей
4. Изучите оптимизации производительности
5. Освойте много-проектные конфигурации
6. Практикуйтесь в условной конфигурации для разных сред

## Следующие шаги

- [[ts/configuration/basic-setup|Базовая настройка]] - Основные параметры конфигурации
- [[ts/configuration/compiler-options|Опции компилятора]] - Подробное описание всех опций
- [[ts/react/React_с_TypeScript|TypeScript с React]] - Типобезопасная разработка React-приложений
- [[ts/performance/advanced-performance-optimization|Оптимизация производительности]] - Оптимизация приложений