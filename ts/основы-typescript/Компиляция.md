---
aliases: ["Компиляция TypeScript", "Процесс компиляции", "TSC"]
tags: [typescript, programming, compilation, tsc]
---

# Компиляция

Компиляция TypeScript - это процесс преобразования TypeScript-кода в JavaScript-код, который может выполняться в браузере или в среде выполнения JavaScript (например, Node.js). Компилятор TypeScript (tsc) отвечает за этот процесс и предоставляет множество опций для настройки компиляции.

## Основы компиляции

Компилятор TypeScript преобразует файлы с расширением `.ts` и `.tsx` в JavaScript-файлы. Процесс включает в себя:

1. **Проверку типов** - анализ кода на соответствие типов
2. **Синтаксический анализ** - преобразование кода в абстрактное синтаксическое дерево
3. **Транспиляцию** - преобразование современного синтаксиса в совместимый с целевой средой
4. **Генерацию JavaScript-кода** - создание результирующих файлов

## Базовая компиляция

### Компиляция одного файла

```bash
# Компиляция одного TypeScript файла
tsc myfile.ts

# Результатом будет myfile.js
```

### Компиляция нескольких файлов

```bash
# Компиляция нескольких файлов
tsc file1.ts file2.ts file3.ts

# Или с использованием glob-паттернов
tsc src/**/*.ts
```

### Компиляция всего проекта

```bash
# Компиляция проекта с использованием tsconfig.json
tsc

# Компиляция с указанием конфигурационного файла
tsc -p ./path/to/tsconfig.json
```

## Параметры компиляции

Компилятор TypeScript поддерживает множество параметров командной строки:

### Основные параметры

```bash
# Указать целевую версию JavaScript
tsc --target es2020

# Указать папку вывода
tsc --outDir dist/

# Указать корневую папку исходников
tsc --rootDir src/

# Компилировать в один файл
tsc --outFile bundle.js

# Включить режим watch
tsc --watch
```

### Параметры проверки типов

```bash
# Включить строгую проверку типов
tsc --strict

# Запретить неявный тип any
tsc --noImplicitAny

# Требовать объявления для this
tsc --noImplicitThis

# Проверять все ветви кода на возврат значения
tsc --strictFunctionTypes
```

## Режимы watch

Для автоматической перекомпиляции при изменении файлов используйте режим watch:

```bash
# Запуск компилятора в режиме наблюдения
tsc --watch

# Или сокращённо
tsc -w
```

Это особенно полезно при разработке, так как позволяет сразу видеть результат изменений.

## Выходные файлы

Компилятор TypeScript создает следующие типы файлов:

- **JavaScript-файлы** (.js) - результат компиляции
- **Source map файлы** (.js.map) - для отладки TypeScript кода
- **Declaration файлы** (.d.ts) - для предоставления типов другим проектам

## Пример компиляции

Допустим, у нас есть файл `calculator.ts`:

```ts
class Calculator {
    add(a: number, b: number): number {
        return a + b;
    }
    
    subtract(a: number, b: number): number {
        return a - b;
    }
}

const calc = new Calculator();
console.log(calc.add(5, 3)); // 8
```

Компиляция:

```bash
tsc calculator.ts
```

Результатом будет файл `calculator.js`:

```js
var Calculator = /** @class */ (function () {
    function Calculator() {
    }
    Calculator.prototype.add = function (a, b) {
        return a + b;
    };
    Calculator.prototype.subtract = function (a, b) {
        return a - b;
    };
    return Calculator;
}());
var calc = new Calculator();
console.log(calc.add(5, 3)); // 8
```

## Source Maps

Для удобства отладки рекомендуется включать генерацию source map файлов:

```bash
tsc --sourceMap
```

Или в tsconfig.json:

```json
{
  "compilerOptions": {
    "sourceMap": true
  }
}
```

Это позволяет отлаживать TypeScript-код напрямую в браузере, несмотря на то, что в браузере выполняется JavaScript.

## Ошибки компиляции

Компилятор TypeScript может обнаруживать различные типы ошибок:

```ts
// Ошибка: переменной не присвоено значение
let userName: string;
console.log(userName); // Ошибка: переменная может быть не определена

// Ошибка: несовместимость типов
let age: number = "тридцать"; // Ошибка: строка не может быть присвоена числу

// Ошибка: доступ к несуществующему свойству
const obj = { name: "Иван" };
console.log(obj.surname); // Ошибка: свойство surname не существует
```

## Строгий режим

Для более строгой проверки типов используйте флаг `--strict`:

```bash
tsc --strict
```

Это включает несколько строгих проверок, включая:
- `noImplicitAny`
- `strictNullChecks`
- `strictFunctionTypes`
- `strictBindCallApply`
- `strictPropertyInitialization`
- `noImplicitThis`
- `alwaysStrict`

## Компиляция с разными целями

Компилятор может генерировать JavaScript для разных целевых сред:

```bash
# Для современных браузеров
tsc --target es2020

# Для старых браузеров
tsc --target es5

# Для Node.js
tsc --target es2018 --module commonjs
```

## Заключение

Компиляция TypeScript - важный этап разработки, который обеспечивает проверку типов и преобразование кода в JavaScript. Понимание параметров компиляции и настроек позволяет оптимизировать процесс разработки и повышает качество кода.

Для более глубокого понимания рекомендуется ознакомиться с [[Конфигурация]] и [[Типы-данных]].

## Дополнительные ресурсы

- [[Установка-и-настройка]] - как установить и настроить TypeScript
- [[Конфигурация]] - настройка компиляции через tsconfig.json
- [[Типы-данных]] - типы данных в TypeScript