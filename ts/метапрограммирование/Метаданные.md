---
aliases: [Метаданные в TypeScript, Информация о типах]
tags: [typescript, метапрограммирование, метаданные, декораторы]
---

# Метаданные в TypeScript

## Обзор

Метаданные — это информация о программе, которая не является частью исполняемого кода, но может быть использована во время выполнения. В TypeScript метаданные часто связаны с декораторами и позволяют хранить и извлекать дополнительную информацию о классах, методах, свойствах и параметрах.

## Основы

Для работы с метаданными в TypeScript используется библиотека `reflect-metadata`, которая расширяет возможности объекта `Reflect`. Она позволяет добавлять, извлекать и проверять наличие метаданных.

## Примеры использования

### Установка и использование метаданных

```typescript
import 'reflect-metadata';

// Определение ключа для метаданных
const formatMetadataKey = Symbol('format');

// Декоратор для установки формата
function format(formatString: string) {
  return Reflect.metadata(formatMetadataKey, formatString);
}

class Greeter {
  @format('Hello, %s')
  greeting: string;

  constructor(message: string) {
    this.greeting = message;
  }
}

// Извлечение метаданных
const message = new Greeter('world');
const formatString = Reflect.getMetadata(formatMetadataKey, message, 'greeting');
console.log(formatString); // 'Hello, %s'
```

### Использование метаданных для валидации

```typescript
import 'reflect-metadata';

const validationMetadataKey = Symbol('validation');

function required(target: Object, propertyKey: string | symbol, parameterIndex: number) {
  const existingRequiredParameters: number[] = 
    Reflect.getMetadata(validationMetadataKey, target, propertyKey) || [];
  existingRequiredParameters.push(parameterIndex);
  Reflect.defineMetadata(validationMetadataKey, existingRequiredParameters, target, propertyKey);
}

class UserService {
  createUser(@required name: string, email: string) {
    // Логика создания пользователя
  }
}

// Проверка метаданных
const requiredParams = Reflect.getMetadata(validationMetadataKey, UserService.prototype, 'createUser');
console.log(requiredParams); // [0] - параметр name (index 0) помечен как required
```

## Практическое применение

Метаданные широко используются в DI-контейнерах, ORM-фреймворках, системах валидации и маршрутизации, где необходимо хранить и использовать информацию о структуре приложения во время выполнения.

## Связанные темы

- [[Декораторы]]
- [[Рефлексия]]
- [[Плагины-компилятора]]

## Ключевые выводы

- Метаданные позволяют хранить дополнительную информацию о программе
- Библиотека `reflect-metadata` расширяет возможности `Reflect` для работы с метаданными
- Метаданные часто используются в сочетании с декораторами