---
aliases: [Плагины компилятора TypeScript, TS-плагины]
tags: [typescript, метапрограммирование, плагины-компилятора, трансформеры]
---

# Плагины-компилятора в TypeScript

## Обзор

Плагины-компилятора — это расширения, которые изменяют поведение компилятора TypeScript. Они могут использовать трансформеры для изменения AST, добавления новых возможностей или оптимизации процесса компиляции. Плагины позволяют создавать мощные инструменты для анализа и модификации кода.

## Основы

Плагины-компилятора в TypeScript обычно реализуются как функции, которые принимают объект контекста и возвращают объект с методами, которые будут вызваны компилятором. Эти плагины могут быть подключены к компилятору через конфигурационные файлы или инструменты сборки.

## Примеры использования

### Создание плагина для добавления префиксов к идентификаторам

```typescript
import * as ts from 'typescript';

function createPlugin(program: ts.Program): ts.TransformerFactory<ts.SourceFile> {
  return (context: ts.TransformationContext) => {
    const visitor: ts.Visitor = (node: ts.Node): ts.VisitResult<ts.Node> => {
      if (ts.isIdentifier(node) && node.text.startsWith('_')) {
        return ts.factory.updateIdentifier(node, ts.factory.createUniqueName(node.text.slice(1)));
      }
      return ts.visitEachChild(node, visitor, context);
    };
    return (sourceFile: ts.SourceFile) => ts.visitNode(sourceFile, visitor);
  };
}

// Регистрация плагина
const customTransform: ts.CustomTransformers = {
  before: [createPlugin],
  after: [],
  afterDeclarations: []
};
```

### Использование плагина с ts-node

```json
{
  "compilerOptions": {
    "plugins": [
      { "transform": "./path/to/your/plugin" }
    ]
  }
}
```

## Практическое применение

Плагины-компилятора используются для создания мощных инструментов статического анализа, генерации кода, внедрения зависимостей, оптимизации производительности и других задач, требующих глубокой интеграции с процессом компиляции.

## Связанные темы

- [[Трансформеры]]
- [[Метаданные]]
- [[Декораторы]]

## Ключевые выводы

- Плагины-компилятора позволяют глубоко изменять процесс компиляции TypeScript
- Они могут использовать трансформеры для изменения AST
- Плагины требуют понимания внутреннего устройства компилятора TypeScript