---
aliases: ["Пространства имен в TypeScript", "Namespaces", "Модульные пространства имен"]
tags: ["typescript", "modules", "namespaces", "organization", "legacy"]
---

# Пространства-имен

## Обзор

Пространства имен (namespaces) в TypeScript — это способ организации кода в логические группы и избежания конфликта имен. Хотя современные версии TypeScript рекомендуют использовать модули (ECMAScript модули), пространства имен остаются важной частью истории TypeScript и могут быть полезны в определенных сценариях, особенно при работе с устаревшим кодом или библиотеками.

## Определение пространства имен

Пространства имен определяются с помощью ключевого слова `namespace`. Внутри пространства имен можно определять классы, интерфейсы, функции и другие сущности.

```typescript
// geometry.ts
namespace Geometry {
  export interface Point {
    x: number;
    y: number;
  }

  export class Circle {
    constructor(public center: Point, public radius: number) {}

    area(): number {
      return Math.PI * this.radius * this.radius;
    }
  }

  export function distance(p1: Point, p2: Point): number {
    return Math.sqrt(Math.pow(p2.x - p1.x, 2) + Math.pow(p2.y - p1.y, 2));
  }
}
```

## Использование пространства имен

Для использования сущностей из пространства имен используется префикс с именем пространства имен.

```typescript
// main.ts
const point1: Geometry.Point = { x: 0, y: 0 };
const point2: Geometry.Point = { x: 3, y: 4 };
const circle = new Geometry.Circle(point1, 5);

console.log(Geometry.distance(point1, point2)); // 5
console.log(circle.area()); // ~78.54
```

## Вложенные пространства имен

Пространства имен можно вкладывать друг в друга для создания иерархии.

```typescript
// graphics.ts
namespace Graphics {
  export namespace Shapes {
    export interface IShape {
      area(): number;
    }

    export class Rectangle implements IShape {
      constructor(public width: number, public height: number) {}

      area(): number {
        return this.width * this.height;
      }
    }
  }

  export namespace Utils {
    export function scale(value: number, factor: number): number {
      return value * factor;
    }
  }
}
```

```typescript
// main.ts
const rect = new Graphics.Shapes.Rectangle(5, 3);
console.log(rect.area()); // 15

console.log(Graphics.Utils.scale(10, 2)); // 20
```

## Множественные файлы и пространства имен

Пространства имен могут быть разделены по нескольким файлам. TypeScript объединит все файлы с одинаковым именем пространства имен в одну глобальную область.

```typescript
// shapes-part1.ts
namespace Shapes {
  export interface IShape {
    area(): number;
  }

  export class Circle {
    constructor(public radius: number) {}

    area(): number {
      return Math.PI * this.radius * this.radius;
    }
  }
}
```

```typescript
// shapes-part2.ts
namespace Shapes {
  export class Triangle {
    constructor(public base: number, public height: number) {}

    area(): number {
      return 0.5 * this.base * this.height;
    }
  }

  export function getLargestShape(shapes: IShape[]): IShape | null {
    if (shapes.length === 0) return null;
    return shapes.reduce((max, shape) => (shape.area() > max.area() ? shape : max));
  }
}
```

```typescript
// main.ts
const circle = new Shapes.Circle(5);
const triangle = new Shapes.Triangle(6, 4);

console.log(circle.area()); // ~78.54
console.log(triangle.area()); /// 12

const largest = Shapes.getLargestShape([circle, triangle]);
console.log(largest instanceof Shapes.Circle); // true
```

## Отличия от модулей

Пространства имен отличаются от модулей (ECMAScript модулей) следующими аспектами:

- Пространства имен существуют в глобальной области видимости и объединяются компилятором TypeScript.
- Модули имеют собственную область видимости и не загрязняют глобальное пространство имен.
- Модули обеспечивают лучшую изоляцию и предотвращают конфликты имен.
- Модули поддерживают динамический импорт и более гибкие сценарии загрузки.

## Ссылка на файл

Для использования пространств имен из нескольких файлов часто используется тег `/// <reference path="..." />`.

```typescript
// main.ts
/// <reference path="geometry.ts" />

const point1: Geometry.Point = { x: 0, y: 0 };
const circle = new Geometry.Circle(point1, 5);

console.log(Geometry.distance(point1, { x: 3, y: 4 })); // 5
console.log(circle.area()); // ~78.54
```

## Лучшие практики

- Используйте пространства имен только при работе с устаревшим кодом или когда модули не подходят.
- Предпочитайте модули (ECMAScript модули) пространствам имен для новых проектов.
- Избегайте чрезмерного вложения пространств имен, так как это может усложнить структуру кода.
- Используйте осмысленные и краткие имена для пространств имен.
- Рассмотрите возможность использования модулей с именованными экспортами для лучшей изоляции и управления зависимостями.

## Связанные темы

- [[Экспорт-и-импорт]]
- [[Модульность]]
- [[Циклические-зависимости]]