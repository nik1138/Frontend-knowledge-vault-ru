---
aliases: ["Массивы в TypeScript", "Типы массивов"]
tags: ["#typescript", "#arrays", "#data-structures"]
---

# Массивы в TypeScript

## Введение

Массивы - это упорядоченные коллекции элементов одного или разных типов. В TypeScript массивы типизированы, что позволяет избежать ошибок при работе с данными и обеспечивает лучшую поддержку кода. TypeScript предоставляет несколько способов объявления и работы с массивами.

## Объявление массивов

### Синтаксис квадратных скобок

Самый распространенный способ объявления массива - это использование квадратных скобок после типа элементов:

```typescript
// Массив строк
let fruits: string[] = ["яблоко", "банан", "апельсин"];

// Массив чисел
let numbers: number[] = [1, 2, 3, 4, 5];

// Массив булевых значений
let flags: boolean[] = [true, false, true];
```

### Обобщенный синтаксис Array<T>

Альтернативный способ - использование обобщенного типа `Array<T>`:

```typescript
// Массив строк
let colors: Array<string> = ["красный", "зеленый", "синий"];

// Массив чисел
let scores: Array<number> = [85, 92, 78, 96];

// Массив булевых значений
let permissions: Array<boolean> = [true, false, true, false];
```

## Типизация элементов массива

### Массивы одного типа

Массивы могут содержать элементы только одного типа:

```typescript
let userAges: number[] = [25, 30, 35, 40];
// userAges.push("двадцать"); // Ошибка: нельзя добавить строку в массив чисел

let userNames: string[] = ["Александр", "Мария", "Иван"];
// userNames[0] = 123; // Ошибка: нельзя присвоить число строке
```

### Массивы с union типами

Для массивов, содержащих элементы разных типов, используйте union типы:

```typescript
let mixedArray: (string | number)[] = ["hello", 42, "world", 100];
mixedArray.push(200); // OK
mixedArray.push("test"); // OK
// mixedArray.push(true); // Ошибка: boolean не входит в union тип

// Альтернатива - использовать Array с union типом
let alternativeMixed: Array<string | number | boolean> = ["hello", 42, true];
```

## Методы массивов и типизация

TypeScript предоставляет полную типизацию для всех встроенных методов массивов:

```typescript
let numbers: number[] = [1, 2, 3, 4, 5];

// map - возвращает новый массив с теми же типами или преобразованными
let doubled: number[] = numbers.map(n => n * 2);
let strings: string[] = numbers.map(n => n.toString());

// filter - возвращает массив с теми же типами
let evens: number[] = numbers.filter(n => n % 2 === 0);

// find - возвращает элемент или undefined
let found: number | undefined = numbers.find(n => n > 3);

// reduce - может возвращать любой тип
let sum: number = numbers.reduce((acc, curr) => acc + curr, 0);
let concatenated: string = numbers.reduce((acc, curr) => acc + curr, "");
```

## Readonly массивы

Для создания массивов, которые нельзя изменять, используйте тип `readonly`:

```typescript
let readOnlyNumbers: readonly number[] = [1, 2, 3, 4, 5];
// readOnlyNumbers.push(6); // Ошибка: push не доступен для readonly массивов
// readOnlyNumbers[0] = 10; // Ошибка: нельзя изменить элемент

// Альтернативный синтаксис
let readOnlyStrings: ReadonlyArray<string> = ["a", "b", "c"];
// readOnlyStrings.pop(); // Ошибка: методы изменения недоступны

// Создание readonly массива из обычного
let mutableArray: number[] = [1, 2, 3];
let immutableArray: readonly number[] = mutableArray as const; // или просто переменная
```

## Кортежи как специальный вид массивов

Кортежи - это массивы с фиксированной длиной и известными типами элементов:

```typescript
// Кортеж с фиксированным количеством и типами элементов
let user: [string, number, boolean] = ["Александр", 30, true];

// Деструктуризация кортежа
let [name, age, isActive] = user;

// Ограниченные операции (только push разрешен для кортежей)
user.push("extra"); // OK, но теперь это уже не строго кортеж
```

## Многомерные массивы

TypeScript поддерживает многомерные массивы с соответствующей типизацией:

```typescript
// Двумерный массив чисел
let matrix: number[][] = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

// Трехмерный массив строк
let cube: string[][][] = [
  [
    ["a", "b"],
    ["c", "d"]
  ],
  [
    ["e", "f"],
    ["g", "h"]
  ]
];

// Массив объектов
interface User {
  id: number;
  name: string;
  email: string;
}

let users: User[] = [
  { id: 1, name: "Александр", email: "alex@example.com" },
  { id: 2, name: "Мария", email: "maria@example.com" }
];
```

## Практические примеры

### Работа с API данными

```typescript
interface ApiResponse {
  users: User[];
  total: number;
  page: number;
}

// Обработка ответа от API
function processUsers(response: ApiResponse) {
  const activeUsers = response.users.filter(user => user.isActive);
  const usernames = response.users.map(user => user.name);
  return { activeUsers, usernames };
}
```

### Создание и инициализация массивов

```typescript
// Создание массива с определенным размером
let emptyArray: number[] = new Array(5); // [undefined, undefined, undefined, undefined, undefined]
let filledArray: number[] = new Array(5).fill(0); // [0, 0, 0, 0, 0]

// Генерация массива
function generateSequence(length: number): number[] {
  return Array.from({ length }, (_, i) => i);
}
const sequence = generateSequence(10); // [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

### Универсальные функции для работы с массивами

```typescript
// Универсальная функция для получения первого элемента
function firstElement<T>(arr: T[]): T | undefined {
  return arr[0];
}

const firstString = firstElement(["a", "b", "c"]); // string | undefined
const firstNumber = firstElement([1, 2, 3]); // number | undefined

// Универсальная функция для получения последнего элемента
function lastElement<T>(arr: T[]): T | undefined {
  return arr[arr.length - 1];
}
```

## Лучшие практики

### Использование конкретных типов

```typescript
// Хорошо: конкретный тип
let userIds: number[] = [1, 2, 3, 4, 5];

// Не рекомендуется: слишком общий тип
// let items: any[] = [1, "hello", true];
```

### Проверка длины массива

```typescript
function processArray(items: string[]) {
  if (items.length === 0) {
    console.log("Массив пуст");
    return;
  }
  
  // Обработка элементов
  items.forEach(item => console.log(item));
}
```

### Использование spread оператора

```typescript
let arr1: number[] = [1, 2, 3];
let arr2: number[] = [4, 5, 6];

// Объединение массивов
let combined: number[] = [...arr1, ...arr2]; // [1, 2, 3, 4, 5, 6]

// Копирование массива
let copy: number[] = [...arr1];
```

## Заключение

Массивы в TypeScript предоставляют мощную систему типизации, которая помогает избежать ошибок при работе с коллекциями данных. Понимание различных способов объявления и использования массивов позволяет писать более надежный и понятный код. В следующих разделах мы рассмотрим [[Кортежи]] и другие продвинутые типы данных.

## См. также

- [[Примитивные-типы]]
- [[Объекты]]
- [[Кортежи]]
- [[Перечисления]]
- [[Универсальные-типы]]