---
aliases: ["Композиция проектов", "Составные проекты"]
tags: ["#typescript", "#архитектура", "#проекты"]
---

# Композиция проектов

## Обзор

Композиция проектов в TypeScript - это подход к созданию сложных приложений путем объединения более простых, независимых проектов. Этот подход позволяет разработчикам создавать переиспользуемые компоненты и библиотеки, которые могут быть объединены для создания более крупных приложений. Композиция проектов особенно важна при работе с монорепозиториями и системами с несколькими проектами.

## Основные принципы композиции

### 1. Модульность

Каждый проект должен быть спроектирован как модуль, который можно легко интегрировать с другими проектами. Это означает:

- Четкое определение интерфейсов
- Минимизация зависимостей
- Хорошо документированные API

### 2. Независимость

Каждый проект должен быть максимально независимым от других проектов:

- Возможность тестирования отдельно
- Возможность развертывания отдельно
- Минимизация влияния изменений на другие проекты

### 3. Переиспользуемость

Проекты должны быть спроектированы с учетом возможности повторного использования:

- Общие библиотеки и утилиты
- Компоненты пользовательского интерфейса
- Бизнес-логика

## Практические подходы к композиции

### 1. Архитектура слоев

Разделение проекта на слои, каждый из которых отвечает за определенную функциональность:

```
frontend-app/
├── presentation-layer/     # UI компоненты
├── business-layer/        # Бизнес-логика
├── data-layer/           # Работа с данными
└── shared/              # Общие утилиты
```

### 2. Микросервисная архитектура

Каждый проект представляет собой независимый сервис:

```
api-gateway/
├── auth-service/
├── user-service/
├── order-service/
└── notification-service/
```

### 3. Feature-Sliced Design

Разделение по функциональным возможностям:

```
project/
├── entities/    # Бизнес-сущности
├── features/    # Функциональные возможности
├── widgets/     # Компоненты интерфейса
├── pages/       # Страницы приложения
├── shared/      # Общие компоненты
└── app/        # Конфигурация приложения
```

## Практические примеры композиции

### Пример 1: Композиция через npm-пакеты

Создание общих библиотек в виде npm-пакетов:

```typescript
// packages/ui-components/src/Button.tsx
import React from 'react';

interface ButtonProps {
  children: React.ReactNode;
  onClick: () => void;
}

export const Button: React.FC<ButtonProps> = ({ children, onClick }) => (
  <button onClick={onClick}>{children}</button>
);
```

```typescript
// packages/core-logic/src/validation.ts
export const validateEmail = (email: string): boolean => {
  const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return regex.test(email);
};
```

### Пример 2: Композиция через TypeScript-проекты

Использование ссылок на проекты для композиции:

```json
// packages/main-app/tsconfig.json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "references": [
    { "path": "../ui-components" },
    { "path": "../core-logic" }
  ],
  "include": ["src/**/*"]
}
```

## Практические рекомендации

1. **Определите границы проектов**: Четко определите, что входит в каждый проект
2. **Создайте общие библиотеки**: Выносите общую функциональность в отдельные проекты
3. **Используйте контракты API**: Определите четкие интерфейсы между проектами
4. **Тестируйте интеграцию**: Обязательно тестируйте взаимодействие между проектами
5. **Документируйте зависимости**: Поддерживайте актуальную документацию по зависимостям

## Управление зависимостями в композиции

При композиции проектов важно правильно управлять зависимостями:

- Используйте версионирование для общих библиотек
- Избегайте циклических зависимостей
- Рассмотрите использование инструментов для управления зависимостями
- Регулярно обновляйте зависимости

## Связанные концепции

- [[Монорепозитории]]
- [[Множественные-проекты]]
- [[Ссылки-на-проекты]]
- [[Управление-зависимостями]]

## Заключение

Композиция проектов позволяет создавать гибкие и масштабируемые архитектуры приложений. Правильное применение принципов композиции может значительно улучшить качество кода, упростить поддержку и ускорить разработку новых функций.