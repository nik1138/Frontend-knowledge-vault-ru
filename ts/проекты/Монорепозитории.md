---
aliases: ["Монорепо", "Единый репозиторий"]
tags: ["#typescript", "#архитектура", "#монорепозитории"]
---

# Монорепозитории

## Обзор

Монорепозитории (или монорепо) представляют собой подход к управлению исходным кодом, при котором несколько проектов или компонентов хранятся в одном репозитории. В контексте TypeScript-проектов монорепозитории позволяют эффективно управлять несколькими связанными проектами, разделять код и зависимости, а также упрощать процессы разработки и тестирования.

## Преимущества

- **Общий доступ к коду**: Компоненты и библиотеки могут легко использоваться между проектами.
- **Единый контроль версий**: Все проекты находятся под единым контролем версий, что упрощает отслеживание изменений.
- **Упрощение CI/CD**: Возможность автоматизировать тестирование и деплой сразу для нескольких проектов.
- **Единый стиль кодирования**: Проще поддерживать единые стандарты кодирования и линтеры.

## Недостатки

- **Сложность начальной настройки**: Необходимо правильно настроить структуру и инструменты.
- **Рост времени сборки**: При неправильной настройке время сборки может увеличиться.
- **Повышенная сложность управления зависимостями**: Требуется тщательное управление зависимостями между проектами.

## Популярные инструменты

- **[Lerna](https://lerna.js.org/)**: Инструмент для управления JavaScript/TypeScript проектами в монорепозиториях.
- **[Nx](https://nx.dev/)**: Платформа для монорепозиториев с поддержкой TypeScript.
- **[Yarn Workspaces](https://classic.yarnpkg.com/en/docs/workspaces/)**: Возможность управления несколькими пакетами в одном репозитории.
- **[Pnpm Workspaces](https://pnpm.io/workspaces)**: Альтернатива Yarn Workspaces с более эффективным управлением зависимостями.

## Пример структуры монорепозитория

```
monorepo/
├── packages/
│   ├── core/
│   │   ├── src/
│   │   │   └── index.ts
│   │   ├── package.json
│   │   └── tsconfig.json
│   ├── shared/
│   │   ├── src/
│   │   │   └── utils.ts
│   │   ├── package.json
│   │   └── tsconfig.json
│   └── app/
│       ├── src/
│       │   └── main.ts
│       ├── package.json
│       └── tsconfig.json
├── tools/
├── scripts/
├── package.json
├── tsconfig.json
└── lerna.json
```

## Практические рекомендации

1. **Разделяйте проекты по функциональности**: Каждый пакет должен иметь четкое назначение.
2. **Используйте единый tsconfig.json**: Настройте общий конфигурационный файл для всего монорепозитория.
3. **Управляйте зависимостями осторожно**: Избегайте циклических зависимостей между пакетами.
4. **Автоматизируйте тестирование**: Настройте CI/CD для автоматического тестирования изменений в связанных проектах.

## Связанные концепции

- [[Множественные-проекты]]
- [[Композиция-проектов]]
- [[Управление-зависимостями]]
- [[Ссылки-на-проекты]]

## Заключение

Монорепозитории представляют собой мощный инструмент для управления сложными TypeScript-проектами, особенно когда проекты тесно связаны между собой. Правильное применение монорепозиторного подхода может значительно упростить разработку и поддержку кода.