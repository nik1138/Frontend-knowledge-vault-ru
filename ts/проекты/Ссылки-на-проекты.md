---
aliases: ["Ссылки на проекты", "TSConfig References"]
tags: ["#typescript", "#компиляция", "#проекты"]
---

# Ссылки на проекты

## Обзор

Ссылки на проекты (Project References) в TypeScript - это функция, которая позволяет разбивать большие кодовые базы на более мелкие, связанные проекты. Эта функция особенно полезна при работе с монорепозиториями или когда необходимо разделить код на логические модули с возможностью компиляции и тестирования по отдельности.

## Основные понятия

Ссылки на проекты позволяют:
- Разделить код на логические блоки
- Ускорить компиляцию за счет построения только измененных частей
- Лучше организовать структуру проекта
- Повысить переиспользуемость кода

## Настройка ссылок на проекты

### Шаг 1: Создание конфигурационных файлов

Каждый подпроект должен иметь свой собственный `tsconfig.json` файл:

```json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"]
}
```

Ключевые параметры:
- `composite: true` - обязательный параметр для проектов, использующих ссылки
- `declaration: true` - генерация файлов объявлений (.d.ts)
- `declarationMap: true` - карта соответствия для файлов объявлений
- `outDir` - директория для вывода скомпилированных файлов
- `rootDir` - директория исходных файлов

### Шаг 2: Создание основного конфигурационного файла

Основной `tsconfig.json` файл должен содержать ссылки на подпроекты:

```json
{
  "files": [],
  "references": [
    { "path": "./packages/core" },
    { "path": "./packages/shared" },
    { "path": "./packages/app" }
  ]
}
```

### Шаг 3: Компиляция с использованием ссылок

Для компиляции проектов с использованием ссылок используйте флаг `--build`:

```bash
tsc --build
```

Для очистки результатов компиляции:

```bash
tsc --build --clean
```

## Практические примеры

### Пример структуры проекта

```
monorepo/
├── tsconfig.json
├── packages/
│   ├── core/
│   │   ├── src/
│   │   │   └── index.ts
│   │   ├── package.json
│   │   └── tsconfig.json
│   ├── shared/
│   │   ├── src/
│   │   │   └── utils.ts
│   │   ├── package.json
│   │   └── tsconfig.json
│   └── app/
│       ├── src/
│       │   └── main.ts
│       ├── package.json
│       └── tsconfig.json
```

### Пример tsconfig.json для подпроекта

```json
{
  "compilerOptions": {
    "composite": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "target": "ES2020",
    "module": "commonjs",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### Пример основного tsconfig.json

```json
{
  "files": [],
  "references": [
    { "path": "./packages/core" },
    { "path": "./packages/shared" },
    { "path": "./packages/app" }
  ]
}
```

## Преимущества использования ссылок

- **Ускорение компиляции**: TypeScript компилирует только измененные части проекта
- **Лучшая организация**: Логическое разделение кода на модули
- **Независимость**: Возможность тестировать и разрабатывать модули независимо
- **Повторное использование**: Общие библиотеки могут использоваться в нескольких проектах

## Практические рекомендации

1. **Используйте опцию `composite: true`** в каждом подпроекте
2. **Регулярно обновляйте зависимости** между проектами
3. **Тестируйте изменения** в связанных проектах
4. **Используйте тег `--build`** для эффективной компиляции

## Связанные концепции

- [[Монорепозитории]]
- [[Множественные-проекты]]
- [[Композиция-проектов]]
- [[Управление-зависимостями]]

## Заключение

Ссылки на проекты в TypeScript предоставляют мощный инструмент для организации и управления сложными кодовыми базами. Они позволяют разбивать проекты на логические модули с возможностью независимой компиляции и тестирования, что особенно полезно в монорепозиториях.