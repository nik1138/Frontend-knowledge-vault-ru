---
aliases: [наследование tsconfig, extends в tsconfig, базовая конфигурация TypeScript, общие конфигурации]
tags: [typescript, configuration, inheritance, extends]
---

# Наследование конфигураций TypeScript

Наследование конфигураций в TypeScript позволяет создавать общие базовые конфигурации, которые можно переиспользовать в разных проектах или частях одного проекта. Это достигается с помощью свойства `extends` в файле `tsconfig.json`.

## Основы наследования

Свойство `extends` позволяет наследовать настройки из другого JSON-файла конфигурации. Путь к базовому файлу может быть абсолютным или относительным.

### Базовый синтаксис

```json
{
  "extends": "./base-config.json",
  "compilerOptions": {
    // Дополнительные или переопределяющие настройки
  }
}
```

## Примеры использования

### 1. Базовая конфигурация для организации

Создайте базовую конфигурацию `tsconfig.base.json`:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "lib": ["ES2020", "DOM"],
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true,
    "moduleResolution": "node",
    "allowSyntheticDefaultImports": true,
    "resolveJsonModule": true
  }
}
```

Затем используйте её в проекте:

```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src"
  },
  "include": [
    "src/**/*"
  ]
}
```

### 2. Разные конфигурации для разных целей

Можно создать разные конфигурации для различных частей приложения:

**tsconfig.base.json**:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  }
}
```

**tsconfig.node.json** для серверной части:
```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "module": "commonjs",
    "outDir": "./dist/server",
    "lib": ["ES2020"],
    "types": ["node"]
  },
  "include": [
    "src/server/**/*"
  ]
}
```

**tsconfig.client.json** для клиентской части:
```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "module": "ESNext",
    "outDir": "./dist/client",
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "jsx": "react-jsx"
  },
  "include": [
    "src/client/**/*"
  ]
}
```

## Практические примеры наследования

### 1. Конфигурация для тестов

**tsconfig.test.json**:
```json
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "module": "commonjs",
    "outDir": "./dist/test",
    "types": ["node", "jest"]
  },
  "include": [
    "src/**/*",
    "tests/**/*"
  ]
}
```

### 2. Конфигурация для разработки и продакшена

**tsconfig.dev.json**:
```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "sourceMap": true,
    "declaration": true,
    "declarationMap": true
  }
}
```

**tsconfig.prod.json**:
```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "removeComments": true,
    "sourceMap": false
  }
}
```

## Использование публичных конфигураций

Можно наследовать конфигурации из npm-пакетов:

```json
{
  "extends": "@tsconfig/recommended/tsconfig.json",
  "compilerOptions": {
    "outDir": "./dist"
  }
}
```

Популярные пакеты с готовыми конфигурациями:
- `@tsconfig/recommended`
- `@tsconfig/node-lts`
- `@tsconfig/strictest`

Для установки:
```bash
npm install --save-dev @tsconfig/recommended
```

## Особенности наследования

### Порядок объединения настроек

При наследовании настройки объединяются следующим образом:
1. Сначала загружаются настройки из базового файла
2. Затем применяются настройки из текущего файла, которые переопределяют базовые

### Массивы и объекты

- Массивы (например, `include`, `exclude`) полностью заменяются, а не объединяются
- Объекты (например, `compilerOptions`) объединяются глубоко
- Строки и числа заменяются новыми значениями

### Пример объединения объектов

Базовый файл:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "strict": true
  }
}
```

Наследующий файл:
```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "module": "commonjs",
    "declaration": true
  }
}
```

Результат:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",  // Переопределено
    "strict": true,
    "declaration": true    // Добавлено
  }
}
```

## Практические рекомендации

### 1. Структура файлов конфигурации

Рекомендуется структурировать файлы следующим образом:

```
project/
├── tsconfig.json          // Главная конфигурация
├── tsconfig.base.json     // Базовые настройки
├── tsconfig.node.json     // Настройки для Node.js
├── tsconfig.web.json      // Настройки для веб-приложений
└── tsconfig.test.json     // Настройки для тестов
```

### 2. Использование для монорепозиториев

В монорепозиториях можно использовать общую базовую конфигурацию:

**packages/tsconfig.base.json**:
```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "ESNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true
  }
}
```

**packages/ui-library/tsconfig.json**:
```json
{
  "extends": "../tsconfig.base.json",
  "compilerOptions": {
    "jsx": "react-jsx",
    "outDir": "./dist"
  },
  "include": [
    "src/**/*"
  ]
}
```

**packages/api-client/tsconfig.json**:
```json
{
  "extends": "../tsconfig.base.json",
  "compilerOptions": {
    "module": "commonjs",
    "outDir": "./dist"
  },
  "include": [
    "src/**/*"
  ]
}
```

## Связанные темы

- [[tsconfig-json]] - Основной конфигурационный файл TypeScript
- [[Настройка-проекта]] - Как настроить проект TypeScript с нуля
- [[Пути-к-файлам]] - Настройка путей к файлам и алиасов
- [[Опции-компилятора]] - Подробное описание всех опций компилятора
- [[Модули]] - Работа с модулями в TypeScript
- [[Сборка-и-оптимизация]] - Процессы сборки и оптимизации TypeScript