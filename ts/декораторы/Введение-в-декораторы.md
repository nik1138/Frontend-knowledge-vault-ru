---
aliases: ["Декораторы TypeScript", "Введение в декораторы TS"]
tags: [ts/decorators, typescript, programming]
---

# Введение в декораторы TypeScript

## Обзор

Декораторы в TypeScript - это экспериментальная функция, которая позволяет добавлять аннотации и манипулировать классами и их членами во время объявления. Декораторы используются для внедрения зависимостей, метапрограммирования и добавления дополнительной функциональности к классам без изменения их основного кода.

> [!note] Примечание
> Декораторы являются экспериментальной функцией TypeScript и требуют включения соответствующей опции в файле `tsconfig.json`.

## Требования для использования

Чтобы использовать декораторы в TypeScript, необходимо:

1. Включить опцию `experimentalDecorators` в `tsconfig.json`
2. Установить `target` на `ES5` или выше
3. Иметь понимание функций высшего порядка и замыканий

```json
{
  "compilerOptions": {
    "target": "ES5",
    "experimentalDecorators": true
  }
}
```

## Что такое декоратор

Декоратор - это специальная функция, которая применяется к классу, методу, свойству или параметру. Он может изменять или дополнять поведение этих элементов. Декораторы обозначаются символом `@` перед именем декоратора.

```typescript
@decorator
class MyClass {
  // тело класса
}
```

## Типы декораторов

TypeScript поддерживает несколько типов декораторов:

- [[Декораторы-классов]] - применяются к классу
- [[Декораторы-методов]] - применяются к методам класса
- [[Декораторы-свойств]] - применяются к свойствам класса
- Декораторы параметров - применяются к параметрам методов
- Декораторы доступа - применяются к геттерам и сеттерам

## Принцип работы декораторов

Декораторы работают как функции высшего порядка. Они принимают цель (класс, метод, свойство), имя и дескриптор (если применимо), и могут возвращать модифицированную версию этих элементов.

```typescript
function logged(target: any, propertyKey: string, descriptor: PropertyDescriptor) {
  const originalMethod = descriptor.value;
  
  descriptor.value = function (...args: any[]) {
    console.log(`Вызов метода: ${propertyKey} с аргументами:`, args);
    const result = originalMethod.apply(this, args);
    console.log(`Результат метода: ${propertyKey} =`, result);
    return result;
  };
  
  return descriptor;
}

class Calculator {
  @logged
  add(a: number, b: number): number {
    return a + b;
  }
}

const calc = new Calculator();
calc.add(2, 3); // Выведет логи и вернет 5
```

## Преимущества использования декораторов

1. **Разделение ответственности** - декораторы позволяют вынести вспомогательную логику из основного кода
2. **Повторное использование** - один декоратор можно применить к нескольким элементам
3. **Чистый код** - основная логика класса не загрязнена служебной логикой
4. **Метапрограммирование** - возможность анализа и модификации кода во время компиляции

## Практические применения

- Логирование вызовов методов
- Валидация данных
- Кеширование результатов
- Защита доступа (авторизация)
- Измерение производительности
- Автоматическая сериализация/десериализация

## Заключение

Декораторы - мощный инструмент в TypeScript, который позволяет реализовать принципы AOP (аспектно-ориентированного программирования) и значительно улучшить структуру кода. Понимание декораторов важно для работы с современными фреймворками, такими как [[Angular]] и [[NestJS]].

Для более глубокого понимания рекомендуется изучить каждый тип декораторов отдельно: [[Декораторы-классов]], [[Декораторы-методов]], [[Декораторы-свойств]] и [[Фабрики-декораторов]].

## См. также

- [[Фабрики-декораторов]]
- [[Angular]] - использует декораторы для определения компонентов, сервисов и т.д.
- [[NestJS]] - фреймворк, активно использующий декораторы