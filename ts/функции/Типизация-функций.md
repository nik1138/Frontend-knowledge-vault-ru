---
aliases: ["Функциональная типизация", "Типы функций", "TypeScript функции"]
tags: [ts/функции, типизация, programming]
---

# Типизация-функций

## Обзор

Типизация функций в TypeScript позволяет строго определять сигнатуры функций, включая типы параметров и возвращаемого значения. Это обеспечивает безопасность типов и помогает избежать ошибок во время разработки.

## Основы типизации функций

В TypeScript функции могут быть типизированы несколькими способами:

### Явная типизация параметров и возвращаемого значения

```ts
function add(a: number, b: number): number {
    return a + b;
}
```

### Типизация с помощью интерфейсов

```ts
interface MathOperation {
    (a: number, b: number): number;
}

const multiply: MathOperation = (x, y) => x * y;
```

### Типизация с помощью типов

```ts
type SubtractFunction = (a: number, b: number) => number;

const subtract: SubtractFunction = (x, y) => x - y;
```

## Типизация стрелочных функций

Стрелочные функции также могут быть типизированы:

```ts
const divide: (a: number, b: number) => number = (x, y) => x / y;

// Или с помощью типа
type DivideFunction = (a: number, b: number) => number;
const divide2: DivideFunction = (x, y) => x / y;
```

## Необязательные и стандартные параметры

```ts
function greet(name: string, greeting?: string, punctuation: string = "!"): string {
    return `${greeting || 'Hello'}, ${name}${punctuation}`;
}
```

## Остаточные параметры (rest parameters)

```ts
function sum(...numbers: number[]): number {
    return numbers.reduce((acc, curr) => acc + curr, 0);
}
```

## Функции с перегрузками

TypeScript поддерживает перегрузки функций, что позволяет определять несколько сигнатур для одной функции:

```ts
function makeDate(timestamp: number): Date;
function makeDate(m: number, d: number, y: number): Date;
function makeDate(mOrTimestamp: number, d?: number, y?: number): Date {
    if (d !== undefined && y !== undefined) {
        return new Date(y, mOrTimestamp, d);
    } else {
        return new Date(mOrTimestamp);
    }
}
```

## Типизация функций с this

В JavaScript функции могут использовать `this`, и TypeScript позволяет типизировать его:

```ts
interface User {
    name: string;
    age: number;
    getProfile(this: User): string;
}

const user: User = {
    name: "John",
    age: 30,
    getProfile(this: User) {
        return `${this.name}, ${this.age} years old`;
    }
};
```

## Дженерики в функциях

Дженерики позволяют создавать универсальные функции:

```ts
function identity<T>(arg: T): T {
    return arg;
}

// Использование
const stringResult = identity<string>("hello");
const numberResult = identity(42); // Вывод типа работает автоматически
```

## Типизация функций с коллбэками

```ts
function processArray<T>(arr: T[], callback: (item: T) => boolean): T[] {
    return arr.filter(callback);
}

const numbers = [1, 2, 3, 4, 5];
const evenNumbers = processArray(numbers, (num) => num % 2 === 0);
```

## Функции как параметры

```ts
type CallbackFunction = (result: string) => void;

function executeWithCallback(callback: CallbackFunction) {
    const result = "Operation completed";
    callback(result);
}

executeWithCallback((message) => console.log(message));
```

## Типизация асинхронных функций

```ts
async function fetchData(): Promise<string> {
    const response = await fetch('/api/data');
    return response.text();
}

// Или с конкретным типом
interface ApiResponse {
    id: number;
    name: string;
}

async function fetchUser(): Promise<ApiResponse> {
    const response = await fetch('/api/user');
    return response.json();
}
```

## Практические рекомендации

- Всегда указывайте тип возвращаемого значения для публичных функций, чтобы избежать непреднамеренного изменения сигнатуры
- Используйте дженерики для создания универсальных функций, которые работают с разными типами
- Применяйте интерфейсы и типы для сложных сигнатур функций, чтобы улучшить читаемость кода
- Используйте опциональные параметры вместо нескольких перегрузок функций, когда это возможно

## Связанные темы

- [[Перегрузка-функций]]
- [[Стрелочные-функции]]
- [[Функции-высшего-порядка]]
- [[Рекурсивные-функции]]
- [[Типы в TypeScript]]
- [[Интерфейсы в TypeScript]]

## Заключение

Правильная типизация функций в TypeScript - ключ к созданию надежного и поддерживаемого кода. Она обеспечивает безопасность типов, улучшает автодополнение в редакторе кода и делает код более понятным для других разработчиков.