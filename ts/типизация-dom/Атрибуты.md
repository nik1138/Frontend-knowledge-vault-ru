---
aliases: ["DOM Атрибуты", "Атрибуты DOM", "TypeScript Атрибуты"]
tags: [typescript, dom, атрибуты, типизация]
---

# DOM Атрибуты в TypeScript

## Обзор

Работа с атрибутами DOM элементов в TypeScript требует понимания различных способов доступа и манипуляции атрибутами. TypeScript предоставляет типизированные методы для работы с атрибутами, что обеспечивает безопасность типов и улучшает опыт разработки.

## Типы атрибутов

### Встроенные атрибуты элементов

Каждый тип DOM элемента в TypeScript имеет предопределенные свойства для стандартных атрибутов:

- `HTMLElement` - содержит общие атрибуты как свойства (id, class, style, title и др.)
- `HTMLInputElement` - содержит специфичные атрибуты (value, type, placeholder, required и др.)
- `HTMLAnchorElement` - содержит атрибуты для ссылок (href, target, rel и др.)
- и другие специфичные типы

## Примеры работы с атрибутами

### Доступ к стандартным атрибутам

```typescript
const element = document.querySelector('div');

if (element instanceof HTMLElement) {
  // Доступ к стандартным атрибутам как к свойствам
  element.id = 'myElement';
  element.className = 'my-class another-class';
  element.title = 'Описание элемента';
  
  // Получение значений атрибутов
  console.log('ID:', element.id);
  console.log('Классы:', element.className);
  console.log('Заголовок:', element.title);
}
```

### Работа с input элементами

```typescript
const input = document.querySelector('input');

if (input instanceof HTMLInputElement) {
  // Специфичные атрибуты для input элементов
  input.type = 'text';
  input.value = 'Значение';
  input.placeholder = 'Введите текст';
  input.required = true;
  input.minLength = 3;
  input.maxLength = 20;
  
  // Получение значений атрибутов
  console.log('Тип:', input.type);
  console.log('Значение:', input.value);
  console.log('Обязательное:', input.required);
}
```

### Работа с атрибутами через методы

```typescript
const element = document.querySelector('div');

if (element instanceof HTMLElement) {
  // Установка атрибутов через setAttribute
  element.setAttribute('data-role', 'button');
  element.setAttribute('aria-label', 'Кнопка действия');
  element.setAttribute('custom-attr', 'custom-value');
  
  // Получение атрибутов через getAttribute
  const role = element.getAttribute('data-role');
  const label = element.getAttribute('aria-label');
  const custom = element.getAttribute('custom-attr');
  
  console.log('Роль:', role);
  console.log('Метка:', label);
  console.log('Кастомный атрибут:', custom);
  
  // Проверка наличия атрибута
  if (element.hasAttribute('data-role')) {
    console.log('Элемент имеет атрибут data-role');
  }
  
  // Удаление атрибута
  element.removeAttribute('custom-attr');
}
```

## Типизация data-атрибутов

### Работа с dataset

```typescript
const element = document.querySelector('div');

if (element instanceof HTMLElement) {
  // Установка data-атрибутов через dataset
  element.dataset.role = 'button';
  element.dataset.userId = '123';
  element.dataset.itemId = '456';
  
  // Получение data-атрибутов
  console.log('Роль:', element.dataset.role);
  console.log('ID пользователя:', element.dataset.userId);
  console.log('ID элемента:', element.dataset.itemId);
  
  // Dataset возвращает только строки
  const userId = parseInt(element.dataset.userId || '0');
  console.log('Числовой ID пользователя:', userId);
}
```

### Типизация dataset

```typescript
// Расширение интерфейса для типизации dataset
interface CustomHTMLElement extends HTMLElement {
  dataset: DOMStringMap & {
    userId: string;
    itemId: string;
    isActive: string;
  };
}

const element = document.querySelector('div');

if (element instanceof HTMLElement) {
  // Теперь TypeScript знает о кастомных dataset свойствах
  element.dataset.userId = '123';
  element.dataset.itemId = '456';
  element.dataset.isActive = 'true';
  
  console.log('Пользователь ID:', element.dataset.userId);
}
```

## Типизация специфичных атрибутов

### Атрибуты для различных элементов

```typescript
// Атрибуты для изображений
const img = document.querySelector('img');

if (img instanceof HTMLImageElement) {
  img.src = 'path/to/image.jpg';
  img.alt = 'Описание изображения';
  img.width = 300;
  img.height = 200;
  img.loading = 'lazy'; // Поддержка lazy loading
}

// Атрибуты для ссылок
const link = document.querySelector('a');

if (link instanceof HTMLAnchorElement) {
  link.href = 'https://example.com';
  link.target = '_blank';
  link.rel = 'noopener noreferrer';
  link.download = ''; // Для скачивания файла
}

// Атрибуты для форм
const form = document.querySelector('form');

if (form instanceof HTMLFormElement) {
  form.method = 'POST';
  form.action = '/submit';
  form.enctype = 'multipart/form-data';
}

// Атрибуты для кнопок
const button = document.querySelector('button');

if (button instanceof HTMLButtonElement) {
  button.type = 'submit';
  button.disabled = false;
  button.value = 'submit-value';
}
```

## Практические рекомендации

### Создание типов для атрибутов

```typescript
// Определение типа для кастомных атрибутов
interface CustomAttributes {
  'data-widget-id': string;
  'data-config': string;
  'aria-expanded': 'true' | 'false';
  'role': 'button' | 'menuitem' | 'dialog';
}

// Функция для установки кастомных атрибутов с типизацией
function setCustomAttributes<T extends keyof CustomAttributes>(
  element: HTMLElement,
  attribute: T,
  value: CustomAttributes[T]
): void {
  element.setAttribute(attribute, value as string);
}

// Использование
const div = document.createElement('div');
setCustomAttributes(div, 'data-widget-id', 'widget-123');
setCustomAttributes(div, 'aria-expanded', 'true');
setCustomAttributes(div, 'role', 'button');
```

### Проверка и валидация атрибутов

```typescript
// Функция для безопасной установки атрибута
function safeSetAttribute(
  element: Element,
  name: string,
  value: string,
  allowedAttributes?: string[]
): boolean {
  // Проверка разрешенных атрибутов
  if (allowedAttributes && !allowedAttributes.includes(name)) {
    console.warn(`Атрибут ${name} не разрешен`);
    return false;
  }
  
  // Проверка на потенциально опасные атрибуты
  const dangerousAttributes = ['onclick', 'onload', 'onerror', 'src', 'href'];
  if (dangerousAttributes.includes(name.toLowerCase())) {
    console.warn(`Потенциально опасный атрибут: ${name}`);
    // Дополнительная проверка или очистка значения
  }
  
  try {
    element.setAttribute(name, value);
    return true;
  } catch (error) {
    console.error('Ошибка при установке атрибута:', error);
    return false;
  }
}

// Использование
const element = document.querySelector('div');
if (element) {
  safeSetAttribute(element, 'data-status', 'active');
  safeSetAttribute(element, 'class', 'my-class');
}
```

### Работа с атрибутами в цикле

```typescript
// Установка нескольких атрибутов
const attributes = {
  'id': 'myElement',
  'class': 'btn primary',
  'data-action': 'submit',
  'aria-label': 'Отправить форму'
};

const element = document.querySelector('button');

if (element instanceof HTMLButtonElement) {
  Object.entries(attributes).forEach(([name, value]) => {
    element.setAttribute(name, value);
  });
  
  // Или с использованием spread оператора
  Object.assign(element, {
    id: 'myElement',
    className: 'btn primary'
  });
}
```

## Атрибуты и доступность (a11y)

### ARIA атрибуты

```typescript
const element = document.querySelector('div');

if (element instanceof HTMLElement) {
  // ARIA атрибуты для доступности
  element.setAttribute('role', 'button');
  element.setAttribute('aria-pressed', 'false');
  element.setAttribute('aria-expanded', 'false');
  element.setAttribute('aria-label', 'Кнопка меню');
  element.setAttribute('aria-describedby', 'description-id');
  
  // Использование специфичных свойств для ARIA
  element.ariaLabel = 'Кнопка действия';
  element.ariaExpanded = 'false';
  element.ariaPressed = 'true';
}
```

### Проверка и обновление атрибутов состояния

```typescript
// Функция для управления состоянием элемента
function updateElementState(
  element: HTMLElement,
  state: {
    disabled?: boolean;
    hidden?: boolean;
    expanded?: boolean;
    selected?: boolean;
  }
): void {
  if (state.disabled !== undefined) {
    element.setAttribute('aria-disabled', state.disabled.toString());
    if (element instanceof HTMLButtonElement || element instanceof HTMLInputElement) {
      element.disabled = state.disabled;
    }
  }
  
  if (state.hidden !== undefined) {
    element.hidden = state.hidden;
    element.setAttribute('aria-hidden', state.hidden.toString());
  }
  
  if (state.expanded !== undefined) {
    element.setAttribute('aria-expanded', state.expanded.toString());
  }
  
  if (state.selected !== undefined) {
    element.setAttribute('aria-selected', state.selected.toString());
  }
}

// Использование
const button = document.querySelector('button');
if (button instanceof HTMLButtonElement) {
  updateElementState(button, {
    disabled: false,
    expanded: true,
    selected: false
  });
}
```

## Заключение

Типизация атрибутов DOM в TypeScript обеспечивает безопасность типов при работе с HTML атрибутами. Понимание различных способов доступа к атрибутам и использование соответствующих типов позволяет создавать более надежный и поддерживаемый код.

См. также:
- [[Типы-DOM]]
- [[Элементы]]
- [[События]]
- [[Узлы]]