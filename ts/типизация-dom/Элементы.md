---
aliases: ["DOM Элементы", "Элементы DOM", "TypeScript Элементы"]
tags: [typescript, dom, элементы, типизация]
---

# DOM Элементы в TypeScript

## Обзор

DOM элементы в TypeScript представлены богатой иерархией типов, которые обеспечивают безопасность типов при работе с HTML элементами. TypeScript предоставляет специфичные типы для каждого вида HTML элементов, что позволяет использовать соответствующие свойства и методы без риска ошибок во время выполнения.

## Иерархия типов элементов

### Базовые типы

- `Element` - базовый тип для всех элементов DOM
- `HTMLElement` - базовый тип для HTML элементов
- `SVGElement` - базовый тип для SVG элементов

### Конкретные типы элементов

- `HTMLInputElement` - для элементов `<input>`
- `HTMLTextAreaElement` - для элементов `<textarea>`
- `HTMLSelectElement` - для элементов `<select>`
- `HTMLButtonElement` - для элементов `<button>`
- `HTMLImageElement` - для элементов `<img>`
- `HTMLAnchorElement` - для элементов `<a>`
- `HTMLFormElement` - для элементов `<form>`
- `HTMLDivElement` - для элементов `<div>`
- `HTMLSpanElement` - для элементов `<span>`
- `HTMLTableElement` - для элементов `<table>`
- `HTMLTableRowElement` - для элементов `<tr>`
- `HTMLTableCellElement` - для элементов `<td>` и `<th>`
- и многие другие

## Примеры типизации элементов

### Получение и использование элементов

```typescript
// Получение элемента по тегу
const button = document.querySelector('button');

// TypeScript определяет тип как HTMLButtonElement | null
if (button instanceof HTMLButtonElement) {
  // Теперь TypeScript знает точный тип
  button.disabled = true;
  button.type = 'submit';
}
```

### Работа с input элементами

```typescript
const input = document.querySelector('input');

if (input instanceof HTMLInputElement) {
  // Использование специфичных свойств input элемента
  input.value = 'Новое значение';
  input.type = 'text';
  input.placeholder = 'Введите текст';
  input.required = true;
  
  // Проверка значения
  if (input.type === 'checkbox') {
    console.log('Checkbox checked:', (input as HTMLInputElement).checked);
  }
}
```

### Работа с form элементами

```typescript
const form = document.querySelector('form');

if (form instanceof HTMLFormElement) {
  // Использование специфичных свойств form элемента
  form.addEventListener('submit', (event) => {
    event.preventDefault();
    
    // Получение данных формы
    const formData = new FormData(form);
    console.log('Данные формы:', Object.fromEntries(formData));
  });
}
```

## Продвинутая типизация

### Уточнение типов через type guards

```typescript
function isInputElement(element: Element): element is HTMLInputElement {
  return element.tagName === 'INPUT';
}

function isTextAreaElement(element: Element): element is HTMLTextAreaElement {
  return element.tagName === 'TEXTAREA';
}

function isSelectElement(element: Element): element is HTMLSelectElement {
  return element.tagName === 'SELECT';
}

// Использование type guards
const element = document.querySelector('input, textarea, select');

if (isInputElement(element)) {
  // element теперь имеет тип HTMLInputElement
  console.log('Input value:', element.value);
} else if (isTextAreaElement(element)) {
  // element теперь имеет тип HTMLTextAreaElement
  console.log('Textarea value:', element.value);
} else if (isSelectElement(element)) {
  // element теперь имеет тип HTMLSelectElement
  console.log('Select value:', element.value);
}
```

### Работа с коллекциями элементов

```typescript
// Получение коллекции input элементов
const inputs = document.querySelectorAll('input');

// inputs имеет тип NodeListOf<HTMLInputElement>
inputs.forEach(input => {
  // input имеет тип HTMLInputElement
  if (input.type === 'text') {
    console.log('Текстовое поле:', input.value);
  } else if (input.type === 'checkbox') {
    console.log('Чекбокс:', input.checked);
  }
});
```

### Создание элементов с типизацией

```typescript
// Создание input элемента
const inputElement = document.createElement('input') as HTMLInputElement;
inputElement.type = 'text';
inputElement.placeholder = 'Введите текст';

// Создание button элемента
const buttonElement = document.createElement('button') as HTMLButtonElement;
buttonElement.textContent = 'Нажми меня';
buttonElement.type = 'button';

// Создание form элемента
const formElement = document.createElement('form') as HTMLFormElement;
formElement.appendChild(inputElement);
formElement.appendChild(buttonElement);
```

## Специфичные свойства элементов

### Input элементы

```typescript
const input = document.createElement('input');

// Текстовые поля
input.type = 'text';
input.value = 'Значение';
input.placeholder = 'Подсказка';
input.required = true;
input.minLength = 3;
input.maxLength = 20;

// Числовые поля
input.type = 'number';
input.min = '0';
input.max = '100';
input.step = '1';

// Checkbox
input.type = 'checkbox';
(input as HTMLInputElement).checked = true;

// Radio
input.type = 'radio';
(input as HTMLInputElement).checked = false;
```

### Select элементы

```typescript
const select = document.createElement('select') as HTMLSelectElement;

// Добавление опций
const option1 = document.createElement('option');
option1.value = 'option1';
option1.textContent = 'Опция 1';
select.appendChild(option1);

const option2 = document.createElement('option');
option2.value = 'option2';
option2.textContent = 'Опция 2';
select.appendChild(option2);

// Выбор опции
select.value = 'option1';
console.log('Выбранная опция:', select.value);

// Получение индекса выбранной опции
console.log('Индекс выбранной опции:', select.selectedIndex);
```

### Image элементы

```typescript
const img = document.createElement('img') as HTMLImageElement;

img.src = 'path/to/image.jpg';
img.alt = 'Описание изображения';
img.width = 300;
img.height = 200;

// Обработка событий загрузки
img.onload = () => {
  console.log('Изображение загружено');
};

img.onerror = () => {
  console.log('Ошибка загрузки изображения');
};
```

## Практические рекомендации

### Использование as для уточнения типа

```typescript
// Когда вы уверены в типе элемента
const element = document.querySelector('#myInput');
const inputElement = element as HTMLInputElement;

// Более безопасный способ с проверкой
const safeInputElement = document.querySelector('#myInput');
if (safeInputElement && safeInputElement instanceof HTMLInputElement) {
  // Здесь можно безопасно использовать input-специфичные свойства
  console.log(safeInputElement.value);
}
```

### Создание типов для форм

```typescript
interface LoginFormElements extends HTMLFormControlsCollection {
  username: HTMLInputElement;
  password: HTMLInputElement;
  remember: HTMLInputElement;
}

interface LoginForm extends HTMLFormElement {
  elements: LoginFormElements;
}

// Использование специфичного типа формы
const form = document.querySelector('#loginForm') as LoginForm;

if (form) {
  const username = form.elements.username.value;
  const password = form.elements.password.value;
  const remember = form.elements.remember.checked;
  
  console.log({ username, password, remember });
}
```

### Работа с кастомными атрибутами

```typescript
const element = document.querySelector('[data-role="button"]');

if (element instanceof HTMLElement) {
  // Работа с data-атрибутами
  const role = element.dataset.role;
  const id = element.dataset.id;
  
  console.log('Роль:', role);
  console.log('ID:', id);
}
```

## Заключение

Типизация DOM элементов в TypeScript обеспечивает безопасность типов и улучшает опыт разработки. Понимание иерархии типов и использование специфичных типов для каждого элемента позволяет избежать ошибок и использовать все возможности каждого типа элемента.

См. также:
- [[Типы-DOM]]
- [[События]]
- [[Узлы]]
- [[Атрибуты]]