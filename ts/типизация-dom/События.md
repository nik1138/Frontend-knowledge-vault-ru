---
aliases: ["DOM События", "События DOM", "TypeScript События"]
tags: [typescript, dom, события, типизация]
---

# События DOM в TypeScript

## Обзор

События DOM в TypeScript обеспечивают типизированное взаимодействие с пользовательскими действиями и системными событиями. TypeScript предоставляет богатую систему типов для различных событий, что позволяет избежать ошибок при обработке событий и улучшает автодополнение в редакторах кода.

## Основные типы событий

### Базовые типы событий

- `Event` - базовый тип для всех событий
- `UIEvent` - базовый тип для пользовательских интерфейсных событий
- `MouseEvent` - для событий мыши
- `KeyboardEvent` - для клавиатурных событий
- `TouchEvent` - для сенсорных событий
- `FocusEvent` - для событий фокуса
- `InputEvent` - для событий ввода
- `ClipboardEvent` - для событий буфера обмена

## Примеры типизации событий

### Обработка клика мыши

```typescript
const button = document.querySelector('button');

button?.addEventListener('click', (event: MouseEvent) => {
  // event имеет тип MouseEvent
  console.log('Координаты клика:', event.clientX, event.clientY);
  console.log('Кнопка мыши:', event.button);
});
```

### Обработка клавиатурных событий

```typescript
const input = document.querySelector('input');

input?.addEventListener('keydown', (event: KeyboardEvent) => {
  // event имеет тип KeyboardEvent
  console.log('Нажатая клавиша:', event.key);
  console.log('Код клавиши:', event.code);
  
  // Проверка специфичных свойств
  if (event.ctrlKey) {
    console.log('Нажата клавиша Ctrl');
  }
});
```

### Обработка событий ввода

```typescript
const textArea = document.querySelector('textarea');

textArea?.addEventListener('input', (event: InputEvent) => {
  // event имеет тип InputEvent
  const target = event.target as HTMLTextAreaElement;
  console.log('Текущее значение:', target.value);
});
```

## Расширенные типы событий

### Специфичные типы событий

```typescript
// Событие изменения значения input
const inputElement = document.querySelector('input');
inputElement?.addEventListener('change', (event: Event) => {
  const target = event.target as HTMLInputElement;
  console.log('Измененное значение:', target.value);
});

// Событие отправки формы
const form = document.querySelector('form');
form?.addEventListener('submit', (event: SubmitEvent) => {
  event.preventDefault(); // TypeScript знает о методе preventDefault
  console.log('Форма отправлена');
});
```

### События Drag and Drop

```typescript
const draggableElement = document.querySelector('.draggable');

draggableElement?.addEventListener('dragstart', (event: DragEvent) => {
  event.dataTransfer?.setData('text/plain', 'Данные для перетаскивания');
});

draggableElement?.addEventListener('drop', (event: DragEvent) => {
  event.preventDefault();
  const data = event.dataTransfer?.getData('text/plain');
  console.log('Полученные данные:', data);
});
```

## Создание пользовательских событий

```typescript
// Определение пользовательского типа события
interface CustomDataEvent extends Event {
  detail: {
    message: string;
    timestamp: number;
  };
}

// Создание и использование пользовательского события
const customEvent = new CustomEvent<CustomDataEvent>('myCustomEvent', {
  detail: {
    message: 'Привет из пользовательского события',
    timestamp: Date.now()
  }
});

document.dispatchEvent(customEvent);

// Обработка пользовательского события
document.addEventListener('myCustomEvent', (event: CustomEvent) => {
  console.log('Сообщение:', event.detail.message);
  console.log('Время:', event.detail.timestamp);
});
```

## Практические рекомендации

### Использование строгой типизации для обработчиков

```typescript
// Определение типа обработчика события
type ClickHandler = (event: MouseEvent) => void;

const handleClick: ClickHandler = (event) => {
  console.log('Клик обработан:', event.clientX, event.clientY);
};

button?.addEventListener('click', handleClick);
```

### Обработка нескольких типов событий

```typescript
// Обработчик, который может работать с разными типами событий
function handleEvent(event: MouseEvent | KeyboardEvent) {
  if (event instanceof MouseEvent) {
    // Обработка MouseEvents
    console.log('Клик:', event.clientX, event.clientY);
  } else if (event instanceof KeyboardEvent) {
    // Обработка KeyboardEvents
    console.log('Клавиша:', event.key);
  }
}
```

### Использование generic типов для событий

```typescript
// Generic функция для обработки событий
function createEventHandler<T extends Event>(
  eventType: string,
  handler: (event: T) => void
) {
  return function (element: Element) {
    element.addEventListener(eventType, handler as EventListener);
  };
}

// Использование generic функции
const clickHandler = createEventHandler('click', (event: MouseEvent) => {
  console.log('Клик обработан');
});
```

## Типизация для React и других фреймворков

При работе с фреймворками, такими как React, типизация событий может немного отличаться:

```typescript
// В React используется синтетические события
import React from 'react';

const MyComponent: React.FC = () => {
  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {
    console.log('Клик в React:', event.clientX);
  };

  return <button onClick={handleClick}>Кнопка</button>;
};
```

## Заключение

Типизация событий в TypeScript обеспечивает безопасность типов при работе с пользовательскими взаимодействиями. Правильное использование типов событий помогает избежать ошибок и улучшает читаемость кода.

См. также:
- [[Типы-DOM]]
- [[Элементы]]
- [[Узлы]]
- [[Атрибуты]]