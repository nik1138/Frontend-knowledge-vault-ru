---
aliases: ["Стиль кода TypeScript", "Форматирование TypeScript", "Best Practices Code Style"]
tags: [typescript, code-style, best-practices, formatting]
---

# Стиль кода TypeScript

## Обзор

Стиль кода в TypeScript важен для обеспечения читаемости, поддерживаемости и согласованности кодовой базы. Хорошо отформатированный код легче читать, понимать и обслуживать, особенно в командной разработке.

Этот документ описывает лучшие практики по стилю кода в TypeScript, включая форматирование, соглашения об именовании и структурирование кода.

## Основные принципы

- **Последовательность**: Следуйте единообразным правилам форматирования во всей кодовой базе
- **Читаемость**: Код должен быть легко читаемым и понятным
- **Поддерживаемость**: Легко модифицировать и расширять код
- **Согласованность**: Следуйте установленным командой стандартам

## Форматирование

### Отступы

Используйте 2 пробела для отступов (рекомендуется) или 4 пробела, но главное - быть последовательным:

```typescript
// Хорошо: 2 пробела
function greet(name: string): string {
  const message = `Hello, ${name}!`;
  return message;
}

// Хорошо: 4 пробела (если используется в проекте)
function greet(name: string): string {
    const message = `Hello, ${name}!`;
    return message;
}
```

### Переносы строк

Для длинных строк используйте переносы для улучшения читаемости:

```typescript
// Хорошо: перенос параметров
function createUserService(
  userRepository: UserRepository,
  emailService: EmailService,
  logger: Logger
): UserService {
  return new UserService(userRepository, emailService, logger);
}

// Хорошо: перенос при вызове функции
const result = someComplexFunction(
  param1,
  param2,
  param3
);
```

### Пустые строки

Используйте пустые строки для логического группирования кода:

```typescript
class UserService {
  private userRepository: UserRepository;
  private emailService: EmailService;

  constructor(
    userRepository: UserRepository,
    emailService: EmailService
  ) {
    this.userRepository = userRepository;
    this.emailService = emailService;
  }

  async createUser(userData: UserInput): Promise<User> {
    const user = new User(userData);
    const savedUser = await this.userRepository.save(user);
    await this.emailService.sendWelcomeEmail(savedUser.email);
    return savedUser;
  }

  async getUserById(id: string): Promise<User | null> {
    return await this.userRepository.findById(id);
  }
}
```

### Скобки

Используйте стиль "Egyptian brackets" (открывающая скобка на той же строке):

```typescript
// Хорошо
if (condition) {
  // код
} else {
  // код
}

for (let i = 0; i < array.length; i++) {
  // код
}

// Плохо
if (condition)
{
  // код
}
else
{
  // код
}
```

## Типизация

### Явная типизация

Хотя TypeScript может выводить типы, иногда лучше указывать их явно для улучшения читаемости:

```typescript
// Хорошо: явная типизация для сложных типов
const users: Map<string, { name: string; age: number; active: boolean }> = new Map();

// Хорошо: когда вывод типов очевиден
const name = "John"; // строка, не нужно явно указывать тип

// Хорошо: явная типизация для возвращаемого значения функции
function calculateTotal(items: Item[]): number {
  return items.reduce((sum, item) => sum + item.price, 0);
}
```

### Типы и интерфейсы

- Используйте `interface` для объектов, которые могут быть расширены
- Используйте `type` для примитивов, объединений и пересечений

```typescript
// Хорошо: для объектных форм использовать interface
interface User {
  id: string;
  name: string;
  email: string;
}

// Хорошо: для объединений использовать type
type UserRole = "admin" | "moderator" | "user";

// Хорошо: для пересечений использовать type
type AdminUser = User & {
  permissions: string[];
  department: string;
};
```

## Функции

### Длина функций

Функции должны быть компактными и выполнять одну задачу:

```typescript
// Хорошо: короткая функция с одной ответственностью
function validateEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}

// Плохо: слишком длинная функция
function processUserData(userData: any) {
  // 50 строк кода для разных задач
}
```

### Параметры функций

- Ограничьте количество параметров (рекомендуется до 3-4)
- Используйте объекты для группировки связанных параметров

```typescript
// Хорошо: группировка параметров в объект
interface CreateOrderOptions {
  userId: string;
  items: OrderItem[];
  shippingAddress: Address;
  paymentMethod: PaymentMethod;
  discountCode?: string;
}

function createOrder(options: CreateOrderOptions): Promise<Order> {
  // реализация
}

// Плохо: слишком много параметров
function createOrder(
  userId: string,
  items: OrderItem[],
  shippingAddress: Address,
  paymentMethod: PaymentMethod,
  discountCode: string | undefined,
  notes: string | undefined
): Promise<Order> {
  // реализация
}
```

## Обработка ошибок

### Использование try-catch

Используйте try-catch для обработки потенциальных ошибок:

```typescript
// Хорошо: явная обработка ошибок
async function fetchUserData(userId: string): Promise<User | null> {
  try {
    const response = await fetch(`/api/users/${userId}`);
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    return await response.json();
  } catch (error) {
    console.error("Failed to fetch user data:", error);
    return null;
  }
}
```

## Импорты

### Организация импортов

Организуйте импорты в логические группы:

```typescript
// Стандартная библиотека
import { promises as fs } from 'fs';
import path from 'path';

// Внешние библиотеки
import express from 'express';
import { Request, Response } from 'express';
import * as yup from 'yup';

// Собственные модули
import { UserService } from '../services/user-service';
import { User } from '../models/user';
import { CONFIG } from '../config';
```

## Линтеры и форматтеры

### ESLint и Prettier

Используйте линтеры и форматтеры для автоматического соблюдения стиля кода:

```json
// .eslintrc.json
{
  "extends": [
    "@typescript-eslint/recommended",
    "prettier"
  ],
  "rules": {
    "@typescript-eslint/explicit-function-return-type": "warn",
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/prefer-const": "error"
  }
}
```

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

## Заключение

Следование стилю кода в TypeScript значительно улучшает качество кода и облегчает совместную работу. Использование автоматических инструментов, таких как ESLint и Prettier, помогает поддерживать согласованность в команде.

Для дополнительной информации см. также:
- [[Именование]]
- [[Организация-структуры]]
- [[Документирование]]
- [[Тестирование]]
- [[Лучшие практики TypeScript]]

#typescript #code-style #best-practices #formatting