---
aliases: ["Документирование TypeScript", "JSDoc TypeScript", "Documentation Best Practices"]
tags: [typescript, documentation, jsdoc, best-practices]
---

# Документирование TypeScript

## Обзор

Документирование кода в TypeScript - это процесс добавления поясняющих комментариев и описаний к различным частям кода. Хорошо документированный код легче понимать, поддерживать и использовать повторно. TypeScript предоставляет отличную поддержку документирования через JSDoc и встроенные возможности типизации.

## Основные принципы документирования

- **Ясность**: Документация должна быть понятной и не содержать двусмысленности
- **Актуальность**: Документация должна соответствовать коду и обновляться вместе с ним
- **Полезность**: Документация должна предоставлять ценную информацию, которую нельзя понять из кода
- **Консистентность**: Следуйте единообразным шаблонам документирования

## JSDoc для функций

### Базовое документирование функций

```typescript
/**
 * Вычисляет сумму двух чисел
 * @param a Первое число
 * @param b Второе число
 * @returns Сумма a и b
 */
function add(a: number, b: number): number {
  return a + b;
}

/**
 * Проверяет, является ли пользователь совершеннолетним
 * @param user Объект пользователя с информацией о возрасте
 * @returns true, если пользователю 18 или больше лет, иначе false
 */
function isAdult(user: { age: number }): boolean {
  return user.age >= 18;
}
```

### Документирование сложных функций

```typescript
/**
 * Создает нового пользователя в системе
 * 
 * Этот метод проверяет данные пользователя, сохраняет его в базу данных
 * и отправляет приветственное письмо.
 * 
 * @param userData - Данные нового пользователя
 * @param userData.name - Имя пользователя (обязательно)
 * @param userData.email - Email пользователя (обязательно)
 * @param userData.age - Возраст пользователя (опционально)
 * @param options - Дополнительные опции
 * @param options.sendWelcomeEmail - Отправить ли приветственное письмо (по умолчанию true)
 * @returns Promise, разрешающийся с созданным пользователем
 * 
 * @throws {ValidationError} Если данные пользователя некорректны
 * @throws {DatabaseError} Если произошла ошибка при сохранении в базу данных
 * 
 * @example
 * ```ts
 * const newUser = await createUser({
 *   name: "Иван Петров",
 *   email: "ivan@example.com",
 *   age: 25
 * });
 * console.log(newUser.id); // Выведет ID созданного пользователя
 * ```
 */
async function createUser(
  userData: { name: string; email: string; age?: number },
  options: { sendWelcomeEmail?: boolean } = {}
): Promise<User> {
  const { sendWelcomeEmail = true } = options;
  
  // Валидация и создание пользователя
  // ...
  
  return new User(userData);
}
```

## JSDoc для классов

### Документирование классов и их методов

```typescript
/**
 * Сервис для управления пользователями
 * 
 * Предоставляет методы для создания, получения, обновления и удаления пользователей.
 * Использует UserRepository для взаимодействия с базой данных.
 */
class UserService {
  private userRepository: UserRepository;
  
  /**
   * Создает экземпляр UserService
   * @param userRepository - Репозиторий для работы с пользователями
   */
  constructor(userRepository: UserRepository) {
    this.userRepository = userRepository;
  }
  
  /**
   * Получает пользователя по ID
   * 
   * @param id - Уникальный идентификатор пользователя
   * @returns Promise, разрешающийся с пользователем или null, если пользователь не найден
   * 
   * @example
   * ```ts
   * const user = await userService.getUserById("123");
   * if (user) {
   *   console.log(`Найден пользователь: ${user.name}`);
   * } else {
   *   console.log("Пользователь не найден");
   * }
   * ```
   */
  async getUserById(id: string): Promise<User | null> {
    return await this.userRepository.findById(id);
  }
  
  /**
   * Обновляет данные пользователя
   * 
   * @param id - ID пользователя для обновления
   * @param updates - Объект с полями, которые нужно обновить
   * @returns Promise, разрешающийся с обновленным пользователем
   * 
   * @throws {UserNotFoundError} Если пользователь с указанным ID не найден
   */
  async updateUser(id: string, updates: Partial<User>): Promise<User> {
    const user = await this.userRepository.findById(id);
    if (!user) {
      throw new UserNotFoundError(id);
    }
    
    return await this.userRepository.update(id, updates);
  }
}
```

## JSDoc для типов и интерфейсов

### Документирование типов

```typescript
/**
 * Роли пользователей в системе
 * 
 * Определяет все возможные роли, которые могут быть назначены пользователям
 */
type UserRole = 'admin' | 'moderator' | 'user' | 'guest';

/**
 * Состояние загрузки данных
 * 
 * Используется для отслеживания состояния асинхронных операций
 */
type LoadingState = 'idle' | 'loading' | 'success' | 'error';

/**
 * Пользователь системы
 * 
 * Содержит основную информацию о пользователе, включая идентификатор,
 * имя, email и роль в системе.
 */
interface User {
  /** Уникальный идентификатор пользователя */
  id: string;
  
  /** Имя пользователя */
  name: string;
  
  /** Email пользователя */
  email: string;
  
  /** Роль пользователя в системе */
  role: UserRole;
  
  /** Дата регистрации пользователя */
  createdAt: Date;
  
  /** Флаг активности пользователя */
  isActive: boolean;
}
```

### Документирование интерфейсов

```typescript
/**
 * Конфигурация приложения
 * 
 * Содержит все настройки, необходимые для работы приложения
 */
interface AppConfig {
  /** Базовый URL API */
  apiUrl: string;
  
  /** Время жизни токена авторизации в миллисекундах */
  tokenExpiration: number;
  
  /** Настройки логирования */
  logging: {
    /** Уровень логирования */
    level: 'debug' | 'info' | 'warn' | 'error';
    
    /** Включить ли логирование в консоль */
    console: boolean;
  };
}

/**
 * Сервис уведомлений
 * 
 * Предоставляет методы для отправки различных типов уведомлений пользователям
 */
interface NotificationService {
  /**
   * Отправляет email-уведомление
   * @param email Email получателя
   * @param subject Тема письма
   * @param body Текст письма
   */
  sendEmail(email: string, subject: string, body: string): Promise<void>;
  
  /**
   * Отправляет push-уведомление
   * @param userId ID пользователя
   * @param title Заголовок уведомления
   * @param body Текст уведомления
   */
  sendPush(userId: string, title: string, body: string): Promise<void>;
}
```

## JSDoc для модулей

### Документирование модуля

```typescript
/**
 * Модуль валидации пользовательских данных
 * 
 * Предоставляет функции для проверки корректности вводимых пользователем данных,
 * включая валидацию email, телефонов, паролей и других форматов.
 * 
 * @module validation
 * @since 1.0.0
 * @author Иван Петров
 */

/**
 * Проверяет, является ли строка корректным email
 * @param email Строка для проверки
 * @returns true, если email корректен, иначе false
 */
export function isValidEmail(email: string): boolean {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}
```

## Документирование сложных типов

### Документирование дженериков

```typescript
/**
 * Результат асинхронной операции
 * 
 * Обертка для представления результата операции, которая может завершиться успешно или с ошибкой
 * 
 * @template T Тип успешного результата
 * @template E Тип ошибки (по умолчанию Error)
 */
interface Result<T, E = Error> {
  /** Флаг успешного завершения операции */
  success: boolean;
  
  /** Данные в случае успеха */
  data?: T;
  
  /** Ошибка в случае неудачи */
  error?: E;
}

/**
 * Выполняет асинхронную операцию с безопасной оберткой
 * 
 * @template T Тип возвращаемых данных
 * @param operation Асинхронная операция для выполнения
 * @returns Promise с результатом типа Result
 * 
 * @example
 * ```ts
 * const result = await safeExecute(async () => {
 *   return await fetchUserData(userId);
 * });
 * 
 * if (result.success) {
 *   console.log('Данные:', result.data);
 * } else {
 *   console.error('Ошибка:', result.error);
 * }
 * ```
 */
async function safeExecute<T>(operation: () => Promise<T>): Promise<Result<T>> {
  try {
    const data = await operation();
    return { success: true, data };
  } catch (error) {
    return { success: false, error: error as Error };
  }
}
```

## Документирование ошибок

### Документирование кастомных ошибок

```typescript
/**
 * Ошибка, возникающая при попытке доступа к несуществующему пользователю
 */
class UserNotFoundError extends Error {
  /**
   * Создает новую ошибку UserNotFoundError
   * @param userId ID пользователя, который не был найден
   */
  constructor(public userId: string) {
    super(`Пользователь с ID ${userId} не найден`);
    this.name = 'UserNotFoundError';
  }
}

/**
 * Ошибка валидации данных
 */
class ValidationError extends Error {
  /**
   * Создает новую ошибку ValidationError
   * @param field Поле, в котором произошла ошибка
   * @param message Описание ошибки
   */
  constructor(public field: string, message: string) {
    super(`Ошибка валидации поля "${field}": ${message}`);
    this.name = 'ValidationError';
  }
}
```

## Автодокументация и инструменты

### Использование TSDoc

TSDoc - это стандарт документирования для TypeScript, который расширяет JSDoc:

```typescript
/**
 * Сервис для работы с API пользователей
 * 
 * @remarks
 * Этот сервис предоставляет методы для взаимодействия с API пользователей.
 * Все методы возвращают Promise и могут выбрасывать ошибки при сетевых проблемах.
 * 
 * @example
 * ```ts
 * const apiService = new UserServiceApi();
 * const users = await apiService.getAllUsers();
 * ```
 */
export class UserServiceApi {
  /**
   * Получает всех пользователей
   * 
   * @returns Promise, разрешающийся массивом пользователей
   * 
   * @throws {NetworkError} Если произошла сетевая ошибка
   * @throws {AuthenticationError} Если пользователь не авторизован
   */
  async getAllUsers(): Promise<User[]> {
    // реализация
  }
}
```

### Генерация документации

Для генерации документации из JSDoc комментариев можно использовать инструменты:

- **TypeDoc** - для генерации документации из TypeScript кода
- **ESDoc** - для документации JavaScript/TypeScript кода

Пример конфигурации TypeDoc:

```json
{
  "entryPoints": ["src/index.ts"],
  "out": "docs",
  "name": "Мое приложение",
  "readme": "README.md",
  "excludeNotExported": true,
  "theme": "default"
}
```

## Лучшие практики документирования

### Что документировать

1. **Публичные API** - все экспортируемые функции, классы, интерфейсы
2. **Сложные функции** - функции с неочевидной логикой
3. **Типы и интерфейсы** - особенно сложные или важные
4. **Параметры и возвращаемые значения** - особенно неочевидные
5. **Ошибки** - какие ошибки могут быть выброшены

### Что не нужно документировать

1. **Очевидный код** - простые геттеры/сеттеры, простые функции
2. **Внутренние функции** - если они не экспортируются
3. **Типы, очевидные из контекста** - если имя типа уже говорит за себя

### Стиль документирования

- Используйте повелительное наклонение: "Вычисляет", "Возвращает", "Создает"
- Пишите кратко и по существу
- Приводите примеры использования
- Обновляйте документацию при изменении кода

## Заключение

Хорошее документирование TypeScript кода значительно улучшает его качество и удобство использования. JSDoc и TSDoc предоставляют мощные инструменты для создания понятной и полезной документации, которая помогает разработчикам понимать и использовать код.

Для дополнительной информации см. также:
- [[Стиль-кода]]
- [[Именование]]
- [[Организация-структуры]]
- [[Тестирование]]
- [[Лучшие практики TypeScript]]

#typescript #documentation #jsdoc #best-practices