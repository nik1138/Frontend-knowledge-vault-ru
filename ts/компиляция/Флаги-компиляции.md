---
aliases: ["Флаги компиляции TypeScript", "Компиляционные флаги", "Параметры компилятора"]
tags: ["#typescript", "#compilation", "#flags", "#compiler-options", "#build-settings"]
---

# Флаги компиляции

Флаги компиляции - это параметры, которые можно передать компилятору TypeScript (`tsc`) для настройки процесса компиляции. Эти флаги могут быть заданы как в командной строке, так и в файле `tsconfig.json` в секции `compilerOptions`.

## Основные флаги компиляции

### Target
Определяет версию ECMAScript, в которую будет компилироваться код:

```bash
tsc --target ES2020
```

В `tsconfig.json`:
```json
{
  "compilerOptions": {
    "target": "ES2020"
  }
}
```

Поддерживаемые значения: `ES3`, `ES5`, `ES6` (или `ES2015`), `ES2016`, `ES2017`, `ES2018`, `ES2019`, `ES2020`, `ES2021`, `ES2022`, `ESNext`

### Module
Указывает систему модулей для генерируемого JavaScript:

```bash
tsc --module commonjs
```

В `tsconfig.json`:
```json
{
  "compilerOptions": {
    "module": "commonjs"
  }
}
```

Поддерживаемые значения: `CommonJS`, `AMD`, `UMD`, `System`, `ES6` (или `ES2015`), `ES2020`, `ESNext`, `None`

### OutDir
Указывает каталог для вывода скомпилированных файлов:

```bash
tsc --outDir ./dist
```

### RootDir
Определяет корневой каталог исходных файлов:

```bash
tsc --rootDir ./src
```

### Declaration
Генерирует файлы `.d.ts` для каждого файла TypeScript:

```bash
tsc --declaration
```

## Строгие проверки типов

### Strict
Включает все строгие флаги проверки типов:

```bash
tsc --strict
```

В `tsconfig.json`:
```json
{
  "compilerOptions": {
    "strict": true
  }
}
```

### NoImplicitAny
Выдает ошибку при обнаружении неявного типа `any`:

```bash
tsc --noImplicitAny
```

### StrictNullChecks
Включает строгую проверку null и undefined:

```bash
tsc --strictNullChecks
```

### StrictFunctionTypes
Включает строгую проверку типов функций:

```bash
tsc --strictFunctionTypes
```

### StrictBindCallApply
Проверяет, что методы `bind`, `call` и `apply` используются с правильными типами:

```bash
tsc --strictBindCallApply
```

### StrictPropertyInitialization
Проверяет, что свойства класса инициализированы в конструкторе:

```bash
tsc --strictPropertyInitialization
```

### NoImplicitThis
Выдает ошибку при использовании `this` с неявным типом `any`:

```bash
tsc --noImplicitThis
```

### AlwaysStrict
Парсит в строгом режиме и добавляет "use strict" к каждому выводимому файлу:

```bash
tsc --alwaysStrict
```

## Дополнительные флаги проверки

### NoUnusedLocals
Выдает ошибки о неиспользуемых локальных переменных:

```bash
tsc --noUnusedLocals
```

### NoUnusedParameters
Выдает ошибки о неиспользуемых параметрах функций:

```bash
tsc --noUnusedParameters
```

### ExactOptionalPropertyTypes
Типизирует опциональные свойства более строго:

```bash
tsc --exactOptionalPropertyTypes
```

### NoImplicitReturns
Проверяет, что каждая ветвь кода в функции возвращает значение:

```bash
tsc --noImplicitReturns
```

### NoFallthroughCasesInSwitch
Выдает ошибку, если в switch-конструкции отсутствует break:

```bash
tsc --noFallthroughCasesInSwitch
```

## Модульная система и разрешение

### ModuleResolution
Указывает стратегию разрешения модулей:

```bash
tsc --moduleResolution node
```

Возможные значения: `node`, `classic`

### BaseUrl
Базовый каталог для неабсолютных имен модулей:

```bash
tsc --baseUrl ./
```

### Paths
Конфигурирует сопоставление для неабсолютных имен модулей:

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  }
}
```

### RootDirs
Позволяет объединять несколько каталогов в одну структуру каталогов времени выполнения:

```json
{
  "compilerOptions": {
    "rootDirs": ["src", "generated"]
  }
}
```

## Флаги для генерации кода

### RemoveComments
Удаляет комментарии из сгенерированного JavaScript:

```bash
tsc --removeComments
```

### SourceMap
Генерирует файлы source map:

```bash
tsc --sourceMap
```

### InlineSourceMap
Встраивает source map в сгенерированные файлы JavaScript:

```bash
tsc --inlineSourceMap
```

### DeclarationMap
Генерирует файлы source map для declaration файлов:

```bash
tsc --declarationMap
```

### EmitDecoratorMetadata
Выдает дополнительные метаданные для декораторов:

```bash
tsc --emitDecoratorMetadata
```

## Флаги для ES модулей и CommonJS

### ESM
Флаги, связанные с ES модулями:

```json
{
  "compilerOptions": {
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "module": "ESNext",
    "moduleResolution": "node"
  }
}
```

### AllowJs
Позволяет компилировать JavaScript файлы:

```bash
tsc --allowJs
```

### CheckJs
Проверяет типы в JavaScript файлах:

```bash
tsc --checkJs
```

## Флаги для декораторов

### ExperimentalDecorators
Включает поддержку декораторов:

```bash
tsc --experimentalDecorators
```

## Флаги для совместимости

### DownlevelIteration
Предоставляет полифил для итераций ES6+ в ES5:

```bash
tsc --downlevelIteration
```

### ImportHelpers
Позволяет импортировать хелперы из tslib:

```bash
tsc --importHelpers
```

## Практические примеры

### Компиляция с настройкой целевой версии и модулей

```bash
tsc --target ES2020 --module commonjs --outDir dist src/main.ts
```

### Строгая компиляция с генерацией declaration файлов

```bash
tsc --strict --declaration --sourceMap src/main.ts
```

### Компиляция с алиасами модулей

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "baseUrl": ".",
    "paths": {
      "@src/*": ["src/*"],
      "@utils/*": ["src/utils/*"],
      "@components/*": ["src/components/*"]
    },
    "strict": true,
    "esModuleInterop": true
  },
  "include": [
    "src/**/*"
  ]
}
```

## Практические рекомендации

1. Используйте флаг `--strict` или `"strict": true` для максимальной безопасности типов
2. Включите `--sourceMap` для отладки в браузере
3. Используйте `--declaration` для библиотек
4. Настройте `--moduleResolution` и `--baseUrl` с `--paths` для удобных импортов
5. Используйте `--noUnusedLocals` и `--noUnusedParameters` для поддержания чистоты кода

## См. также

- [[tsconfig-json]]
- [[Компилятор]]
- [[Инкрементальная-компиляция]]
- [[Множественные-конфигурации]]