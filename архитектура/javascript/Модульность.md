---
aliases: [Модульность JavaScript, JavaScript Modules, Модули JS]
tags: [javascript, modules, architecture, es6, import, export, bundling]
---

# Модульность в JavaScript

## Введение

Модульность в JavaScript - это подход к организации кода, при котором функциональность разбивается на независимые, переиспользуемые модули. Каждый модуль инкапсулирует определенную функциональность и предоставляет четкий интерфейс для взаимодействия с другими модулями. В условиях российского рынка 2025 года, модульность становится критически важной для создания масштабируемых и поддерживаемых приложений, соответствующих требованиям безопасности и стандартам разработки.

## История модульности в JavaScript

### 1. Глобальное пространство имен (до ES6)

До появления стандартизированных модулей JavaScript разработчики использовали различные паттерны для изоляции кода:

```javascript
// Паттерн "Модуль" (IIFE - Immediately Invoked Function Expression)
var RussianUtils = (function() {
  // Приватные переменные и функции
  var taxRate = 0.13; // НДФЛ в России

  function calculateTax(amount) {
    return amount * taxRate;
  }

  // Публичный API
  return {
    addTax: function(amount) {
      return amount + calculateTax(amount);
    },
    
    calculateNet: function(grossAmount) {
      return grossAmount / (1 + taxRate);
    },
    
    formatRussianCurrency: function(amount) {
      return new Intl.NumberFormat('ru-RU', {
        style: 'currency',
        currency: 'RUB'
      }).format(amount);
    }
  };
})();

console.log(RussianUtils.addTax(100000)); // 113000
console.log(RussianUtils.formatRussianCurrency(100000)); // 100 000,00 ₽
```

### 2. CommonJS (Node.js)

CommonJS стал стандартом для модульности на стороне сервера:

```javascript
// math-utils.js (CommonJS)
function add(a, b) {
  return a + b;
}

function subtract(a, b) {
  return a - b;
}

// Экспорт функций
module.exports = {
  add,
  subtract
};

// russian-tax-calculator.js (CommonJS)
const { add } = require('./math-utils');

const taxRate = 0.13; // НДФЛ в России

function calculateTax(income) {
  return income * taxRate;
}

function calculateNetIncome(grossIncome) {
  const tax = calculateTax(grossIncome);
  return grossIncome - tax;
}

module.exports = {
  calculateTax,
  calculateNetIncome
};

// main.js (CommonJS)
const taxCalculator = require('./russian-tax-calculator');
const income = 100000;
console.log(`Налог: ${taxCalculator.calculateTax(income)}`);
console.log(`Чистый доход: ${taxCalculator.calculateNetIncome(income)}`);
```

### 3. AMD (Asynchronous Module Definition)

AMD использовался для асинхронной загрузки модулей в браузере:

```javascript
// russian-validation.js (AMD)
define(['./utils'], function(Utils) {
  function validateINN(inn) {
    const innStr = inn.toString();
    
    if (innStr.length === 10) {
      // Проверка для юридического лица
      const coefficients = [2, 4, 10, 3, 5, 9, 4, 6, 8];
      let sum = 0;
      for (let i = 0; i < 9; i++) {
        sum += parseInt(innStr[i]) * coefficients[i];
      }
      const controlDigit = sum % 11 % 10;
      return controlDigit === parseInt(innStr[9]);
    } else if (innStr.length === 12) {
      // Проверка для физического лица
      const coefficients1 = [7, 2, 4, 10, 3, 5, 9, 4, 6, 8];
      const coefficients2 = [3, 7, 2, 4, 10, 3, 5, 9, 4, 6, 8];
      let sum1 = 0, sum2 = 0;
      
      for (let i = 0; i < 10; i++) {
        sum1 += parseInt(innStr[i]) * coefficients1[i];
        sum2 += parseInt(innStr[i]) * coefficients2[i];
      }
      
      const controlDigit1 = sum1 % 11 % 10;
      const controlDigit2 = sum2 % 11 % 10;
      
      return controlDigit1 === parseInt(innStr[10]) && controlDigit2 === parseInt(innStr[11]);
    }
    
    return false;
  }

  return {
    validateINN
  };
});
```

### 4. ES6 Modules (современный стандарт)

ES6 Modules стали стандартом для модульности как в браузерах, так и в Node.js:

```javascript
// math-utils.mjs (ES6 Modules)
export function add(a, b) {
  return a + b;
}

export function subtract(a, b) {
  return a - b;
}

export function multiply(a, b) {
  return a * b;
}

// russian-tax-calculator.mjs (ES6 Modules)
import { multiply } from './math-utils.mjs';

const TAX_RATE = 0.13; // НДФЛ в России
const PENSION_RATE = 0.22; // Пенсионные отчисления
const MEDICAL_RATE = 0.051; // Медицинские отчисления

export function calculateTax(income) {
  return multiply(income, TAX_RATE);
}

export function calculatePensionContributions(salary) {
  return multiply(salary, PENSION_RATE);
}

export function calculateMedicalInsurance(salary) {
  return multiply(salary, MEDICAL_RATE);
}

export function calculateNetSalary(grossSalary) {
  const pension = calculatePensionContributions(grossSalary);
  const medical = calculateMedicalInsurance(grossSalary);
  const incomeTax = calculateTax(grossSalary - pension - medical);
  
  return {
    gross: grossSalary,
    pension,
    medical,
    incomeTax,
    totalDeductions: pension + medical + incomeTax,
    net: grossSalary - (pension + medical + incomeTax)
  };
}

// main.mjs (ES6 Modules)
import { calculateNetSalary } from './russian-tax-calculator.mjs';

const grossSalary = 150000;
const salaryBreakdown = calculateNetSalary(grossSalary);

console.log(`Брутто: ${salaryBreakdown.gross}`);
console.log(`Нетто: ${salaryBreakdown.net}`);
console.log(`Общие удержания: ${salaryBreakdown.totalDeductions}`);
```

## Типы экспорта в ES6 Modules

### Named Exports

```javascript
// russian-business-constants.mjs
export const TAX_RATES = {
  personalIncome: 0.13,    // НДФЛ
  corporate: 0.20,        // Корпоративный налог
  vat: 0.20               // НДС
};

export const BUSINESS_FORMS = {
  individual: 'ИП',
  limitedCompany: 'ООО',
  jointStock: 'АО'
};

export function formatRussianBusinessForm(formCode) {
  return BUSINESS_FORMS[formCode] || formCode;
}

// В другом файле
import { TAX_RATES, BUSINESS_FORMS, formatRussianBusinessForm } from './russian-business-constants.mjs';
```

### Default Export

```javascript
// russian-date-formatter.mjs
class RussianDateFormatter {
  static format(date, options = {}) {
    const defaultOptions = {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      weekday: 'long'
    };
    
    return date.toLocaleDateString('ru-RU', { ...defaultOptions, ...options });
  }

  static formatDateTime(date) {
    return date.toLocaleString('ru-RU', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    });
  }

  static getRussianHolidays(year = new Date().getFullYear()) {
    return [
      { date: `${year}-01-01`, name: 'Новый год' },
      { date: `${year}-01-02`, name: 'Новогодние каникулы' },
      { date: `${year}-02-23`, name: 'День защитника Отечества' },
      { date: `${year}-03-08`, name: 'Международный женский день' },
      { date: `${year}-05-01`, name: 'Праздник Весны и Труда' },
      { date: `${year}-05-09`, name: 'День Победы' },
      { date: `${year}-06-12`, name: 'День России' },
      { date: `${year}-11-04`, name: 'День народного единства' }
    ];
  }
}

export default RussianDateFormatter;

// В другом файле
import RussianDateFormatter from './russian-date-formatter.mjs';

const today = new Date();
console.log(RussianDateFormatter.format(today));
```

### Mixed Exports

```javascript
// russian-validation-suite.mjs
// Named exports
export const VALIDATION_PATTERNS = {
  inn: /^\d{10,12}$/,
  ogrn: /^\d{13}$|^\d{15}$/,
  kpp: /^\d{9}$/
};

// Default export
export default class RussianValidator {
  static validateINN(inn) {
    // Реализация валидации ИНН
    if (!VALIDATION_PATTERNS.inn.test(inn)) {
      return false;
    }
    
    return this.checkINNControlSum(inn);
  }

  static checkINNControlSum(inn) {
    const innStr = inn.toString();
    
    if (innStr.length === 10) {
      // Проверка для юридического лица
      const coefficients = [2, 4, 10, 3, 5, 9, 4, 6, 8];
      let sum = 0;
      for (let i = 0; i < 9; i++) {
        sum += parseInt(innStr[i]) * coefficients[i];
      }
      const controlDigit = sum % 11 % 10;
      return controlDigit === parseInt(innStr[9]);
    } else if (innStr.length === 12) {
      // Проверка для физического лица
      const coefficients1 = [7, 2, 4, 10, 3, 5, 9, 4, 6, 8];
      const coefficients2 = [3, 7, 2, 4, 10, 3, 5, 9, 4, 6, 8];
      let sum1 = 0, sum2 = 0;
      
      for (let i = 0; i < 10; i++) {
        sum1 += parseInt(innStr[i]) * coefficients1[i];
        sum2 += parseInt(innStr[i]) * coefficients2[i];
      }
      
      const controlDigit1 = sum1 % 11 % 10;
      const controlDigit2 = sum2 % 11 % 10;
      
      return controlDigit1 === parseInt(innStr[10]) && controlDigit2 === parseInt(innStr[11]);
    }
    
    return false;
  }

  static validateOGRN(ogrn) {
    if (!VALIDATION_PATTERNS.ogrn.test(ogrn)) {
      return false;
    }
    
    if (ogrn.length === 13) {
      // Проверка ОГРН для юридических лиц
      const checkPart = parseInt(ogrn.substring(0, 12));
      const controlDigit = parseInt(ogrn[12]);
      const calculatedControl = checkPart % 11 % 10;
      return calculatedControl === controlDigit;
    } else if (ogrn.length === 15) {
      // Проверка ОГРНИП для индивидуальных предпринимателей
      const checkPart = parseInt(ogrn.substring(0, 14));
      const controlDigit = parseInt(ogrn[14]);
      const calculatedControl = checkPart % 13 % 10;
      return calculatedControl === controlDigit;
    }
    
    return false;
  }
}

// В другом файле
import RussianValidator, { VALIDATION_PATTERNS } from './russian-validation-suite.mjs';
```

## Практические примеры модульной архитектуры

### 1. Система модулей для корпоративного приложения

```javascript
// modules/user-management/user-service.mjs
import { RussianValidator } from '../validation/russian-validator.mjs';
import { RussianDateFormatter } from '../utils/date-formatter.mjs';

export class UserService {
  constructor(database) {
    this.db = database;
  }

  async createUser(userData) {
    // Валидация данных с учетом российских требований
    if (userData.inn) {
      if (!RussianValidator.validateINN(userData.inn)) {
        throw new Error('Неверный формат ИНН');
      }
    }

    // Проверка согласия на обработку персональных данных
    if (!userData.personalDataConsent) {
      throw new Error('Требуется согласие на обработку персональных данных');
    }

    const user = {
      id: Date.now(),
      ...userData,
      createdAt: new Date(),
      lastLoginAt: null
    };

    await this.db.users.insert(user);
    return user;
  }

  async getUser(id) {
    const user = await this.db.users.findById(id);
    if (!user) {
      throw new Error('Пользователь не найден');
    }

    // Форматирование даты в российском формате
    user.createdAtFormatted = RussianDateFormatter.format(user.createdAt);
    return user;
  }

  async updateUser(id, updateData) {
    // Обновление данных пользователя с валидацией
    if (updateData.inn) {
      if (!RussianValidator.validateINN(updateData.inn)) {
        throw new Error('Неверный формат ИНН');
      }
    }

    const updatedUser = await this.db.users.update(id, updateData);
    return updatedUser;
  }
}

// modules/user-management/index.mjs
import { UserService } from './user-service.mjs';
import { UserController } from './user-controller.mjs';

export { UserService, UserController };

// modules/user-management/user-controller.mjs
import { UserService } from './user-service.mjs';

export class UserController {
  constructor(userService) {
    this.userService = userService;
  }

  async handleCreateUser(req, res) {
    try {
      const user = await this.userService.createUser(req.body);
      res.status(201).json(user);
    } catch (error) {
      res.status(400).json({ error: error.message });
    }
  }

  async handleGetUser(req, res) {
    try {
      const user = await this.userService.getUser(req.params.id);
      res.json(user);
    } catch (error) {
      res.status(404).json({ error: error.message });
    }
  }
}
```

### 2. Модуль для работы с российскими налоговыми расчетами

```javascript
// modules/tax-calculations/russian-tax-rates.mjs
export const TAX_RATES = {
  personalIncome: 0.13,      // НДФЛ
  personalIncomeHigh: 0.15,  // Повышенная ставка НДФЛ (начиная с 2025)
  corporateProfit: 0.20,     // Налог на прибыль организаций
  corporateSimplified: 0.06, // УСН "доходы"
  corporateSimplified2: 0.15, // УСН "доходы минус расходы"
  vatStandard: 0.20,         // НДС стандартная ставка
  vatReduced: 0.10,          // НДС пониженная ставка
  vatZero: 0.00             // НДС нулевая ставка
};

export const DEDUCTION_LIMITS = {
  personalStandard: 500,     // Стандартный вычет
  personalChild: 1400,       // Вычет на ребенка
  personalChildDisabled: 12000, // Вычет на ребенка-инвалида
  socialEducation: 120000,   // Социальный вычет на образование
  socialMedical: 120000     // Социальный вычет на лечение
};

// modules/tax-calculations/tax-calculator.mjs
import { TAX_RATES, DEDUCTION_LIMITS } from './russian-tax-rates.mjs';

export class TaxCalculator {
  static calculatePersonalIncomeTax(income, additionalIncome = 0) {
    const totalIncome = income + additionalIncome;
    let taxRate = TAX_RATES.personalIncome;
    
    // С 2025 года применяется повышенная ставка НДФЛ для высоких доходов
    if (totalIncome > 5000000) { // Порог для повышенной ставки
      taxRate = TAX_RATES.personalIncomeHigh;
    }
    
    return totalIncome * taxRate;
  }

  static calculateCorporateTax(revenue, expenses, taxSystem = 'general') {
    switch (taxSystem) {
      case 'general':
        const profit = revenue - expenses;
        return Math.max(0, profit) * TAX_RATES.corporateProfit;
      case 'simplified-income':
        return revenue * TAX_RATES.corporateSimplified;
      case 'simplified-income-expenses':
        const netIncome = Math.max(0, revenue - expenses);
        return netIncome * TAX_RATES.corporateSimplified2;
      default:
        throw new Error('Неизвестная система налогообложения');
    }
  }

  static calculateVat(amount, rateType = 'standard') {
    const rate = TAX_RATES[`vat${rateType.charAt(0).toUpperCase() + rateType.slice(1)}`];
    if (rate === undefined) {
      throw new Error('Неизвестная ставка НДС');
    }
    return amount * rate;
  }

  static calculateNetFromGross(grossAmount, taxSystem = 'personal') {
    if (taxSystem === 'personal') {
      // Для упрощения предполагаем стандартную ставку НДФЛ
      return grossAmount / (1 + TAX_RATES.personalIncome);
    }
    // Другие системы налогообложения
    return grossAmount;
  }
}

// modules/tax-calculations/index.mjs
export { TAX_RATES, DEDUCTION_LIMITS } from './russian-tax-rates.mjs';
export { TaxCalculator } from './tax-calculator.mjs';
```

### 3. Модуль для обеспечения соответствия законодательству

```javascript
// modules/compliance/personal-data-compliance.mjs
export class PersonalDataCompliance {
  static checkConsent(userData) {
    return userData.consentGiven === true && 
           userData.consentTimestamp && 
           userData.consentIp;
  }

  static validateDataResidency(data, targetCountry = 'RU') {
    // Проверка, что персональные данные не покидают пределы РФ
    if (targetCountry === 'RU') {
      // Проверка, что данные хранятся на серверах в РФ
      return this.isDataInRussia(data);
    }
    return true;
  }

  static isDataInRussia(data) {
    // Упрощенная проверка - в реальности требует более сложной логики
    return data.location === 'RU' || data.location === 'RUSSIA';
  }

  static logPersonalDataAccess(userId, action, ipAddress) {
    // Логирование доступа к персональным данным
    console.log(`Доступ к ПДн пользователя ${userId}, действие: ${action}, IP: ${ipAddress}, время: ${new Date().toISOString()}`);
  }

  static generateConsentForm() {
    return {
      title: 'Согласие на обработку персональных данных',
      content: 'Я даю согласие на обработку моих персональных данных в соответствии с Федеральным законом от 27.07.2006 № 152-ФЗ "О персональных данных"',
      requiredFields: ['fullName', 'consentAgreement', 'signature'],
      complianceLaw: '152-ФЗ'
    };
  }
}

// modules/compliance/tax-compliance.mjs
export class TaxCompliance {
  static validateTaxResidency(userData) {
    // Проверка налогового резидентства РФ
    return userData.residency === 'RU' || 
           (userData.daysInRussia && userData.daysInRussia >= 183);
  }

  static checkTaxReportingRequirements(income) {
    // Проверка необходимости подачи декларации 3-НДФЛ
    return income > 300000; // Упрощенный порог
  }

  static generateTaxDocument(userData, income) {
    return {
      documentType: '3-НДФЛ',
      taxpayer: userData,
      income,
      taxDue: income * 0.13,
      reportingYear: new Date().getFullYear(),
      status: 'not_submitted'
    };
  }
}

// modules/compliance/index.mjs
export { PersonalDataCompliance } from './personal-data-compliance.mjs';
export { TaxCompliance } from './tax-compliance.mjs';
```

## Современные инструменты и сборщики модулей

### 1. Webpack для модульной архитектуры

```javascript
// webpack.config.js
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

export default {
  entry: './src/main.mjs',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
    clean: true
  },
  module: {
    rules: [
      {
        test: /\.m?js$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: [
              ['@babel/preset-env', {
                targets: '> 0.25%, not dead',
                modules: false // Оставляем ES6 модули для поддержки tree-shaking
              }]
            ]
          }
        }
      }
    ]
  },
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
        },
        russianLibs: {
          test: /[\\/]modules[\\/](tax-calculations|compliance|validation)[\\/]/,
          name: 'russian-libs',
          chunks: 'all',
        }
      }
    }
  },
  resolve: {
    extensions: ['.mjs', '.js', '.json']
  }
};
```

### 2. Rollup для библиотек

```javascript
// rollup.config.js
import resolve from '@rollup/plugin-node-resolve';
import commonjs from '@rollup/plugin-commonjs';
import { babel } from '@rollup/plugin-babel';

export default [
  // ES modules version
  {
    input: 'src/russian-utils.mjs',
    output: {
      file: 'dist/russian-utils.esm.js',
      format: 'es'
    },
    plugins: [
      resolve(),
      commonjs(),
      babel({
        babelHelpers: 'bundled',
        presets: [
          ['@babel/preset-env', {
            targets: '> 0.25%, not dead',
            modules: false
          }]
        ]
      })
    ]
  },
  // CommonJS version
  {
    input: 'src/russian-utils.mjs',
    output: {
      file: 'dist/russian-utils.cjs.js',
      format: 'cjs'
    },
    plugins: [
      resolve(),
      commonjs(),
      babel({
        babelHelpers: 'bundled',
        presets: [
          ['@babel/preset-env', {
            targets: { node: '14' }
          }]
        ]
      })
    ]
  }
];
```

## Лучшие практики модульности

### 1. Структура проекта

```
src/
├── modules/                 # Бизнес-модули
│   ├── user-management/     # Управление пользователями
│   │   ├── user-service.mjs
│   │   ├── user-controller.mjs
│   │   └── index.mjs
│   ├── tax-calculations/    # Расчет налогов
│   │   ├── russian-tax-rates.mjs
│   │   ├── tax-calculator.mjs
│   │   └── index.mjs
│   └── compliance/          # Соответствие требованиям
│       ├── personal-data-compliance.mjs
│       ├── tax-compliance.mjs
│       └── index.mjs
├── shared/                  # Общие утилиты
│   ├── validation.mjs
│   ├── date-formatter.mjs
│   └── constants.mjs
├── config/                  # Конфигурации
│   └── index.mjs
└── main.mjs                 # Точка входа
```

### 2. Именование модулей

- Используйте понятные имена, отражающие функциональность модуля
- Группируйте связанные модули в директории
- Используйте `index.mjs` для экспорта публичного API модуля

### 3. Экспорт API модуля

```javascript
// modules/user-management/index.mjs
// Экспортируем только то, что должно быть доступно извне
export { UserService } from './user-service.mjs';
export { UserController } from './user-controller.mjs';
// Не экспортируем внутренние утилиты
```

### 4. Tree-shaking и оптимизация

```javascript
// utils/array-helpers.mjs
export function unique(array) {
  return [...new Set(array)];
}

export function sortByProperty(array, property) {
  return array.sort((a, b) => a[property] - b[property]);
}

export function groupBy(array, key) {
  return array.reduce((result, item) => {
    (result[item[key]] = result[item[key]] || []).push(item);
    return result;
  }, {});
}

// В другом модуле импортируем только нужные функции
import { unique } from '../utils/array-helpers.mjs';
// Функции sortByProperty и groupBy не будут включены в финальную сборку
```

## Модульность в российском контексте 2025 года

### 1. Соответствие законодательству

```javascript
// modules/compliance/legal-validator.mjs
import { PersonalDataCompliance } from './personal-data-compliance.mjs';

export class LegalValidator {
  static validatePersonalData(userData) {
    // Проверка соответствия ФЗ-152
    if (!PersonalDataCompliance.checkConsent(userData)) {
      throw new Error('Отсутствует согласие на обработку персональных данных');
    }

    // Проверка нахождения данных на территории РФ
    if (!PersonalDataCompliance.validateDataResidency(userData)) {
      throw new Error('Персональные данные должны находиться на территории РФ');
    }

    return true;
  }

  static validateBusinessData(companyData) {
    // Проверка ИНН, ОГРН и других реквизитов
    if (companyData.inn && !this.validateINN(companyData.inn)) {
      throw new Error('Неверный ИНН');
    }

    if (companyData.ogrn && !this.validateOGRN(companyData.ogrn)) {
      throw new Error('Неверный ОГРН');
    }

    return true;
  }

  static validateINN(inn) {
    // Валидация ИНН с использованием модуля валидации
    return /^[0-9]{10,12}$/.test(inn) && this.checkINNControlSum(inn);
  }

  static validateOGRN(ogrn) {
    // Валидация ОГРН
    if (ogrn.length === 13) {
      // Проверка ОГРН для юридических лиц
      const checkPart = parseInt(ogrn.substring(0, 12));
      const controlDigit = parseInt(ogrn[12]);
      const calculatedControl = checkPart % 11 % 10;
      return calculatedControl === controlDigit;
    } else if (ogrn.length === 15) {
      // Проверка ОГРНИП для индивидуальных предпринимателей
      const checkPart = parseInt(ogrn.substring(0, 14));
      const controlDigit = parseInt(ogrn[14]);
      const calculatedControl = checkPart % 13 % 10;
      return calculatedControl === controlDigit;
    }
    
    return false;
  }

  static checkINNControlSum(inn) {
    const innStr = inn.toString();
    
    if (innStr.length === 10) {
      // Проверка для юридического лица
      const coefficients = [2, 4, 10, 3, 5, 9, 4, 6, 8];
      let sum = 0;
      for (let i = 0; i < 9; i++) {
        sum += parseInt(innStr[i]) * coefficients[i];
      }
      const controlDigit = sum % 11 % 10;
      return controlDigit === parseInt(innStr[9]);
    } else if (innStr.length === 12) {
      // Проверка для физического лица
      const coefficients1 = [7, 2, 4, 10, 3, 5, 9, 4, 6, 8];
      const coefficients2 = [3, 7, 2, 4, 10, 3, 5, 9, 4, 6, 8];
      let sum1 = 0, sum2 = 0;
      
      for (let i = 0; i < 10; i++) {
        sum1 += parseInt(innStr[i]) * coefficients1[i];
        sum2 += parseInt(innStr[i]) * coefficients2[i];
      }
      
      const controlDigit1 = sum1 % 11 % 10;
      const controlDigit2 = sum2 % 11 % 10;
      
      return controlDigit1 === parseInt(innStr[10]) && controlDigit2 === parseInt(innStr[11]);
    }
    
    return false;
  }
}
```

### 2. Локализация и региональные особенности

```javascript
// modules/localization/russian-localization.mjs
export class RussianLocalization {
  constructor(region = 'moscow') {
    this.region = region;
    this.taxRates = this.getRegionalTaxRates();
  }

  getRegionalTaxRates() {
    // Различные ставки налогов по регионам
    return {
      moscow: { incomeTax: 0.13, propertyTax: 0.1 },
      spb: { incomeTax: 0.13, propertyTax: 0.1 },
      default: { incomeTax: 0.13, propertyTax: 0.1 }
    };
  }

  getTaxRate(taxType) {
    const regionRates = this.taxRates[this.region] || this.taxRates.default;
    return regionRates[taxType] || 0;
  }

  formatCurrency(amount, currency = 'RUB') {
    return new Intl.NumberFormat('ru-RU', {
      style: 'currency',
      currency: currency,
      minimumFractionDigits: 2
    }).format(amount);
  }

  formatDate(date, options = {}) {
    const defaultOptions = {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    };
    
    return date.toLocaleDateString('ru-RU', { ...defaultOptions, ...options });
  }

  formatPhoneNumber(phone) {
    // Форматирование российского номера телефона
    const cleaned = phone.replace(/\D/g, '');
    if (cleaned.length === 10) {
      return `+7 (${cleaned.substring(0, 3)}) ${cleaned.substring(3, 6)}-${cleaned.substring(6, 8)}-${cleaned.substring(8)}`;
    } else if (cleaned.length === 11 && cleaned[0] === '8') {
      return `+7 (${cleaned.substring(1, 4)}) ${cleaned.substring(4, 7)}-${cleaned.substring(7, 9)}-${cleaned.substring(9)}`;
    }
    return phone;
  }
}
```

## Заключение

Модульность в JavaScript позволяет создавать структурированные, масштабируемые и поддерживаемые приложения. В условиях российского рынка 2025 года, модульная архитектура должна учитывать требования законодательства, локализацию и специфику бизнес-процессов.

> [!tip] Совет
> Используйте ES6 модули как стандарт для новых проектов, применяйте tree-shaking для оптимизации размера сборки, и всегда учитывайте требования соответствия при проектировании архитектуры модулей.

См. также: [[Паттерны-проектирования]], [[MVC-и-MVVM]], [[Компонентная-архитектура]], [[Архитектура-приложений]]