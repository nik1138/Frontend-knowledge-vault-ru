---
aliases: [Компонентная архитектура JavaScript, Компоненты в JS, Component Architecture]
tags: [javascript, architecture, components, frontend, react, vue, angular]
---

# Компонентная архитектура в JavaScript

## Введение

Компонентная архитектура - это подход к построению приложений, при котором пользовательский интерфейс разбивается на независимые, переиспользуемые компоненты. Каждый компонент отвечает за определенную часть интерфейса и может иметь собственное состояние, логику и внешний вид. В условиях российского рынка 2025 года, компонентная архитектура становится ключевым элементом современной разработки веб-приложений.

## Основные принципы компонентной архитектуры

### 1. Модульность

Каждый компонент должен быть независимым модулем, который можно использовать в разных частях приложения. Это позволяет:

- Упрощать тестирование
- Повышать повторное использование кода
- Упрощать сопровождение и обновление

### 2. Инкапсуляция

Компоненты должны скрывать свою внутреннюю реализацию и взаимодействовать с внешним миром через четко определенные интерфейсы (props, events).

### 3. Повторное использование

Компоненты должны быть спроектированы так, чтобы их можно было использовать в разных контекстах и приложениях.

## Типы компонентов

### Презентационные компоненты (Dumb Components)

Эти компоненты отвечают только за отображение данных и не содержат бизнес-логики:

```javascript
// Пример презентационного компонента
function UserCard({ user, onEdit, onDelete }) {
  return (
    <div className="user-card">
      <h3>{user.name}</h3>
      <p>ИД: {user.id}</p>
      <p>Email: {user.email}</p>
      <p>Дата регистрации: {new Date(user.createdAt).toLocaleDateString('ru-RU')}</p>
      <button onClick={() => onEdit(user.id)}>Редактировать</button>
      <button onClick={() => onDelete(user.id)}>Удалить</button>
    </div>
  );
}
```

### Контейнерные компоненты (Smart Components)

Эти компоненты управляют состоянием и бизнес-логикой:

```javascript
// Пример контейнерного компонента
class UserListContainer extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      users: [],
      loading: true
    };
  }

  componentDidMount() {
    this.fetchUsers();
  }

  fetchUsers = async () => {
    try {
      const response = await fetch('/api/users');
      const users = await response.json();
      this.setState({ users, loading: false });
    } catch (error) {
      console.error('Ошибка загрузки пользователей:', error);
      this.setState({ loading: false });
    }
  };

  handleEdit = (userId) => {
    // Логика редактирования пользователя
    console.log(`Редактирование пользователя ${userId}`);
  };

  handleDelete = async (userId) => {
    try {
      await fetch(`/api/users/${userId}`, { method: 'DELETE' });
      this.setState(prevState => ({
        users: prevState.users.filter(user => user.id !== userId)
      }));
    } catch (error) {
      console.error('Ошибка удаления пользователя:', error);
    }
  };

  render() {
    const { users, loading } = this.state;

    if (loading) {
      return <div>Загрузка пользователей...</div>;
    }

    return (
      <div className="user-list">
        {users.map(user => (
          <UserCard 
            key={user.id} 
            user={user} 
            onEdit={this.handleEdit}
            onDelete={this.handleDelete}
          />
        ))}
      </div>
    );
  }
}
```

## Практические примеры компонентной архитектуры

### 1. Система компонентов для корпоративного приложения

```javascript
// Базовый компонент для форм
class BaseForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      formData: props.initialData || {},
      errors: {},
      isSubmitting: false
    };
  }

  handleInputChange = (field, value) => {
    this.setState(prevState => ({
      formData: {
        ...prevState.formData,
        [field]: value
      },
      errors: {
        ...prevState.errors,
        [field]: null
      }
    }));
  };

  validate = () => {
    const { formData, validationRules } = this.props;
    const errors = {};

    for (const [field, rules] of Object.entries(validationRules || {})) {
      for (const rule of rules) {
        if (rule.test && !rule.test(formData[field])) {
          errors[field] = rule.message;
          break;
        }
      }
    }

    this.setState({ errors });
    return Object.keys(errors).length === 0;
  };

  handleSubmit = async (e) => {
    e.preventDefault();
    
    if (!this.validate()) {
      return;
    }

    this.setState({ isSubmitting: true });

    try {
      await this.props.onSubmit(this.state.formData);
      if (this.props.onSuccess) {
        this.props.onSuccess();
      }
    } catch (error) {
      console.error('Ошибка отправки формы:', error);
    } finally {
      this.setState({ isSubmitting: false });
    }
  };

  render() {
    const { children, submitButtonText = 'Отправить' } = this.props;
    const { errors, isSubmitting } = this.state;

    return (
      <form onSubmit={this.handleSubmit} className="base-form">
        {children({
          formData: this.state.formData,
          errors,
          handleInputChange: this.handleInputChange,
          isSubmitting
        })}
        <button 
          type="submit" 
          disabled={isSubmitting}
          className="submit-button"
        >
          {isSubmitting ? 'Отправка...' : submitButtonText}
        </button>
      </form>
    );
  }
}

// Конкретная форма для регистрации сотрудника
function EmployeeRegistrationForm({ onSuccess }) {
  const validationRules = {
    firstName: [
      { test: value => value && value.trim().length > 0, message: 'Имя обязательно' },
      { test: value => /^[а-яёa-z\s]+$/i.test(value), message: 'Имя может содержать только буквы' }
    ],
    lastName: [
      { test: value => value && value.trim().length > 0, message: 'Фамилия обязательна' },
      { test: value => /^[а-яёa-z\s]+$/i.test(value), message: 'Фамилия может содержать только буквы' }
    ],
    email: [
      { test: value => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value), message: 'Неверный формат email' }
    ],
    position: [
      { test: value => value && value.trim().length > 0, message: 'Должность обязательна' }
    ]
  };

  const handleSubmit = async (formData) => {
    // Валидация ИНН для российского контекста
    if (formData.companyInn) {
      const isValidInn = validateRussianInn(formData.companyInn);
      if (!isValidInn) {
        throw new Error('Неверный формат ИНН');
      }
    }

    const response = await fetch('/api/employees', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(formData)
    });

    if (!response.ok) {
      throw new Error('Ошибка регистрации сотрудника');
    }

    return response.json();
  };

  return (
    <BaseForm
      validationRules={validationRules}
      onSubmit={handleSubmit}
      onSuccess={onSuccess}
      submitButtonText="Зарегистрировать сотрудника"
    >
      {({ formData, errors, handleInputChange, isSubmitting }) => (
        <>
          <div className="form-group">
            <label>Имя:</label>
            <input
              type="text"
              value={formData.firstName || ''}
              onChange={(e) => handleInputChange('firstName', e.target.value)}
              className={errors.firstName ? 'error' : ''}
            />
            {errors.firstName && <span className="error-message">{errors.firstName}</span>}
          </div>

          <div className="form-group">
            <label>Фамилия:</label>
            <input
              type="text"
              value={formData.lastName || ''}
              onChange={(e) => handleInputChange('lastName', e.target.value)}
              className={errors.lastName ? 'error' : ''}
            />
            {errors.lastName && <span className="error-message">{errors.lastName}</span>}
          </div>

          <div className="form-group">
            <label>Email:</label>
            <input
              type="email"
              value={formData.email || ''}
              onChange={(e) => handleInputChange('email', e.target.value)}
              className={errors.email ? 'error' : ''}
            />
            {errors.email && <span className="error-message">{errors.email}</span>}
          </div>

          <div className="form-group">
            <label>Должность:</label>
            <input
              type="text"
              value={formData.position || ''}
              onChange={(e) => handleInputChange('position', e.target.value)}
              className={errors.position ? 'error' : ''}
            />
            {errors.position && <span className="error-message">{errors.position}</span>}
          </div>

          <div className="form-group">
            <label>ИНН компании (если применимо):</label>
            <input
              type="text"
              value={formData.companyInn || ''}
              onChange={(e) => handleInputChange('companyInn', e.target.value)}
              placeholder="10 или 12 цифр"
            />
          </div>
        </>
      )}
    </BaseForm>
  );
}

// Функция валидации российского ИНН
function validateRussianInn(inn) {
  const innStr = inn.toString();
  
  if (innStr.length === 10) {
    // Проверка для юридического лица (10 цифр)
    const checkDigit = (2 * +innStr[0] + 4 * +innStr[1] + 10 * +innStr[2] + 
                       3 * +innStr[3] + 5 * +innStr[4] + 9 * +innStr[5] + 
                       4 * +innStr[6] + 6 * +innStr[7] + 8 * +innStr[8]) % 11 % 10;
    return checkDigit === +innStr[9];
  } else if (innStr.length === 12) {
    // Проверка для физического лица (12 цифр)
    const checkDigit1 = (7 * +innStr[0] + 2 * +innStr[1] + 4 * +innStr[2] + 
                        10 * +innStr[3] + 3 * +innStr[4] + 5 * +innStr[5] + 
                        9 * +innStr[6] + 4 * +innStr[7] + 6 * +innStr[8] + 
                        8 * +innStr[9]) % 11 % 10;
    const checkDigit2 = (3 * +innStr[0] + 7 * +innStr[1] + 2 * +innStr[2] + 
                        4 * +innStr[3] + 10 * +innStr[4] + 3 * +innStr[5] + 
                        5 * +innStr[6] + 9 * +innStr[7] + 4 * +innStr[8] + 
                        6 * +innStr[9] + 8 * +innStr[10]) % 11 % 10;
    return checkDigit1 === +innStr[10] && checkDigit2 === +innStr[11];
  }
  
  return false;
}
```

### 2. Компонент для работы с российскими датами и временем

```javascript
// Компонент для отображения даты с российской локализацией
class RussianDateComponent extends React.Component {
  formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('ru-RU', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      weekday: 'long'
    });
  }

  formatDateTime(dateString) {
    const date = new Date(dateString);
    return date.toLocaleString('ru-RU', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    });
  }

  render() {
    const { date, showTime = false, className = '' } = this.props;
    const formattedDate = showTime ? this.formatDateTime(date) : this.formatDate(date);

    return (
      <time dateTime={date} className={`russian-date ${className}`}>
        {formattedDate}
      </time>
    );
  }
}

// Компонент для выбора даты с российскими праздниками
class RussianDatePicker extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      selectedDate: props.initialDate || new Date(),
      holidays: this.getRussianHolidays()
    };
  }

  getRussianHolidays() {
    // Возвращаем список российских праздников для текущего года
    const currentYear = new Date().getFullYear();
    return [
      { date: `${currentYear}-01-01`, name: 'Новый год' },
      { date: `${currentYear}-01-02`, name: 'Новогодние каникулы' },
      { date: `${currentYear}-02-23`, name: 'День защитника Отечества' },
      { date: `${currentYear}-03-08`, name: 'Международный женский день' },
      { date: `${currentYear}-05-01`, name: 'Праздник Весны и Труда' },
      { date: `${currentYear}-05-09`, name: 'День Победы' },
      { date: `${currentYear}-06-12`, name: 'День России' },
      { date: `${currentYear}-11-04`, name: 'День народного единства' }
    ];
  }

  isHoliday(date) {
    const dateStr = date.toISOString().split('T')[0];
    return this.state.holidays.some(holiday => holiday.date === dateStr);
  }

  render() {
    const { selectedDate } = this.state;
    
    return (
      <div className="russian-date-picker">
        <input
          type="date"
          value={selectedDate.toISOString().split('T')[0]}
          onChange={(e) => this.setState({ selectedDate: new Date(e.target.value) })}
        />
        <div className="date-info">
          <p>Выбранная дата: {selectedDate.toLocaleDateString('ru-RU')}</p>
          {this.isHoliday(selectedDate) && (
            <p className="holiday-notice">
              Это государственный праздник: {
                this.state.holidays.find(h => h.date === selectedDate.toISOString().split('T')[0])?.name
              }
            </p>
          )}
        </div>
      </div>
    );
  }
}
```

## Архитектура компонентов в разных фреймворках

### React

В React компоненты могут быть функциональными или классовыми:

```javascript
// Функциональный компонент с хуками
import React, { useState, useEffect } from 'react';

function RussianTaxCalculator() {
  const [income, setIncome] = useState(0);
  const [tax, setTax] = useState(0);

  useEffect(() => {
    // Расчет налога по российской ставке НДФЛ (13%)
    const calculatedTax = income * 0.13;
    setTax(calculatedTax);
  }, [income]);

  return (
    <div className="tax-calculator">
      <h3>Калькулятор налога (Россия)</h3>
      <div className="input-group">
        <label>Доход (руб.):</label>
        <input
          type="number"
          value={income}
          onChange={(e) => setIncome(Number(e.target.value))}
        />
      </div>
      <div className="result">
        <p>НДФЛ (13%): {tax.toFixed(2)} руб.</p>
        <p>Чистый доход: {(income - tax).toFixed(2)} руб.</p>
      </div>
    </div>
  );
}
```

### Vue.js

В Vue.js компоненты имеют определенную структуру с разделением на template, script и style:

```javascript
// Пример Vue.js компонента
export default {
  name: 'RussianBusinessForm',
  data() {
    return {
      formData: {
        companyName: '',
        inn: '',
        kpp: '',
        address: ''
      },
      errors: {},
      isSubmitting: false
    };
  },
  methods: {
    async submitForm() {
      this.isSubmitting = true;
      this.errors = {};

      // Валидация ИНН
      if (!this.validateInn(this.formData.inn)) {
        this.errors.inn = 'Неверный формат ИНН';
        this.isSubmitting = false;
        return;
      }

      try {
        const response = await fetch('/api/business', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(this.formData)
        });

        if (!response.ok) {
          throw new Error('Ошибка сохранения данных');
        }

        // Успешное сохранение
        this.$emit('success');
      } catch (error) {
        console.error('Ошибка:', error);
      } finally {
        this.isSubmitting = false;
      }
    },
    
    validateInn(inn) {
      // Реализация валидации ИНН
      return /^[0-9]{10,12}$/.test(inn) && this.checkInnControlSum(inn);
    },
    
    checkInnControlSum(inn) {
      // Проверка контрольных сумм ИНН
      if (inn.length === 10) {
        // Проверка для юридического лица
        const checkDigit = (2*+inn[0] + 4*+inn[1] + 10*+inn[2] + 
                          3*+inn[3] + 5*+inn[4] + 9*+inn[5] + 
                          4*+inn[6] + 6*+inn[7] + 8*+inn[8]) % 11 % 10;
        return checkDigit === +inn[9];
      } else if (inn.length === 12) {
        // Проверка для физического лица
        const checkDigit1 = (7*+inn[0] + 2*+inn[1] + 4*+inn[2] + 
                           10*+inn[3] + 3*+inn[4] + 5*+inn[5] + 
                           9*+inn[6] + 4*+inn[7] + 6*+inn[8] + 
                           8*+inn[9]) % 11 % 10;
        const checkDigit2 = (3*+inn[0] + 7*+inn[1] + 2*+inn[2] + 
                           4*+inn[3] + 10*+inn[4] + 3*+inn[5] + 
                           5*+inn[6] + 9*+inn[7] + 4*+inn[8] + 
                           6*+inn[9] + 8*+inn[10]) % 11 % 10;
        return checkDigit1 === +inn[10] && checkDigit2 === +inn[11];
      }
      return false;
    }
  }
};
```

## Лучшие практики компонентной архитектуры

### 1. Структура проекта

```
src/
├── components/
│   ├── UI/                 # Базовые UI компоненты
│   │   ├── Button/
│   │   ├── Input/
│   │   ├── Modal/
│   │   └── ...
│   ├── Business/           # Бизнес-компоненты
│   │   ├── UserCard/
│   │   ├── OrderForm/
│   │   └── ...
│   └── Layout/             # Компоненты макета
│       ├── Header/
│       ├── Sidebar/
│       └── ...
├── hooks/                  # Пользовательские хуки
├── services/               # Сервисы и API
└── utils/                  # Утилиты
```

### 2. Именование компонентов

- Используйте PascalCase для имен компонентов
- Называйте компоненты осмысленно, отражающим их функцию
- Добавляйте префиксы для различных типов компонентов (например, `UiButton`, `BusinessUserCard`)

### 3. Пропсы и события

- Ограничивайте количество пропсов для компонента (желательно не более 7-10)
- Используйте TypeScript для строгой типизации пропсов
- Определяйте четкие контракты для событий

```javascript
// Пример компонента с типизацией пропсов
/**
 * Компонент для отображения информации о сотруднике
 * @param {Object} user - Объект сотрудника
 * @param {string} user.id - Идентификатор сотрудника
 * @param {string} user.name - Имя сотрудника
 * @param {string} user.email - Email сотрудника
 * @param {string} user.position - Должность сотрудника
 * @param {Function} onEdit - Функция для редактирования сотрудника
 * @param {Function} onDelete - Функция для удаления сотрудника
 */
function EmployeeCard({ user, onEdit, onDelete }) {
  return (
    <div className="employee-card">
      <h3>{user.name}</h3>
      <p>Должность: {user.position}</p>
      <p>Email: {user.email}</p>
      <div className="actions">
        <button onClick={() => onEdit(user.id)}>Редактировать</button>
        <button onClick={() => onDelete(user.id)}>Удалить</button>
      </div>
    </div>
  );
}
```

## Компонентная архитектура в российском контексте 2025 года

### Соответствие требованиям законодательства

```javascript
// Компонент для работы с персональными данными с учетом 152-ФЗ
class PersonalDataForm extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      consentGiven: false,
      personalData: {}
    };
  }

  handleConsentChange = (e) => {
    this.setState({ consentGiven: e.target.checked });
  };

  handleDataChange = (field, value) => {
    this.setState(prevState => ({
      personalData: {
        ...prevState.personalData,
        [field]: value
      }
    }));
  };

  handleSubmit = (e) => {
    e.preventDefault();
    
    if (!this.state.consentGiven) {
      alert('Необходимо дать согласие на обработку персональных данных');
      return;
    }

    // Отправка данных с учетом требований 152-ФЗ
    this.props.onSubmit({
      ...this.state.personalData,
      consentTimestamp: new Date().toISOString(),
      consentIp: this.getClientIp() // Логирование IP для доказательства согласия
    });
  };

  getClientIp = () => {
    // Получение IP-адреса клиента (реализация зависит от серверной архитектуры)
    return '127.0.0.1'; // Заглушка
  };

  render() {
    return (
      <form onSubmit={this.handleSubmit}>
        <div className="form-group">
          <label>Фамилия:</label>
          <input
            type="text"
            onChange={(e) => this.handleDataChange('lastName', e.target.value)}
          />
        </div>
        
        <div className="form-group">
          <label>Имя:</label>
          <input
            type="text"
            onChange={(e) => this.handleDataChange('firstName', e.target.value)}
          />
        </div>
        
        <div className="form-group">
          <label>Отчество:</label>
          <input
            type="text"
            onChange={(e) => this.handleDataChange('middleName', e.target.value)}
          />
        </div>
        
        <div className="consent-section">
          <label>
            <input
              type="checkbox"
              checked={this.state.consentGiven}
              onChange={this.handleConsentChange}
            />
            Я даю согласие на обработку персональных данных в соответствии с ФЗ-152
          </label>
        </div>
        
        <button type="submit" disabled={!this.state.consentGiven}>
          Отправить
        </button>
      </form>
    );
  }
}
```

### Локализация и интернационализация

```javascript
// Компонент с поддержкой русской локализации
class RussianLocalizationProvider extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      locale: 'ru-RU',
      messages: {
        ru: {
          save: 'Сохранить',
          cancel: 'Отмена',
          delete: 'Удалить',
          edit: 'Редактировать',
          required: 'Обязательное поле',
          invalidEmail: 'Неверный формат email'
        }
      }
    };
  }

  render() {
    return (
      <LocalizationContext.Provider value={{
        t: (key) => this.state.messages.ru[key] || key,
        locale: this.state.locale
      }}>
        {this.props.children}
      </LocalizationContext.Provider>
    );
  }
}
```

## Заключение

Компонентная архитектура в JavaScript позволяет создавать масштабируемые, поддерживаемые и переиспользуемые приложения. В условиях российского рынка 2025 года, важно учитывать требования локализации, безопасности и соответствия законодательству при проектировании компонентов.

> [!tip] Совет
> Начинайте с простых компонентов и постепенно усложняйте архитектуру по мере роста приложения. Используйте систему компонентов для обеспечения консистентности интерфейса.

См. также: [[Паттерны-проектирования]], [[MVC-и-MVVM]], [[Архитектура-приложений]], [[Модульность]]