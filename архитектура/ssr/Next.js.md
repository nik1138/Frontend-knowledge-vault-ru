---
aliases: [NextJS, Next.js Framework]
tags: [programming, framework, react, ssr, web-development, nextjs]
---

# Next.js - фреймворк для серверного рендеринга

## Общая информация

Next.js - это популярный фреймворк для React, разработанный Vercel, который предоставляет встроенную поддержку серверного рендеринга (SSR), статической генерации (SSG) и клиентского рендеринга (CSR). В 2025 году Next.js остается одним из ведущих решений для создания современных веб-приложений с поддержкой SSR.

## Архитектурные особенности

### App Router (новый подход)
С версии 13+ Next.js использует App Router, который предоставляет более гибкую систему маршрутизации:

```
app/
├── layout.js
├── page.js
├── route.js
└── components/
```

- Улучшенная поддержка SSR и SSG
- Встроенная система кэширования
- Лучшая изоляция данных

### Pages Router (классический подход)
```
pages/
├── index.js
├── api/
└── _app.js
```

## Типы рендеринга в Next.js

### Server-Side Rendering (SSR)
```javascript
export async function getServerSideProps(context) {
  const { params, req, res, query } = context;
  
  // Получение данных на сервере
  const data = await fetchData();
  
  return {
    props: {
      data,
    },
  };
}
```

- Каждый запрос вызывает выполнение серверного кода
- Идеально подходит для динамического контента
- Подходит для SEO критичных страниц

### Static Site Generation (SSG)
```javascript
export async function getStaticProps(context) {
  // Данные извлекаются во время сборки
  const data = await buildTimeDataFetch();
  
  return {
    props: {
      data,
    },
    revalidate: 3600, // Пересборка каждые час
  };
}
```

- Страницы генерируются во время сборки
- Высокая производительность
- Подходит для статического контента

### Incremental Static Regeneration (ISR)
```javascript
export async function getStaticProps(context) {
  return {
    props: {
      data,
    },
    revalidate: 60, // Регенерация каждые 60 секунд
  };
}
```

- Комбинация статики и динамики
- Страницы обновляются по мере необходимости
- Баланс между производительностью и актуальностью данных

## Роутинг и навигация

### Файловая система маршрутов
- Автоматическая генерация маршрутов из файловой структуры
- Поддержка динамических маршрутов `[id]`
- Группировка маршрутов с помощью скобок `(admin)`

### Навигация на клиенте
```javascript
import { useRouter } from 'next/router';
import Link from 'next/link';

// Программная навигация
router.push('/dashboard');

// Декларативная навигация
<Link href="/profile">Профиль</Link>
```

## API маршруты

Next.js предоставляет встроенные API маршруты для серверной логики:

```javascript
// pages/api/users.js
export default async function handler(req, res) {
  if (req.method === 'GET') {
    const users = await getUserList();
    res.status(200).json({ users });
  } else if (req.method === 'POST') {
    const user = await createUser(req.body);
    res.status(201).json({ user });
  }
}
```

## Гидрация в Next.js [[Гидрация]]

Next.js автоматически обрабатывает процесс гидрации:

- Клиентский JavaScript активируется после загрузки страницы
- Состояние приложения восстанавливается
- Обработчики событий привязываются к DOM элементам

## Оптимизация производительности [[Оптимизация]]

### Code Splitting
- Автоматическое разделение кода по маршрутам
- Lazy loading компонентов
- Tree shaking неиспользуемого кода

### Image Optimization
```jsx
import Image from 'next/image';

<Image
  src="/example.jpg"
  alt="Пример"
  width={300}
  height={200}
  priority={true}
/>
```

- Автоматическая оптимизация изображений
- Поддержка современных форматов (WebP, AVIF)
- Lazy loading по умолчанию

### Font Optimization
- Автоматическая оптимизация шрифтов
- Предзагрузка критических шрифтов
- Устранение FOUT (Flash of Unstyled Text)

## Российские особенности использования

### CDN и локализация
- Возможность настройки локальных CDN
- Поддержка российских шлюзов для развертывания
- Локализация дат, времени и чисел

### Соответствие требованиям
- Возможность хранения данных в РФ
- Интеграция с российскими системами аутентификации
- Поддержка российских платежных систем

### Альтернативные хостинги
- Поддержка различных провайдеров хостинга
- Возможность самостоятельного хостинга
- Docker контейнеры для локального развертывания

## Миграция с других решений

### С CRA (Create React App)
- Постепенная миграция с помощью Next.js
- Возможность сохранения существующих компонентов
- Постепенное введение SSR функциональности

### С Nuxt.js [[Nuxt.js]]
- Сходная архитектура файловой системы
- Разные экосистемы (React vs Vue)
- Различные подходы к управлению состоянием

## Лучшие практики

### Структура проекта
```
src/
├── app/              # Компоненты и страницы
├── components/       # Переиспользуемые компоненты
├── lib/             # Утилиты и вспомогательные функции
├── styles/          # Глобальные стили
└── types/           # TypeScript типы
```

### Управление состоянием
- React Context для простых случаев
- Zustand или Jotai для сложных состояний
- Redux Toolkit при необходимости

### Тестирование
- Jest и React Testing Library
- Playwright для e2e тестов
- Специфические тесты для SSR компонентов

## Заключение

Next.js в 2025 году остается одним из самых зрелых и функциональных решений для серверного рендеринга в экосистеме React. Его архитектура позволяет гибко комбинировать различные подходы к рендерингу в зависимости от требований конкретного проекта.

Фреймворк активно развивается и адаптируется к современным требованиям, включая российские реалии и ограничения, что делает его отличным выбором для разработки масштабируемых веб-приложений.