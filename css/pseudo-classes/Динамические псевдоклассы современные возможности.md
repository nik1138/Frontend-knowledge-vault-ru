---
aliases: ["Современные псевдоклассы", "Динамические селекторы CSS", "Новые псевдоклассы"]
tags: [css, pseudo-classes, selectors, modern-css, advanced]
---

# Динамические псевдоклассы: современные возможности

## Введение

Современный CSS предоставляет широкий набор динамических псевдоклассов, которые позволяют создавать сложные и интерактивные стили без использования JavaScript. В этом руководстве мы рассмотрим новые и продвинутые псевдоклассы, доступные в современных браузерах.

## Современные псевдоклассы

### :has() - Псевдокласс-предикат

Один из самых ожидаемых псевдоклассов, позволяющий выбирать элементы на основе их потомков:

```css
/* Стилизация заголовка, если за ним следует параграф */
h2:has(+ p) {
  border-bottom: 2px solid #007bff;
  padding-bottom: 5px;
}

/* Стилизация статьи, если она содержит изображение */
article:has(img) {
  background-color: #f8f9fa;
  padding: 15px;
  border-radius: 8px;
}

/* Стилизация ссылки, если она содержит изображение */
a:has(img) {
  display: inline-block;
  border: 2px solid #007bff;
  border-radius: 4px;
  padding: 5px;
}
```

### :is() и :where() - Логические псевдоклассы

Эти псевдоклассы позволяют группировать селекторы и управлять специфичностью:

```css
/* :is() с более высокой специфичностью */
:is(h1, h2, h3) {
  color: #333;
  margin-bottom: 1rem;
}

/* :where() с нулевой специфичностью */
:where(.card, .panel) .title {
  font-size: 1.2em;
  font-weight: bold;
}

/* Использование в сложных селекторах */
article:is(.featured, .highlighted) {
  border: 3px solid gold;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
```

### :not() - Продвинутое использование

Современный CSS позволяет использовать сложные выражения в :not():

```css
/* Стилизация всех элементов, кроме тех, что внутри формы */
body :not(form) {
  margin: 10px;
}

/* Использование нескольких условий */
li:not(:first-child):not(:last-child) {
  border-bottom: 1px solid #eee;
}

/* Совмещение с :is() */
p:not(:is(.intro, .outro)) {
  line-height: 1.6;
}
```

## Псевдоклассы для структурного селекта

### :nth-child() и его вариации

```css
/* Сложные выражения для :nth-child() */
tr:nth-child(odd of .status-active) {
  background-color: #e8f5e8;
}

/* Выбор каждого третьего элемента, начиная с пятого */
.item:nth-child(3n+5) {
  background-color: #f0f8ff;
}

/* Альтернативная раскраска с определенного элемента */
.item:nth-child(n+4):nth-child(-n+10) {
  background-color: #fff3cd;
}
```

### :nth-of-type() и :nth-last-child()

```css
/* Стилизация каждого второго параграфа в статье */
article p:nth-of-type(2n) {
  font-style: italic;
  color: #6c757d;
}

/* Стилизация последних трех элементов списка */
li:nth-last-child(-n+3) {
  font-weight: bold;
}
```

## Псевдоклассы для форм и интерактивности

### :user-valid и :user-invalid

Эти псевдоклассы реагируют на состояние валидации после взаимодействия пользователя:

```css
.input-field:user-valid {
  border-color: #28a745;
  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
}

.input-field:user-invalid {
  border-color: #dc3545;
  box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
}

.input-field:user-invalid ~ .error-message {
  display: block;
}
```

### :placeholder-shown

Стилизация поля ввода, когда отображается placeholder:

```css
.form-input:placeholder-shown {
  color: #6c757d;
}

.form-input:not(:placeholder-shown) {
  color: #495057;
  font-weight: 500;
}

/* Анимация метки при заполнении поля */
.form-group:has(.form-input:not(:placeholder-shown)) .form-label {
  top: -10px;
  left: 10px;
  font-size: 12px;
  background: white;
  padding: 0 5px;
  color: #007bff;
}
```

### :autofill

Стилизация автозаполненных полей:

```css
.form-input:-webkit-autofill,
.form-input:-webkit-autofill:hover,
.form-input:-webkit-autofill:focus,
.form-input:-webkit-autofill:active {
  -webkit-box-shadow: 0 0 0 30px white inset !important;
  -webkit-text-fill-color: #333 !important;
}

.form-input:autofill {
  background-color: #f0f8ff;
  animation: autofill 0.1s ease-in-out;
}

@keyframes autofill {
  from { background-color: transparent; }
  to { background-color: #f0f8ff; }
}
```

## Псевдоклассы для деревьев и вложенности

### :first-child, :last-child и :only-child

```css
/* Стилизация первого элемента в списке */
.item:first-child {
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

/* Стилизация последнего элемента в списке */
.item:last-child {
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
}

/* Стилизация, если элемент единственный */
.item:only-child {
  border-radius: 8px;
}
```

### :only-of-type

```css
/* Если в родительском элементе только один заголовок */
article :only-of-type(h1) {
  margin-top: 0;
}
```

## Псевдоклассы для состояния ссылок

### :visited в современном контексте

```css
/* Современное использование :visited с учетом безопасности */
a:visited {
  color: #551a8b;
}

/* Стилизация внешних ссылок */
a[href^="http"]:not([href*="mysite.com"]):visited {
  color: #6f42c1;
}
```

### :any-link

Стилизация всех ссылок (и visited, и non-visited):

```css
/* Стилизация всех ссылок одинаково */
a:any-link {
  text-decoration: none;
  color: #007bff;
  padding: 5px;
  border-radius: 3px;
  transition: background-color 0.2s;
}

a:any-link:hover {
  background-color: #f8f9fa;
}
```

## Псевдоклассы для интерактивных элементов

### :focus-within

Очень полезный псевдокласс для стилизации контейнера, когда один из его дочерних элементов в фокусе:

```css
.form-group:focus-within {
  border: 2px solid #007bff;
  border-radius: 8px;
  padding: 10px;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

.nav-item:focus-within .sub-menu {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}
```

### :focus-visible

Стилизация элемента в фокусе, когда фокус видим для пользователя (обычно при клавиатурной навигации):

```css
.button:focus-visible {
  outline: 2px solid #007bff;
  outline-offset: 2px;
}

/* Скрытие outline при навигации мышью */
.button:focus:not(:focus-visible) {
  outline: none;
}
```

## Практические примеры

### Интерактивное меню с :has()

```css
/* Показ подменю при наведении на родительский элемент */
.menu-item:has(.sub-menu:hover) > a {
  background-color: #e9ecef;
  color: #007bff;
}

/* Стилизация элементов списка с подсписками */
.menu-item:has(ul) > a::after {
  content: " ▼";
  font-size: 0.8em;
}
```

### Адаптивная таблица с динамическими псевдоклассами

```css
.responsive-table:has(td:nth-child(4):not(:empty)) {
  font-size: 0.9em;
}

.responsive-table tr:has(td:empty) {
  display: none;
}
```

### Карточки с динамической стилизацией

```css
.card:has(input:checked) {
  border: 2px solid #28a745;
  box-shadow: 0 4px 12px rgba(40, 167, 69, 0.2);
}

.card:has(.urgent) {
  border-left: 4px solid #dc3545;
}

.card:has(img) .card-title {
  margin-top: 0;
}
```

## Совместимость и фолбеки

Для обеспечения совместимости с более старыми браузерами:

```css
/* Фолбек для :has() */
.card .title {
  font-weight: normal;
}

@supports selector(:has(*)) {
  /* Современные стили для браузеров, поддерживающих :has() */
  .card:has(img) .title {
    font-weight: bold;
  }
}
```

## Лучшие практики

1. **Тестируйте поддержку**: используйте `@supports` для проверки поддержки псевдоклассов
2. **Предоставляйте фолбеки**: обеспечьте работоспособность в старых браузерах
3. **Избегайте чрезмерной сложности**: сложные псевдоклассы могут ухудшить производительность
4. **Учитывайте доступность**: псевдоклассы должны улучшать UX, а не ухудшать

## Заключение

Современные динамические псевдоклассы предоставляют мощные возможности для создания интерактивных и адаптивных интерфейсов без использования JavaScript. Их правильное использование позволяет создавать более живой и отзывчивый пользовательский опыт.

## Связанные темы

- [[Псевдоклассы и их взаимодействие с анимациями]]
- [[Практические применения сложных комбинаций псевдоклассов]]
- [[CSS Selectors]]
- [[CSS Specificity]]