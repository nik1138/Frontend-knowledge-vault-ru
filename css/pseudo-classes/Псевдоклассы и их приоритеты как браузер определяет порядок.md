---
aliases: ["Приоритеты псевдоклассов", "Порядок псевдоклассов", "Как браузер определяет порядок псевдоклассов"]
tags: [css/pseudo-classes, css/specificity, css/selectors, css-order]
---

# Псевдоклассы и их приоритеты: как браузер определяет порядок

## Введение

Псевдоклассы в CSS позволяют применять стили к элементам в зависимости от различных состояний, таких как наведение курсора, фокус, нажатие и другие. Однако порядок определения псевдоклассов имеет критическое значение для правильного отображения стилей. В этом документе мы подробно рассмотрим, как браузер определяет приоритеты псевдоклассов и какие правила нужно соблюдать.

## Основы псевдоклассов

Псевдоклассы - это ключевые слова, добавляемые к селекторам, которые определяют специальное состояние элементов. Например:

```css
/* Обычное состояние */
a { color: blue; }

/* При наведении курсора */
a:hover { color: red; }

/* При фокусе */
a:focus { outline: 2px solid orange; }

/* После посещения */
a:visited { color: purple; }
```

## Правило LoVe/HAte для ссылок

Для псевдоклассов ссылок существует важное правило запоминания порядка: **LoVe/HAte**:

- **L** - `:link` (непосещенная ссылка)
- **o** - `:visited` (посещенная ссылка)
- **H** - `:hover` (наведение)
- **A** - `:active` (активное состояние при клике)

```css
/* Правильный порядок для ссылок */
a:link { color: blue; }
a:visited { color: purple; }
a:hover { color: red; }
a:active { color: orange; }
```

### Почему важен порядок?

Браузер обрабатывает CSS-правила сверху вниз. Если правила определены в неправильном порядке, более поздние правила могут переопределять более ранние:

```css
/* НЕПРАВИЛЬНЫЙ ПОРЯДОК */
a:hover { color: red; }
a:active { color: orange; }  /* Это правило будет переопределяться */
a:link { color: blue; }      /* Это правило будет переопределяться */
a:visited { color: purple; } /* Это правило будет переопределяться */

/* ПРАВИЛЬНЫЙ ПОРЯДОК */
a:link { color: blue; }
a:visited { color: purple; }
a:hover { color: red; }
a:active { color: orange; }
```

## Специфичность и приоритеты

### Базовая специфичность псевдоклассов

Псевдоклассы имеют одинаковую специфичность - 0,0,1,0 (один идентификатор), что делает их равными по приоритету:

```css
/* Все эти псевдоклассы имеют одинаковую специфичность */
button:hover { background-color: lightblue; }
button:focus { background-color: lightgreen; }
button:active { background-color: lightcoral; }

/* Последнее определение будет применено, если состояния совпадают */
```

### Сочетание с другими селекторами

Специфичность увеличивается при сочетании с другими селекторами:

```css
/* Специфичность: 0,0,1,1 (класс + псевдокласс) */
.button:hover { color: red; }

/* Специфичность: 0,1,0,1 (ID + псевдокласс) */
#submit-button:hover { color: blue; }

/* Специфичность: 0,0,2,1 (2 класса + псевдокласс) */
.primary-button.large:hover { color: green; }

/* ID-селектор переопределит класс-селектор, независимо от порядка */
```

## Практические примеры правильного порядка

### Пример 1: Кнопка с различными состояниями

```css
/* Базовый стиль кнопки */
.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  background-color: #007bff;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
}

/* Правильный порядок псевдоклассов */
.btn:link { color: white; }        /* Для ссылок-кнопок */
.btn:visited { color: white; }     /* Для посещенных ссылок-кнопок */
.btn:hover { 
  background-color: #0056b3; 
  transform: translateY(-2px);
}
.btn:focus { 
  outline: 2px solid #0056b3;
  outline-offset: 2px;
}
.btn:active { 
  background-color: #004085; 
  transform: translateY(0);
}
```

### Пример 2: Инпуты с различными состояниями

```css
/* Базовый стиль инпута */
.form-input {
  padding: 10px;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-size: 16px;
  transition: border-color 0.3s ease;
}

/* Порядок для псевдоклассов состояния формы */
.form-input:focus {
  border-color: #007bff;
  outline: none;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

.form-input:disabled {
  background-color: #f8f9fa;
  opacity: 0.6;
  cursor: not-allowed;
}

.form-input:required {
  border-left: 4px solid #28a745;
}

.form-input:valid {
  border-color: #28a745;
}

.form-input:invalid {
  border-color: #dc3545;
}
```

## Специфические псевдоклассы и их приоритеты

### Динамические псевдоклассы

Динамические псевдоклассы зависят от взаимодействия пользователя:

```css
/* Порядок для динамических псевдоклассов */
.interactive-element {
  /* Состояния элементов */
  &:hover { background-color: #f8f9fa; }
  &:focus { outline: 2px solid #007bff; }
  &:active { background-color: #e9ecef; }
  &:focus-visible { outline: 2px solid #28a745; }
}
```

### Структурные псевдоклассы

Структурные псевдоклассы зависят от положения в DOM:

```css
/* Структурные псевдоклассы */
.list-item:first-child { font-weight: bold; }
.list-item:last-child { border-bottom: none; }
.list-item:nth-child(odd) { background-color: #f8f9fa; }
.list-item:nth-child(even) { background-color: white; }
.list-item:nth-child(3n) { color: #007bff; }
```

### Псевдоклассы состояния формы

```css
/* Порядок псевдоклассов состояния формы */
.form-control {
  &:required { border-left: 3px solid #28a745; }
  &:optional { border-left: 3px solid #6c757d; }
  &:valid { border-color: #28a745; }
  &:invalid { border-color: #dc3545; }
  &:focus:valid { box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25); }
  &:focus:invalid { box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25); }
}
```

## Сложные комбинации псевдоклассов

### Комбинация нескольких псевдоклассов

```css
/* Сложные комбинации псевдоклассов */
.complex-button {
  /* Базовый стиль */
  padding: 12px 24px;
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.3s ease;
}

/* Правильный порядок сложных комбинаций */
.complex-button:enabled:hover { background-color: #0056b3; }
.complex-button:enabled:focus { 
  outline: 2px solid #0056b3;
  outline-offset: 2px;
}
.complex-button:enabled:active { background-color: #004085; }
.complex-button:disabled { 
  background-color: #6c757d;
  cursor: not-allowed;
  opacity: 0.65;
}
```

### Использование :not() с другими псевдоклассами

```css
/* Комбинация :not() с другими псевдоклассами */
.interactive-element:not(:disabled) {
  cursor: pointer;
}

.interactive-element:not(:disabled):hover {
  background-color: #f8f9fa;
}

.interactive-element:not(:disabled):active {
  background-color: #e9ecef;
}
```

## Псевдоклассы и каскад

### Порядок в каскаде

Псевдоклассы подчиняются общим правилам каскада CSS:

```css
/* Порядок имеет значение в каскаде */
.priority-example {
  /* Базовый стиль */
  background-color: blue;
}

.priority-example:hover {
  background-color: red;  /* Переопределяет базовый стиль */
}

.priority-example:focus {
  background-color: green; /* Переопределяет hover, если фокус после */
}

/* Если элемент находится в состоянии :hover и :focus одновременно,
   последнее определение будет применено */
```

### Использование !important

```css
/* Использование !important может изменить приоритет */
.important-example:hover {
  background-color: red !important;
}

.important-example:active {
  background-color: blue; /* Не переопределит hover из-за !important */
}
```

## Практические рекомендации

### 1. Следуйте established порядку

Для стандартных интерактивных элементов используйте порядок: `:link`, `:visited`, `:hover`, `:focus`, `:active` (LVHFA).

### 2. Учитывайте специфичность

При создании сложных селекторов учитывайте специфичность:

```css
/* Более специфичный селектор переопределит менее специфичный */
.button:hover { background-color: red; }
.my-form .button:hover { background-color: blue; } /* Переопределит */
```

### 3. Тестируйте состояния

Обязательно тестируйте все возможные состояния элементов:

```css
/* Проверьте все комбинации состояний */
.test-element:enabled:hover:focus { /* Состояние при наведении и фокусе */
  background-color: purple;
}

.test-element:disabled:hover { /* Наведение на отключенный элемент */
  /* Некоторые браузеры не применяют hover к disabled элементам */
}
```

### 4. Используйте логические группы

Группируйте псевдоклассы по логическим блокам:

```css
/* Группировка псевдоклассов */
.interactive-component {
  /* Состояния формы */
  &:required { border-left: 3px solid #28a745; }
  &:optional { border-left: 3px solid #6c757d; }
  &:valid { border-color: #28a745; }
  &:invalid { border-color: #dc3545; }
  
  /* Динамические состояния */
  &:hover { background-color: #f8f9fa; }
  &:focus { outline: 2px solid #007bff; }
  &:active { background-color: #e9ecef; }
  
  /* Состояния доступности */
  &:focus-visible { outline: 2px solid #28a745; }
  &:disabled { opacity: 0.5; }
}
```

## Совместимость и браузеры

### Поддержка псевдоклассов

Большинство псевдоклассов имеют хорошую поддержку в современных браузерах:

| Псевдокласс | IE | Chrome | Firefox | Safari | Edge |
|-------------|----|--------|---------|--------|------|
| :hover | 7+ | 1+ | 1+ | 1+ | 12+ |
| :focus | 7+ | 1+ | 1+ | 1+ | 12+ |
| :active | 7+ | 1+ | 1+ | 1+ | 12+ |
| :visited | 7+ | 1+ | 1+ | 1+ | 12+ |
| :focus-visible | Нет | 86+ | 67+ | 15.4+ | 86+ |
| :is(), :where() | Нет | 88+ | 78+ | 14+ | 88+ |

## Заключение

Правильное понимание приоритетов псевдоклассов критически важно для создания предсказуемых и надежных интерфейсов. Ключевые моменты:

1. Следуйте established порядку (например, LoVe/HAte для ссылок)
2. Учитывайте специфичность селекторов
3. Понимайте, как псевдоклассы взаимодействуют с каскадом
4. Тестируйте все возможные состояния элементов
5. Используйте логические группы для лучшей читаемости кода

Правильное использование псевдоклассов позволяет создавать интерактивные и доступные веб-интерфейсы.

## См. также

- [[Псевдоклассы и производительность: оптимизация сложных селекторов]]
- [[Псевдоклассы в анимациях: практические примеры]]
- [[Селекторы и специфичность: продвинутые аспекты]]
- [[CSS-селекторы: полный справочник]]
- [[Доступные веб-интерфейсы: принципы и практика]]