---
aliases: [CSS переменные анимация, Анимация с CSS переменными, CSS transition переменные]
tags: [css, анимация, переменные, разработка]
---

# Анимация кастомных свойств CSS

## Введение

Кастомные свойства CSS можно анимировать, что открывает широкие возможности для создания динамических и интерактивных интерфейсов. Однако важно понимать, какие свойства можно анимировать, а какие нет.

## Основы анимации кастомных свойств

Кастомные свойства не анимируются напрямую, но их можно использовать для управления анимируемыми свойствами:

```css
:root {
  --primary-color: #3498db;
  --secondary-color: #e74c3c;
  --transition-duration: 0.3s;
}

.button {
  background-color: var(--primary-color);
  transition: background-color var(--transition-duration) ease;
}

.button:hover {
  --primary-color: var(--secondary-color);
  background-color: var(--primary-color);
}
```

## Анимация с использованием CSS-переходов

```css
:root {
  --bg-color: #f39c12;
  --text-color: #ffffff;
  --border-radius: 4px;
  --padding: 10px;
}

.animated-card {
  background-color: var(--bg-color);
  color: var(--text-color);
  border-radius: var(--border-radius);
  padding: var(--padding);
  transition: 
    background-color 0.3s ease,
    border-radius 0.2s ease;
}

.animated-card:hover {
  --bg-color: #e67e22;
  --border-radius: 8px;
}
```

## Анимация с использованием CSS-анимаций

```css
:root {
  --pulse-color: #3498db;
  --pulse-opacity: 1;
}

@keyframes pulse {
  0% {
    background-color: var(--pulse-color);
    opacity: var(--pulse-opacity);
  }
  50% {
    --pulse-color: #2980b9;
    --pulse-opacity: 0.7;
    background-color: var(--pulse-color);
    opacity: var(--pulse-opacity);
  }
  100% {
    background-color: var(--pulse-color);
    opacity: var(--pulse-opacity);
  }
}

.pulse-element {
  animation: pulse 2s infinite;
}
```

## Анимация числовых значений

Для анимации числовых значений часто используются функции `calc()` и `clamp()`:

```css
:root {
  --scale-start: 1;
  --scale-end: 1.2;
  --current-scale: var(--scale-start);
}

.scaling-element {
  transform: scale(var(--current-scale));
  transition: --current-scale 0.3s ease;
}

.scaling-element:hover {
  --current-scale: var(--scale-end);
}
```

> [!warning] Важно
> Прямая анимация кастомных свойств не работает в большинстве браузеров. Необходимо анимировать производные значения.

## Анимация цветов

Цвета можно анимировать, используя HSL-значения для более плавных переходов:

```css
:root {
  --hue: 200;
  --saturation: 100%;
  --lightness: 50%;
  --alpha: 1;
}

.color-changing {
  background-color: hsla(
    var(--hue),
    var(--saturation),
    var(--lightness),
    var(--alpha)
  );
  transition: 
    --hue 0.5s ease,
    --lightness 0.5s ease;
}

.color-changing:hover {
  --hue: 300;
  --lightness: 70%;
}
```

## Анимация с использованием CSS-переменных в transform

```css
:root {
  --translate-x: 0px;
  --translate-y: 0px;
  --rotate-angle: 0deg;
  --scale-factor: 1;
}

.transform-element {
  transform: translate(
    var(--translate-x),
    var(--translate-y)
  ) 
  rotate(var(--rotate-angle)) 
  scale(var(--scale-factor));
  transition: 
    --translate-x 0.3s ease,
    --translate-y 0.3s ease,
    --rotate-angle 0.5s ease,
    --scale-factor 0.3s ease;
}

.transform-element:hover {
  --translate-x: 100px;
  --translate-y: 50px;
  --rotate-angle: 45deg;
  --scale-factor: 1.2;
}
```

## Использование JavaScript для анимации

Для более сложных анимаций можно использовать JavaScript для изменения кастомных свойств:

```css
:root {
  --progress-value: 0%;
}

.progress-bar {
  width: var(--progress-value);
  transition: width 0.1s linear;
}
```

```javascript
// Анимация прогресса
function animateProgress(element, targetValue) {
  let currentValue = 0;
  const interval = setInterval(() => {
    if (currentValue >= targetValue) {
      clearInterval(interval);
    } else {
      currentValue += 1;
      element.style.setProperty('--progress-value', currentValue + '%');
    }
  }, 10);
}

// Использование
const progressBar = document.querySelector('.progress-bar');
animateProgress(progressBar, 80);
```

## Анимация с использованием Web Animations API

```javascript
const element = document.documentElement;

element.animate(
  [
    { '--primary-color-hue': '200' },
    { '--primary-color-hue': '300' }
  ],
  {
    duration: 1000,
    easing: 'ease-in-out'
  }
);
```

## Практические примеры

### Темная/светлая тема с анимацией

```css
:root {
  --bg-hue: 240;
  --bg-saturation: 10%;
  --bg-lightness: 95%;
  --text-hue: 0;
  --text-saturation: 0%;
  --text-lightness: 10%;
}

.theme-container {
  background-color: hsl(
    var(--bg-hue),
    var(--bg-saturation),
    var(--bg-lightness)
  );
  color: hsl(
    var(--text-hue),
    var(--text-saturation),
    var(--text-lightness)
  );
  transition: 
    --bg-hue 0.5s ease,
    --bg-lightness 0.5s ease,
    --text-lightness 0.5s ease;
}

.theme-container.dark-theme {
  --bg-hue: 240;
  --bg-saturation: 10%;
  --bg-lightness: 10%;
  --text-hue: 0;
  --text-saturation: 0%;
  --text-lightness: 90%;
}
```

### Адаптивная анимация

```css
:root {
  --animation-speed: 0.5s;
  --animation-easing: ease;
}

@media (prefers-reduced-motion: reduce) {
  :root {
    --animation-speed: 0.01s;
    --animation-easing: step-end;
  }
}

.responsive-animation {
  transition: all var(--animation-speed) var(--animation-easing);
}
```

## Оптимизация производительности

- Используйте `will-change` для свойств, которые будут анимироваться
- Избегайте анимации свойств, вызывающих перерисовку (layout, paint)
- Предпочитайте анимацию свойств `transform` и `opacity`

## Связанные темы

- [[Определение-кастомных-свойств]]
- [[Использование-в-функциях]]
- [[Наследование-свойств]]
- [[Приватные-свойства]]