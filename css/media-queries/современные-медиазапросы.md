---
aliases: ["Современные медиазапросы", "Контейнерные медиазапросы", "Медиазапросы по плотности пикселей", "Пользовательские предпочтения в медиазапросах"]
tags: ["css", "media-queries", "responsive-design", "container-queries", "user-preferences"]
---

# Современные медиазапросы: основанные на контейнере, плотности пикселей, предпочтениях пользователя

Современные медиазапросы в CSS значительно расширили возможности адаптивного дизайна, выходя за рамки традиционных запросов по ширине экрана. Рассмотрим три ключевых направления развития медиазапросов: контейнерные медиазапросы, медиазапросы по плотности пикселей и учет пользовательских предпочтений.

## Контейнерные медиазапросы (Container Queries)

Контейнерные медиазапросы позволяют применять стили на основе размеров родительского элемента, а не всего окна браузера. Это революционное изменение в подходе к адаптивному дизайну, позволяющее создавать по-настоящему модульные компоненты.

### Синтаксис контейнерных медиазапросов

```css
/* Установка элемента как контейнера */
.card {
  container-type: inline-size;
  container-name: card-container;
}

/* Использование контейнерного медиазапроса */
@container card-container (min-width: 400px) {
  .card-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
  }
}

/* Альтернативный синтаксис без именования */
@container (min-width: 300px) {
  .card-title {
    font-size: 1.2rem;
  }
}
```

Контейнерные медиазапросы особенно полезны при создании:
- Карточек товаров, которые должны адаптироваться к доступному пространству
- Компонентов, которые могут использоваться в разных контекстах
- Систем компонентов, где элементы должны быть независимыми

## Медиазапросы по плотности пикселей

Плотность пикселей (device pixel ratio) важна при создании адаптивных изображений и элементов интерфейса. Медиазапросы по плотности позволяют оптимизировать отображение для устройств с разным DPI.

### Основные медиазапросы по плотности

```css
/* Стандартное разрешение */
@media (-webkit-min-device-pixel-ratio: 1),
       (min-resolution: 96dpi) {
  .icon {
    background-image: url('icon-1x.png');
  }
}

/* Ретина-дисплеи (2x) */
@media (-webkit-min-device-pixel-ratio: 2),
       (min-resolution: 192dpi) {
  .icon {
    background-image: url('icon-2x.png');
  }
}

/* Ультра-ретина (3x) */
@media (-webkit-min-device-pixel-ratio: 3),
       (min-resolution: 288dpi) {
  .icon {
    background-image: url('icon-3x.png');
  }
}
```

## Учет пользовательских предпочтений

CSS предоставляет медиазапросы для учета пользовательских предпочтений, что улучшает доступность и пользовательский опыт.

### prefers-reduced-motion

```css
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

### prefers-color-scheme

```css
@media (prefers-color-scheme: dark) {
  body {
    background-color: #1a1a1a;
    color: #ffffff;
  }
}

@media (prefers-color-scheme: light) {
  body {
    background-color: #ffffff;
    color: #000000;
  }
}
```

### prefers-contrast

```css
@media (prefers-contrast: high) {
  body {
    color: #000000;
    background-color: #ffffff;
  }
  
  .text {
    border-bottom: 2px solid #000000;
  }
}
```

### prefers-reduced-data

```css
@media (prefers-reduced-data: reduce) {
  .bg-image {
    background-image: none;
  }
  
  img[data-src] {
    content: attr(data-src-low);
  }
}
```

## Практические рекомендации

1. Используйте контейнерные медиазапросы для создания модульных компонентов
2. Всегда учитывайте предпочтения пользователя для улучшения доступности
3. Оптимизируйте изображения и анимации для разных плотностей пикселей
4. Тестируйте на реальных устройствах с разными характеристиками

> [!tip] Совет
> Контейнерные медиазапросы особенно эффективны при создании библиотек компонентов, где компоненты должны адаптироваться к разным контекстам использования.

> [!warning] Важно
> Не забывайте устанавливать `container-type` перед использованием `@container` медиазапросов, иначе они не будут работать.

[[Адаптивный дизайн: стратегии и брейкпоинты]]
[[Медиазапросы и производительность]]
[[CSS-медиазапросы]]