---
aliases: ["Фокус и доступность", "Управление фокусом CSS"]
tags: 
  - #css/accessibility
  - #css/interactivity
  - #web-accessibility
  - #keyboard-navigation
---

# Управление фокусом в CSS: руководство по доступности

## Введение

Управление фокусом - это ключевой аспект доступности веб-приложений. Правильная реализация фокуса позволяет пользователям с ограниченными возможностями, особенно тем, кто использует клавиатуру или вспомогательные технологии, эффективно взаимодействовать с интерфейсом.

> [!info] Важность фокуса
> Пользователи, которые не используют мышь, полагаются на визуальные индикаторы фокуса для понимания текущего состояния интерфейса. Без надлежащего управления фокусом веб-сайт становится недоступным для значительной части пользователей.

Связанные темы: [[css/interactivity]], [[web-accessibility-fundamentals]]

## Основы фокуса

### Что такое фокус?

Фокус - это состояние элемента, которое указывает, что элемент готов принимать ввод. Только один элемент может быть в фокусе в любой момент времени. Элементы, которые могут получить фокус, включают:

- Интерактивные элементы: `<a>`, `<button>`, `<input>`, `<select>`, `<textarea>`
- Элементы с атрибутом `tabindex`
- Элементы с определенными ARIA-ролями

### Стандартные индикаторы фокуса

Браузеры по умолчанию отображают индикатор фокуса (обычно в виде пунктирной или сплошной рамки) на активных элементах. Эти индикаторы критически важны для доступности.

## CSS псевдоклассы фокуса

### `:focus`

Псевдокласс `:focus` применяется к элементу, который в данный момент находится в фокусе.

```css
.button:focus {
  outline: 2px solid #005fcc;
  background-color: #e6f0ff;
}
```

### `:focus-within`

Псевдокласс `:focus-within` применяется к элементу, который либо сам находится в фокусе, либо содержит дочерний элемент в фокусе.

```css
.form-container:focus-within {
  border: 2px solid #007cba;
  box-shadow: 0 0 0 3px rgba(0, 124, 186, 0.3);
}
```

Это особенно полезно для групп элементов формы, где нужно визуально выделить всю группу при фокусе на любом из дочерних элементов.

### `:focus-visible`

Псевдокласс `:focus-visible` позволяет отображать стили фокуса только тогда, когда браузер считает, что индикатор фокуса должен быть видимым. Обычно это происходит при навигации с клавиатуры, но не при клике мышью.

```css
.interactive-element:focus-visible {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}
```

> [!tip] Совместимость
> Псевдокласс `:focus-visible` поддерживается большинством современных браузеров. Для обеспечения совместимости рекомендуется использовать полифилл или резервные стили.

## Стили фокуса

### Рекомендуемые стили фокуса

Хороший индикатор фокуса должен быть:

1. **Видимым** - легко различимым на любом фоне
2. **Достаточно крупным** - минимум 2 пикселя толщиной
3. **Контрастным** - с достаточным соотношением контрастности (3:1 или выше)
4. **Последовательным** - одинаковым для всех интерактивных элементов

```css
/* Хороший пример стиля фокуса */
.focus-indicator {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
  border-radius: 4px;
}
```

### Избегайте `outline: none`

Полностью убирать стандартный индикатор фокуса с помощью `outline: none` без замены его на альтернативный стиль - плохая практика доступности.

```css
/* ПЛОХО */
.button:focus {
  outline: none;
}

/* ХОРОШО */
.button:focus {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
  /* или альтернативный стиль */
  box-shadow: 0 0 0 3px rgba(0, 95, 204, 0.3);
}
```

## Практические примеры

### Пример 1: Кнопка с улучшенным фокусом

```css
.accessible-button {
  padding: 10px 16px;
  border: 2px solid transparent;
  border-radius: 4px;
  background-color: #007cba;
  color: white;
  cursor: pointer;
  font-size: 16px;
}

.accessible-button:focus {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}

.accessible-button:focus:not(:focus-visible) {
  outline: none;
}

.accessible-button:focus-visible {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}
```

### Пример 2: Карточка с интерактивным содержимым

```css
.card {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 16px;
  transition: border-color 0.2s, box-shadow 0.2s;
}

.card:focus-within {
  border-color: #007cba;
  box-shadow: 0 4px 8px rgba(0, 124, 186, 0.2);
}

.card h3 {
  margin-top: 0;
}

.card button,
.card a {
  margin-right: 8px;
}
```

## Клавиатурная навигация

### Порядок фокуса

Порядок перемещения фокуса должен быть логичным и последовательным. По умолчанию фокус перемещается в порядке исходного кода HTML. Изменение этого порядка с помощью `tabindex` должно выполняться с осторожностью.

### Пропуск навигации

Для улучшения клавиатурной навигации можно реализовать "пропуск ссылок" (skip links) - скрытые ссылки, которые становятся видимыми при фокусе и позволяют быстро перейти к основному содержимому.

```css
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #000000;
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
}

.skip-link:focus {
  top: 6px;
}
```

## Лучшие практики

1. **Не убирайте индикаторы фокуса** без замены их на эквивалентные стили
2. **Используйте `:focus-visible`** для более точного контроля над отображением индикаторов
3. **Обеспечьте видимый фокус** для всех интерактивных элементов
4. **Тестируйте с клавиатуры** - попробуйте использовать интерфейс только с клавиатуры
5. **Сохраняйте логический порядок фокуса** - следуйте структуре документа
6. **Обеспечьте контрастность** индикаторов фокуса

## Распространенные ошибки

- Удаление всех стилей фокуса с помощью `outline: none`
- Создание индикаторов фокуса, которые плохо видны на определенных фонах
- Использование нестандартного порядка фокуса без веских оснований
- Отсутствие видимого индикатора фокуса для некоторых элементов

## Связь с другими файлами

- [[css/interactivity]] - более подробно о псевдоклассах и интерактивности
- [[web-accessibility-fundamentals]] - основы веб-доступности
- [[keyboard-navigation-patterns]] - шаблоны клавиатурной навигации
- [[aria-roles-and-states]] - ARIA роли и состояния для доступности