---
aliases: ["Псевдоселекторы CSS", "Расширенное руководство по псевдоселекторам", "Современные псевдоселекторы"]
tags: [css/selectors, css-pseudo-selectors, advanced-css, modern-css]
---

# Псевдоселекторы: углубленное руководство

## Введение

Псевдоселекторы в CSS позволяют применять стили к элементам на основе их состояния, позиции в документе или других характеристик без изменения HTML-разметки. В этом документе мы подробно рассмотрим все типы псевдоселекторов, их возможности и практическое применение.

## Классификация псевдоселекторов

### Динамические псевдоселекторы

Динамические псевдоселекторы зависят от взаимодействия пользователя с элементом:

#### :hover
Применяется при наведении курсора на элемент:

```css
/* Базовое использование */
.button:hover {
  background-color: #0056b3;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
}

/* Сложные комбинации */
.card:hover .card-image {
  transform: scale(1.05);
}

.card:hover .card-content {
  background-color: #f8f9fa;
}
```

#### :active
Применяется при активном состоянии элемента (обычно при нажатии):

```css
/* Активное состояние кнопки */
.button:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(0, 123, 255, 0.3);
  background-color: #004085;
}

/* Активное состояние ссылки */
.link:active {
  color: #666;
}
```

#### :focus
Применяется при фокусе на элементе:

```css
/* Стили фокуса для интерактивных элементов */
.input:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

/* Стили фокуса для кнопок */
.button:focus {
  outline: 2px solid #007bff;
  outline-offset: 2px;
}
```

#### :focus-within
Применяется, когда любой дочерний элемент находится в фокусе:

```css
/* Контейнер с фокусированным дочерним элементом */
.form-group:focus-within {
  background-color: #f8f9fa;
  border-radius: 4px;
  padding: 1rem;
}

/* Стили для формы при фокусе на любом поле */
.form-container:focus-within {
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}
```

#### :focus-visible
Применяется при фокусе, видимом для пользователей (обычно при навигации с клавиатуры):

```css
/* Улучшенная доступность */
.interactive-element:focus {
  outline: none; /* Убираем стандартный outline */
}

.interactive-element:focus-visible {
  outline: 2px solid #007bff;
  outline-offset: 2px;
}
```

### Структурные псевдоселекторы

Структурные псевдоселекторы выбирают элементы на основе их позиции в DOM:

#### :first-child, :last-child
Выбирают первый и последний дочерние элементы:

```css
/* Первый элемент списка */
.list-item:first-child {
  border-top-left-radius: 8px;
  border-top-right-radius: 8px;
}

/* Последний элемент списка */
.list-item:last-child {
  border-bottom-left-radius: 8px;
  border-bottom-right-radius: 8px;
  border-bottom: none;
}

/* Пример с таблицами */
tr:first-child td {
  font-weight: bold;
  background-color: #f8f9fa;
}
```

#### :nth-child()
Выбирает элементы на основе их позиции с использованием формулы an+b:

```css
/* Каждый четный элемент */
.list-item:nth-child(even) {
  background-color: #f8f9fa;
}

/* Каждый нечетный элемент */
.list-item:nth-child(odd) {
  background-color: white;
}

/* Первые 3 элемента */
.item:nth-child(-n+3) {
  font-weight: bold;
}

/* Последние 3 элемента */
.item:nth-last-child(-n+3) {
  color: #007bff;
}

/* Каждый третий элемент, начиная с первого */
.item:nth-child(3n+1) {
  background-color: #e9ecef;
}
```

#### :nth-of-type()
Выбирает элементы определенного типа на основе их позиции:

```css
/* Каждый первый p в родительском элементе */
p:nth-of-type(1) {
  font-weight: bold;
  font-size: 1.2em;
}

/* Каждый второй div */
div:nth-of-type(2n) {
  margin-top: 2rem;
}
```

#### :only-child, :only-of-type
Выбирают элементы, которые являются единственными дочерними элементами:

```css
/* Единственный дочерний элемент */
.container:only-child {
  margin: 2rem auto;
}

/* Единственный элемент своего типа */
p:only-of-type {
  text-align: center;
}
```

### Псевдоселекторы состояния формы

#### :required, :optional
Выбирают обязательные и необязательные поля формы:

```css
/* Обязательные поля */
.form-input:required {
  border-left: 4px solid #28a745;
}

/* Необязательные поля */
.form-input:optional {
  border-left: 4px solid #6c757d;
}
```

#### :valid, :invalid
Выбирают валидные и невалидные поля формы:

```css
/* Валидные поля */
.form-input:valid {
  border-color: #28a745;
  box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
}

/* Невалидные поля */
.form-input:invalid:not(:placeholder-shown) {
  border-color: #dc3545;
  box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
}
```

#### :enabled, :disabled
Выбирают включенные и выключенные элементы:

```css
/* Включенные элементы */
.button:enabled {
  cursor: pointer;
  opacity: 1;
}

/* Выключенные элементы */
.button:disabled {
  cursor: not-allowed;
  opacity: 0.65;
  background-color: #6c757d;
}
```

#### :checked
Выбирает отмеченные переключатели и флажки:

```css
/* Отмеченные радиокнопки и чекбоксы */
.checkbox:checked + .label {
  font-weight: bold;
  color: #007bff;
}

.radio:checked {
  background-color: #007bff;
}
```

### Псевдоселекторы языка и дерева

#### :lang()
Выбирает элементы на основе языка:

```css
/* Контент на английском */
p:lang(en) {
  quotes: """" "";
}

/* Контент на русском */
p:lang(ru) {
  font-family: "PT Sans", sans-serif;
}
```

#### :dir()
Выбирает элементы на основе направления текста:

```css
/* Текст слева направо */
.content:dir(ltr) {
  text-align: left;
}

/* Текст справа налево */
.content:dir(rtl) {
  text-align: right;
}
```

## Современные псевдоселекторы

### :is() и :where()
Функциональные псевдоселекторы для группировки селекторов:

```css
/* :is() - увеличивает специфичность */
.card:is(:hover, :focus, :active) {
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

/* :where() - не увеличивает специфичность */
.card:where(:hover, :focus, :active) {
  transform: translateY(-5px);
}

/* Сравнение с традиционным подходом */
.card:hover,
.card:focus,
.card:active {
  /* Требует повторения всего селектора */
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}
```

### :not()
Исключает элементы, соответствующие селектору:

```css
/* Все элементы, кроме .featured */
.item:not(.featured) {
  opacity: 0.7;
}

/* Комбинации */
.card:not(.featured):hover {
  transform: scale(1.05);
}

/* Современные возможности */
.text:not(:first-child, :last-child) {
  margin: 0 1rem;
}
```

### :has()
Выбирает элементы, содержащие другие элементы (новый, экспериментальный):

```css
/* Контейнер, содержащий активный элемент */
.container:has(> .active) {
  border: 2px solid #007bff;
}

/* Заголовок перед активным разделом */
h2:has(+ .active-section) {
  color: #007bff;
  text-shadow: 0 0 8px rgba(0, 123, 255, 0.5);
}

/* Форма с ошибками */
.form:has(.error) {
  background-color: #fff5f5;
}
```

## Практические примеры использования

### Пример 1: Адаптивная сетка карточек

```html
<div class="card-grid">
  <div class="card">Карточка 1</div>
  <div class="card">Карточка 2</div>
  <div class="card featured">Особая карточка</div>
  <div class="card">Карточка 4</div>
</div>
```

```css
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  padding: 1.5rem;
}

.card {
  padding: 1.5rem;
  background-color: white;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

/* Каждый четный элемент */
.card:nth-child(even) {
  background-color: #f8f9fa;
}

/* Особая карточка */
.card.featured {
  border: 2px solid #007bff;
}

/* Неособые карточки при наведении */
.card:not(.featured):hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

/* Особая карточка при наведении */
.card.featured:hover {
  transform: scale(1.05);
}

/* Первая карточка */
.card:first-child {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
}

/* Последняя карточка */
.card:last-child {
  background: linear-gradient(135deg, #f093fb, #f5576c);
  color: white;
}
```

### Пример 2: Интеллектуальная форма

```html
<form class="smart-form">
  <input type="text" class="form-input" required>
  <input type="email" class="form-input" required>
  <input type="password" class="form-input" required>
  <button type="submit" class="submit-btn">Отправить</button>
</form>
```

```css
.smart-form {
  max-width: 400px;
  margin: 2rem auto;
  padding: 2rem;
  border-radius: 8px;
  background-color: #f8f9fa;
}

.form-input {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: 2px solid #ddd;
  border-radius: 4px;
  font-size: 1rem;
  transition: all 0.3s ease;
}

/* Обязательные поля */
.form-input:required {
  border-left: 4px solid #28a745;
}

/* Валидные поля */
.form-input:valid {
  border-color: #28a745;
  background-color: #f8fff9;
}

/* Невалидные поля */
.form-input:invalid:not(:placeholder-shown) {
  border-color: #dc3545;
  background-color: #fff5f5;
}

/* Поля в фокусе */
.form-input:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
}

/* Последнее поле формы */
.form-input:last-child {
  margin-bottom: 1.5rem;
}

/* Форма с валидными полями */
.smart-form:has(.form-input:valid) {
  background-color: #f0fff4;
}

/* Форма с невалидными полями */
.smart-form:has(.form-input:invalid:not(:placeholder-shown)) {
  background-color: #fff5f5;
}
```

### Пример 3: Интерактивная навигация

```html
<nav class="interactive-nav">
  <a href="#" class="nav-link">Главная</a>
  <a href="#" class="nav-link active">О нас</a>
  <a href="#" class="nav-link">Услуги</a>
  <a href="#" class="nav-link">Контакты</a>
</nav>
```

```css
.interactive-nav {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  background-color: #f8f9fa;
  border-radius: 8px;
}

.nav-link {
  padding: 0.75rem 1.5rem;
  text-decoration: none;
  color: #333;
  border-radius: 4px;
  transition: all 0.3s ease;
}

/* Все ссылки, кроме активной */
.nav-link:not(.active) {
  color: #007bff;
}

/* Активная ссылка */
.nav-link.active {
  background-color: #007bff;
  color: white;
}

/* Ссылки при наведении */
.nav-link:hover:not(.active) {
  background-color: #e9ecef;
  transform: translateY(-2px);
}

/* Первая ссылка */
.nav-link:first-child {
  margin-left: 0;
}

/* Последняя ссылка */
.nav-link:last-child {
  margin-right: 0;
}

/* Каждая вторая ссылка */
.nav-link:nth-child(2n) {
  background-color: rgba(0, 123, 255, 0.1);
}
```

## Производительность и оптимизация

### Эффективные комбинации псевдоселекторов

```css
/* Быстрый селектор */
.item:hover { background-color: red; }

/* Медленный селектор */
.item:nth-child(3n+1):not(.special):hover:focus { 
  background-color: red; 
}

/* Оптимизированный подход */
.item.complex:nth-child(odd) { /* стили для позиции */ }
.item:hover { /* стили для hover */ }
.item.focused { /* стили для фокуса - управляется JS */ }
```

### Использование :is() для оптимизации

```css
/* Вместо повторения сложных селекторов */
.card:hover,
.card:focus,
.card:active {
  transform: scale(1.05);
}

/* Используем :is() */
.card:is(:hover, :focus, :active) {
  transform: scale(1.05);
}
```

## Совместимость и полифиллы

### Поддержка псевдоселекторов

| Псевдоселектор | IE | Chrome | Firefox | Safari | Edge |
|----------------|----|--------|---------|--------|------|
| :hover | 7+ | 1+ | 1+ | 1+ | 12+ |
| :focus | 7+ | 1+ | 1+ | 1+ | 12+ |
| :active | 7+ | 1+ | 1+ | 1+ | 12+ |
| :nth-child() | 9+ | 4+ | 3.5+ | 3.1+ | 12+ |
| :not() | 9+ | 1+ | 1+ | 3.1+ | 12+ |
| :is(), :where() | Нет | 88+ | 78+ | 15.4+ | 88+ |
| :has() | Нет | 105+ | 121+ | 15.4+ | 105+ |

### Резервные решения

```css
/* Резервное решение для :has() */
@supports not selector(:has(*)) {
  .form.faulty { /* Резервный класс, добавляемый через JS */
    background-color: #fff5f5;
  }
}

/* Резервное решение для :is() */
@supports not selector(:is(*)) {
  .card:hover,
  .card:focus,
  .card:active {
    transform: scale(1.05);
  }
}
```

## Заключение

Псевдоселекторы предоставляют мощные возможности для стилизации элементов на основе их состояния, позиции и других характеристик. Ключевые моменты:

1. Динамические псевдоселекторы реагируют на взаимодействие пользователя
2. Структурные псевдоселекторы выбирают элементы по их позиции в DOM
3. Псевдоселекторы формы помогают в создании интерактивных форм
4. Современные псевдоселекторы (:is(), :where(), :has()) упрощают написание кода
5. Важно учитывать производительность при сложных комбинациях
6. Необходимо обеспечивать совместимость с разными браузерами

Правильное использование псевдоселекторов позволяет создавать интерактивные и адаптивные интерфейсы без изменения HTML-разметки.

## См. также

- [[Селекторы и специфичность: продвинутые аспекты]]
- [[Современные селекторы: :has(), :is(), :where(), :not()]]
- [[Псевдоклассы и их приоритеты: как браузер определяет порядок]]
- [[CSS-селекторы: полный справочник]]
- [[Оптимизация селекторов для лучшей производительности]]