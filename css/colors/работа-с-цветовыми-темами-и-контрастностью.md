---
aliases: ["Цветовые темы CSS", "Контрастность цветов", "Адаптивные темы"]
tags: ["css", "colors", "themes", "contrast", "accessibility", "dark-mode"]
---

# Работа с цветовыми темами и контрастностью

## Введение

Работа с цветовыми темами и контрастностью - важная часть современной веб-разработки. Это не только улучшает визуальное восприятие интерфейса, но и обеспечивает доступность для пользователей с различными потребностями, включая людей с нарушениями зрения.

## Определение цветовых тем

### Использование CSS-переменных

CSS-переменные позволяют легко управлять цветовыми темами, определяя цвета в одном месте и используя их по всему проекту:

```css
/* Светлая тема по умолчанию */
:root {
  --bg-primary: #ffffff;
  --bg-secondary: #f5f5f5;
  --text-primary: #212121;
  --text-secondary: #757575;
  --border-color: #e0e0e0;
  --accent-color: #1976d2;
  --success-color: #4caf50;
  --warning-color: #ff9800;
  --error-color: #f44336;
}

/* Темная тема */
[data-theme='dark'] {
  --bg-primary: #121212;
  --bg-secondary: #1e1e1e;
  --text-primary: #e0e0e0;
  --text-secondary: #a0a0a0;
  --border-color: #424242;
  --accent-color: #5e9bf6;
  --success-color: #80c883;
  --warning-color: #ffb74d;
  --error-color: #ef6e6e;
}
```

### Использование media query для автоматического определения темы

```css
/* Автоматическое определение системной темы */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-primary: #121212;
    --bg-secondary: #1e1e1e;
    --text-primary: #e0e0e0;
    --text-secondary: #a0a0a0;
    --border-color: #424242;
    --accent-color: #5e9bf6;
  }
}
```

## Создание адаптивных тем

### Светлая и темная темы

```css
/* Определение базовых переменных */
:root {
  /* Нейтральные цвета в OKLAB для лучшей перцептуальной равномерности */
  --neutral-100: oklab(0.95 0 0); /* Очень светлый */
  --neutral-200: oklab(0.85 0 0); /* Светлый */
  --neutral-300: oklab(0.75 0 0); /* Средне-светлый */
  --neutral-700: oklab(0.35 0 0); /* Средне-темный */
  --neutral-800: oklab(0.2 0 0); /* Темный */
  --neutral-900: oklab(0.1 0 0); /* Очень темный */
  
  /* Акцентные цвета */
  --accent-primary: oklch(0.7 0.15 240);
  --accent-primary-light: oklch(0.85 0.12 240);
  --accent-primary-dark: oklch(0.5 0.18 240);
}

/* Светлая тема */
.light-theme {
  --bg-surface: var(--neutral-100);
  --bg-elevation: var(--neutral-200);
  --text-primary: var(--neutral-900);
  --text-secondary: var(--neutral-700);
  --border: var(--neutral-300);
  --accent: var(--accent-primary);
}

/* Темная тема */
.dark-theme {
  --bg-surface: var(--neutral-900);
  --bg-elevation: var(--neutral-800);
  --text-primary: var(--neutral-100);
  --text-secondary: var(--neutral-300);
  --border: var(--neutral-700);
  --accent: var(--accent-primary-light);
}
```

### Темы для пользователей с особыми потребностями

```css
/* Высокая контрастность */
@media (prefers-contrast: high) {
  :root {
    --text-primary: oklab(0 0 0); /* Черный */
    --bg-surface: oklab(1 0 0); /* Белый */
    --border: oklab(0 0 0); /* Черная граница */
    --accent: oklch(0.3 0.2 0); /* Темно-красный акцент */
  }
}

/* Пониженная насыщенность */
@media (prefers-reduced-data) {
  :root {
    --bg-surface: oklab(0.95 0 0);
    --text-primary: oklab(0.2 0 0);
    --accent: oklch(0.6 0.05 240); /* Менее насыщенный синий */
  }
}
```

## Управление контрастностью

### Минимальные требования к контрастности

Для обеспечения доступности текста должны соблюдаться минимальные требования к контрастности:

- **Нормальный текст**: соотношение 4.5:1 к фону
- **Крупный текст** (18pt или 14pt при жирном начертании): соотношение 3:1 к фону

```css
.accessible-text {
  /* Проверка контрастности с использованием современных цветовых пространств */
  color: oklab(0.2 0 0); /* Темный текст */
  background-color: oklab(0.95 0 0); /* Светлый фон */
  /* Соотношение контрастности: примерно 13:1 */
}

.low-contrast-warning {
  /* Избегайте таких комбинаций */
  color: oklab(0.5 0 0); /* Средний серый */
  background-color: oklab(0.7 0 0); /* Светлый серый */
  /* Это не соответствует требованиям WCAG */
}
```

### Динамическое изменение контрастности

```css
.dynamic-contrast {
  /* Использование color-mix для адаптации контраста */
  color: color-mix(
    in oklab,
    var(--primary-text) 100%,
    black calc(var(--contrast-level, 1) * 20%)
  );
  
  background-color: color-mix(
    in oklab,
    var(--primary-bg) 100%,
    white calc(var(--contrast-level, 1) * 10%)
  );
}
```

### Контроль контрастности в разных темах

```css
.theme-contrast-control {
  /* В светлой теме */
  --text-on-light: oklab(0.15 0 0);
  --bg-on-light: oklab(0.98 0 0);
  
  /* В темной теме */
  --text-on-dark: oklab(0.95 0 0);
  --bg-on-dark: oklab(0.05 0 0);
  
  /* Выбор цветов в зависимости от темы */
  color: var(--text-on-light);
  background-color: var(--bg-on-light);
}

[data-theme="dark"] .theme-contrast-control {
  color: var(--text-on-dark);
  background-color: var(--bg-on-dark);
}
```

## Практические примеры тем

### Тема с автоматическим переключением

```css
/* Базовая светлая тема */
:root {
  --color-surface: oklab(0.98 0 0);
  --color-on-surface: oklab(0.15 0 0);
  --color-primary: oklch(0.65 0.12 240);
  --color-primary-container: oklch(0.9 0.04 240);
  --color-on-primary-container: oklab(0.2 0 0);
  --color-surface-variant: oklab(0.9 0.01 0.02);
  --color-on-surface-variant: oklab(0.3 0 0.05);
  --color-outline: oklab(0.6 0 -0.05);
}

/* Темная тема */
@media (prefers-color-scheme: dark) {
  :root {
    --color-surface: oklab(0.15 0 0);
    --color-on-surface: oklab(0.9 0 0);
    --color-primary: oklch(0.8 0.08 240);
    --color-primary-container: oklch(0.3 0.08 240);
    --color-on-primary-container: oklab(0.95 0 0);
    --color-surface-variant: oklab(0.25 0.01 0.02);
    --color-on-surface-variant: oklab(0.7 0 -0.05);
    --color-outline: oklab(0.45 0 -0.05);
  }
}

/* Компоненты, использующие тему */
.card {
  background-color: var(--color-surface);
  color: var(--color-on-surface);
  border: 1px solid var(--color-outline);
  border-radius: 8px;
  padding: 16px;
}

.button-primary {
  background-color: var(--color-primary);
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
}

.button-primary:hover {
  background-color: color-mix(
    in oklch,
    var(--color-primary) 90%,
    white 10%
  );
}
```

### Тема с поддержкой цветовой слепоты

```css
/* Добавление визуальных индикаторов для пользователей с цветовой слепотой */
.colorblind-friendly {
  /* Использование текстур или форм в дополнение к цвету */
  background-image: 
    linear-gradient(
      45deg,
      transparent 48%,
      var(--success-color) 48%,
      var(--success-color) 52%,
      transparent 52%
    );
  
  /* Дополнительные визуальные индикаторы */
  border-left: 4px solid var(--accent-color);
}

/* Адаптация для разных типов цветовой слепоты */
.protanopia-mode {
  --red-adjusted: oklch(0.7 0.15 280); /* Сдвиг в фиолетовую область */
  --green-adjusted: oklch(0.8 0.12 135); /* Сдвиг в голубую область */
}

.deuteranopia-mode {
  --red-adjusted: oklch(0.7 0.15 30); /* Сдвиг в оранжевую область */
  --green-adjusted: oklch(0.8 0.12 160); /* Сдвиг в бирюзовую область */
}

.tritanopia-mode {
  --blue-adjusted: oklch(0.5 0.15 120); /* Сдвиг в зеленую область */
  --yellow-adjusted: oklch(0.9 0.08 60); /* Сдвиг в желто-оранжевую область */
}
```

## Инструменты для проверки контрастности

### Использование современных цветовых пространств для оценки контрастности

```css
/* Функция для вычисления контрастности (псевдокод, так как в CSS нет встроенной функции) */
/* В реальности для проверки контрастности используются внешние инструменты */
.contrast-checker {
  /* Использование цветов с известной контрастностью */
  background-color: oklab(0.95 0 0); /* Очень светлый фон */
  color: oklab(0.15 0 0); /* Темный текст */
  /* Приблизительное соотношение контрастности: 15:1 */
}
```

### Автоматическая проверка контрастности

```css
/* Использование CSS-переменных для управления контрастностью */
.adaptive-text {
  color: color-mix(
    in oklab,
    var(--preferred-text-color),
    var(--fallback-text-color) var(--contrast-override, 0%)
  );
  
  background-color: color-mix(
    in oklab,
    var(--preferred-bg-color),
    var(--fallback-bg-color) var(--contrast-override, 0%)
  );
}
```

## Лучшие практики

### 1. Использование семантических переменных

```css
:root {
  /* Лучше использовать семантические названия */
  --surface-color: oklab(0.98 0 0);
  --on-surface-color: oklab(0.15 0 0);
  --primary-color: oklch(0.65 0.12 240);
  --on-primary-color: white;
  
  /* Избегать названий, основанных на конкретных цветах */
  /* --white-bg: #ffffff; - не рекомендуется */
  /* --black-text: #000000; - не рекомендуется */
}
```

### 2. Обеспечение последовательности

```css
/* Поддержание согласованности между темами */
.theme-consistency {
  /* Использование аналогичных соотношений контрастности в разных темах */
  color: var(--text-primary);
  background-color: var(--bg-primary);
  
  /* Уровень контрастности должен быть сопоставим в обеих темах */
}
```

### 3. Тестирование в разных условиях

```css
/* Использование различных цветовых пространств для тестирования */
.testing-colors {
  /* Тестирование в sRGB */
  background-color: rgb(255, 0, 0);
  
  /* Тестирование в OKLCH */
  background-color: oklch(0.65 0.18 0);
  
  /* Тестирование в LAB */
  background-color: lab(50 60 40);
}
```

## Заключение

Работа с цветовыми темами и контрастностью требует внимательного подхода к выбору цветов и их комбинациям. Использование современных цветовых пространств, таких как OKLAB и OKLCH, позволяет создавать более перцептуально равномерные цветовые схемы, которые лучше воспринимаются пользователем.

Важно помнить о доступности и тестировать свои решения на разных устройствах и в различных условиях освещения. CSS-переменные и функции, такие как `color-mix()`, предоставляют мощные инструменты для создания адаптивных и доступных интерфейсов.

## См. также

- [[цветовые-пространства-и-форматы]]
- [[цветовые-функции-и-их-применение]]
- [[CSS-функции]]
- [[CSS-доступность]]
- [[обзор-css-функций]]
- [[продвинутые-функции-css]]
- [[практическое-применение-функций-в-адаптивном-дизайне]]
- [[2d-и-3d-трансформации]]
- [[перспектива-и-3d-пространство-в-css]]
- [[трансформации-и-производительность]]
- [[css-фильтры-применение-и-оптимизация]]
- [[css-формы-и-обтекание]]
- [[комбинирование-фильтров-и-создание-визуальных-эффектов]]
- [[современная-типографика-в-css]]
- [[адаптивная-типографика]]
- [[подстановка-шрифтов-и-производительность]]