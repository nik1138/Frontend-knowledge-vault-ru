---
aliases: ["Сложные анимационные последовательности", "Многоступенчатые анимации", "Составные анимации CSS"]
tags: ["#css", "#animation", "#sequences", "#advanced", "#timing"]
created: 2025-11-13
updated: 2025-11-13
author: "Obsidian CSS Team"
source: "Complex CSS Animation Sequences Guide"
---

# Создание сложных анимационных последовательностей

## Введение

Сложные анимационные последовательности позволяют создавать богатые и увлекательные пользовательские интерфейсы. В отличие от простых анимаций, последовательности включают в себя несколько этапов с различными таймингами, эффектами и взаимодействиями. В этой статье рассмотрим продвинутые техники создания многоступенчатых анимационных последовательностей.

## Основные концепции последовательностей

### 1. Синхронизация анимаций

Сложные последовательности требуют точной синхронизации между различными элементами. Это достигается через:

- Использование задержек (`delay`)
- Синхронизацию по времени
- Каскадирование эффектов

### 2. Структура последовательности

Типичная сложная анимация состоит из:
- Вступления (intro)
- Основной фазы (main action)
- Завершения (outro)
- Повтора или ожидания (hold/pause)

## Продвинутые техники анимации

### 1. Каскадные анимации

Создание эффекта "домино" с последовательным запуском анимаций:

```css
.cascade-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 20px;
}

.cascade-item {
  width: 60px;
  height: 60px;
  background-color: #3498db;
  border-radius: 8px;
  opacity: 0;
  transform: translateY(20px) scale(0.8);
}

/* Каскадная анимация с задержками */
.cascade-item:nth-child(1) { animation: cascadeIn 0.6s ease-out 0.1s forwards; }
.cascade-item:nth-child(2) { animation: cascadeIn 0.6s ease-out 0.2s forwards; }
.cascade-item:nth-child(3) { animation: cascadeIn 0.6s ease-out 0.3s forwards; }
.cascade-item:nth-child(4) { animation: cascadeIn 0.6s ease-out 0.4s forwards; }
.cascade-item:nth-child(5) { animation: cascadeIn 0.6s ease-out 0.5s forwards; }

@keyframes cascadeIn {
  0% {
    opacity: 0;
    transform: translateY(20px) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
```

### 2. Сложные многоступенчатые анимации

Создание анимации с несколькими фазами в одном элементе:

```css
.complex-element {
  width: 100px;
  height: 100px;
  background-color: #e74c3c;
  border-radius: 8px;
  animation: complexSequence 4s ease-in-out infinite;
}

@keyframes complexSequence {
  0% {
    transform: translateX(0) scale(1);
    background-color: #e74c3c;
    border-radius: 8px;
  }
  20% {
    transform: translateX(100px) scale(1.1);
    background-color: #f39c12;
  }
  40% {
    transform: translateX(100px) translateY(50px) scale(1.2);
    background-color: #3498db;
    border-radius: 50%;
  }
  60% {
    transform: translateX(0) translateY(50px) scale(0.9);
    background-color: #9b59b6;
  }
  80% {
    transform: translateX(0) translateY(0) scale(1.05);
    background-color: #2ecc71;
  }
  100% {
    transform: translateX(0) translateY(0) scale(1);
    background-color: #e74c3c;
    border-radius: 8px;
  }
}
```

### 3. Параллельные анимации

Создание нескольких анимаций, работающих одновременно:

```css
.parallel-container {
  position: relative;
  width: 300px;
  height: 200px;
  background-color: #ecf0f1;
  border-radius: 8px;
  overflow: hidden;
}

.ball {
  position: absolute;
  width: 30px;
  height: 30px;
  border-radius: 50%;
}

.ball-1 {
  background-color: #e74c3c;
  animation: 
    moveHorizontal 3s ease-in-out infinite,
    pulse 1.5s ease-in-out infinite alternate;
  top: 50px;
}

.ball-2 {
  background-color: #3498db;
  animation: 
    moveVertical 4s ease-in-out infinite 0.5s, /* Задержка запуска */
    colorChange 3s ease-in-out infinite;
  left: 100px;
}

.ball-3 {
  background-color: #f39c12;
  animation: 
    moveDiagonal 5s linear infinite 1s, /* Задержка запуска */
    rotate 2s linear infinite;
  top: 100px;
  left: 200px;
}

@keyframes moveHorizontal {
  0%, 100% { transform: translateX(0); }
  50% { transform: translateX(200px); }
}

@keyframes moveVertical {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(100px); }
}

@keyframes moveDiagonal {
  0% { transform: translate(0, 0); }
  25% { transform: translate(100px, 50px); }
  50% { transform: translate(200px, 0); }
  75% { transform: translate(100px, -50px); }
  100% { transform: translate(0, 0); }
}

@keyframes pulse {
  0% { transform: scale(1); }
  100% { transform: scale(1.3); }
}

@keyframes colorChange {
  0% { background-color: #3498db; }
  25% { background-color: #e74c3c; }
  50% { background-color: #f39c12; }
  75% { background-color: #2ecc71; }
  100% { background-color: #3498db; }
}

@keyframes rotate {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}
```

## Сложные последовательности с JavaScript

### 1. Динамическое управление анимациями

```css
.animated-element {
  width: 100px;
  height: 100px;
  background-color: #9b59b6;
  border-radius: 8px;
  transition: all 0.3s ease;
}

/* Состояния анимации */
.phase-1 { transform: translateX(0); }
.phase-2 { transform: translateX(100px) rotate(90deg); }
.phase-3 { transform: translateX(100px) translateY(100px) rotate(180deg); }
.phase-4 { transform: translateX(0) translateY(100px) rotate(270deg); }
.phase-5 { transform: translateX(0) translateY(0) rotate(360deg); }
```

```javascript
function runComplexSequence(element) {
  const phases = ['phase-1', 'phase-2', 'phase-3', 'phase-4', 'phase-5'];
  let currentPhase = 0;
  
  function nextPhase() {
    if (currentPhase < phases.length) {
      element.className = `animated-element ${phases[currentPhase]}`;
      currentPhase++;
      setTimeout(nextPhase, 1000); // 1 секунда на фазу
    }
  }
  
  nextPhase();
}

// Использование
const element = document.querySelector('.animated-element');
runComplexSequence(element);
```

### 2. Синхронизация с событиями

```javascript
function createInteractiveSequence() {
  const container = document.querySelector('.interactive-container');
  const elements = container.querySelectorAll('.sequence-element');
  
  let sequenceIndex = 0;
  
  function triggerNext() {
    if (sequenceIndex < elements.length) {
      elements[sequenceIndex].classList.add('active');
      sequenceIndex++;
      
      // Автоматический переход к следующему элементу через 500мс
      setTimeout(triggerNext, 500);
    }
  }
  
  // Начать последовательность по клику
  container.addEventListener('click', () => {
    // Сброс предыдущего состояния
    elements.forEach(el => el.classList.remove('active'));
    sequenceIndex = 0;
    triggerNext();
  });
}
```

## Адаптивные последовательности

### 1. Адаптация к размеру экрана

```css
.responsive-sequence {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  flex-wrap: wrap;
}

.responsive-item {
  width: 50px;
  height: 50px;
  margin: 5px;
  background-color: #3498db;
  opacity: 0;
  transform: scale(0);
}

/* Адаптивные задержки в зависимости от количества элементов */
@media (max-width: 768px) {
  .responsive-item:nth-child(n) {
    animation: responsiveIn 0.4s ease-out calc((var(--index) * 0.1s) - 0.1s) forwards;
  }
}

@media (min-width: 769px) {
  .responsive-item:nth-child(n) {
    animation: responsiveIn 0.6s ease-out calc((var(--index) * 0.15s) - 0.15s) forwards;
  }
}

@keyframes responsiveIn {
  0% {
    opacity: 0;
    transform: scale(0) rotate(180deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}
```

### 2. Учет предпочтений пользователя

```css
/* Уважение к предпочтениям пользователя на анимации */
@media (prefers-reduced-motion: reduce) {
  .complex-sequence {
    animation: none !important;
    transition: none !important;
  }
  
  .sequence-element {
    opacity: 1 !important;
    transform: none !important;
  }
}
```

## Примеры сложных последовательностей

### Пример 1: Анимация загрузки с этапами

```css
.loading-sequence {
  position: relative;
  width: 200px;
  height: 200px;
  margin: 50px auto;
}

.loading-bar {
  position: absolute;
  height: 10px;
  background-color: #ecf0f1;
  border-radius: 5px;
  width: 100%;
  overflow: hidden;
}

.loading-progress {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #3498db, #2ecc71);
  animation: 
    progressBar 3s ease-in-out infinite,
    progressColor 6s ease-in-out infinite;
}

.loading-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 14px;
  color: #7f8c8d;
  animation: 
    textChange 6s steps(4) infinite,
    textPulse 2s ease-in-out infinite alternate;
}

@keyframes progressBar {
  0% { width: 0%; }
  25% { width: 25%; }
  50% { width: 50%; }
  75% { width: 75%; }
  100% { width: 100%; }
}

@keyframes progressColor {
  0%, 25% { background: linear-gradient(90deg, #3498db, #2ecc71); }
  50% { background: linear-gradient(90deg, #f39c12, #e67e22); }
  75% { background: linear-gradient(90deg, #e74c3c, #c0392b); }
  100% { background: linear-gradient(90deg, #9b59b6, #8e44ad); }
}

@keyframes textChange {
  0%, 24.99% { content: "Загрузка..."; }
  25%, 49.99% { content: "Обработка данных..."; }
  50%, 74.99% { content: "Оптимизация..."; }
  75%, 99.99% { content: "Почти готово..."; }
}

@keyframes textPulse {
  0% { opacity: 0.7; }
  100% { opacity: 1; }
}
```

### Пример 2: Анимация навигации с последовательностью

```css
.nav-menu {
  display: flex;
  list-style: none;
  padding: 0;
  margin: 0;
  background-color: #fff;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.nav-item {
  padding: 15px 20px;
  cursor: pointer;
  opacity: 0;
  transform: translateY(-20px);
  transition: all 0.3s ease;
}

/* Сложная последовательность при отображении меню */
.show-nav .nav-item:nth-child(1) { 
  animation: slideIn 0.4s ease-out 0.1s forwards; 
}
.show-nav .nav-item:nth-child(2) { 
  animation: slideIn 0.4s ease-out 0.2s forwards; 
}
.show-nav .nav-item:nth-child(3) { 
  animation: slideIn 0.4s ease-out 0.3s forwards; 
}
.show-nav .nav-item:nth-child(4) { 
  animation: slideIn 0.4s ease-out 0.4s forwards; 
}

@keyframes slideIn {
  0% {
    opacity: 0;
    transform: translateY(-20px);
  }
  70% {
    opacity: 1;
    transform: translateY(5px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.nav-item:hover {
  background-color: #f8f9fa;
  transform: translateY(-2px);
}
```

### Пример 3: Анимация галереи с последовательностью

```css
.gallery-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
  padding: 20px;
}

.gallery-item {
  aspect-ratio: 1;
  background-color: #bdc3c7;
  border-radius: 8px;
  overflow: hidden;
  opacity: 0;
  transform: scale(0.8) rotate(10deg);
  transition: all 0.4s ease;
}

/* Сложная последовательность для галереи */
.gallery-container.animate .gallery-item:nth-child(1) { 
  animation: galleryItemIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.1s forwards; 
}
.gallery-container.animate .gallery-item:nth-child(2) { 
  animation: galleryItemIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.2s forwards; 
}
.gallery-container.animate .gallery-item:nth-child(3) { 
  animation: galleryItemIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.3s forwards; 
}
.gallery-container.animate .gallery-item:nth-child(4) { 
  animation: galleryItemIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.4s forwards; 
}
.gallery-container.animate .gallery-item:nth-child(5) { 
  animation: galleryItemIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.5s forwards; 
}
.gallery-container.animate .gallery-item:nth-child(6) { 
  animation: galleryItemIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.6s forwards; 
}

@keyframes galleryItemIn {
  0% {
    opacity: 0;
    transform: scale(0.8) rotate(10deg);
  }
  60% {
    opacity: 1;
    transform: scale(1.05) rotate(-2deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0);
  }
}

.gallery-item:hover {
  transform: scale(1.05) rotate(0);
  z-index: 10;
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}
```

## Заключение

Создание сложных анимационных последовательностей требует понимания тайминга, синхронизации и взаимодействия различных элементов. Ключевые принципы:

1. Точная синхронизация с использованием задержек
2. Использование комбинаций нескольких анимаций
3. Учет производительности при создании сложных последовательностей
4. Уважение к предпочтениям пользователя
5. Адаптация для разных устройств и размеров экрана

Следование этим принципам позволяет создавать захватывающие и плавные анимационные последовательности, улучшающие пользовательский опыт.

## Связанные темы

- [[Гайд по выбору между анимациями и переходами]]
- [[Оптимизация производительности анимаций]]
- [[Доступность CSS-анимаций]]