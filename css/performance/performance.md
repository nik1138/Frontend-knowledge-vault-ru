# Обзор производительности CSS

## Определение производительности CSS и её значение

Производительность CSS — это способность стилей эффективно загружаться, парситься и применяться браузером без замедления отображения и взаимодействия с веб-страницей. Хорошо оптимизированный CSS улучшает пользовательский опыт, снижает время загрузки страницы и уменьшает потребление ресурсов устройства.

## Как браузер обрабатывает CSS

Браузер проходит несколько этапов при обработке CSS:

1. **Парсинг CSS**: Браузер читает CSS-файл и преобразует его в структуру данных, называемую **деревом стилей**.
2. **Создание дерева стилей**: Сопоставление CSS-правил с DOM-элементами.
3. **Реконструция (Reflow/Reconstruct)**: Изменения в DOM или CSS могут вызвать перерасчет геометрии элементов.
4. **Перерисовка (Repaint)**: Обновление визуального представления элементов.

## Факторы, влияющие на производительность CSS

- Сложность селекторов
- Количество CSS-правил
- Использование тяжелых анимаций
- Частые изменения DOM
- Загрузка внешних стилей

## Оптимизация селекторов

Используйте простые и эффективные селекторы:

```css
/* Плохо */
div.container ul li a:hover {
  color: red;
}

/* Хорошо */
.nav-link:hover {
  color: red;
}
```

Избегайте чрезмерного использования селекторов потомков и универсальных селекторов. Подробнее см. [[selectors]].

## Управление каскадом и специфичностью

Контролируйте каскад и избегайте высокой специфичности:

```css
/* Плохо - высокая специфичность */
.header .nav .menu .item.active {
  color: blue;
}

/* Хорошо - низкая специфичность */
.active-item {
  color: blue;
}
```

См. также [[cascade]] и [[specificity]].

## Техники уменьшения размера CSS

- Удаление неиспользуемых стилей
- Минификация CSS
- Использование CSS-препроцессоров
- Компрессия при сборке

## Оптимизация рендеринга и избежание перерисовок

Избегайте свойств, вызывающих перерисовку:

```css
/* Плохо - вызывает перерисовку */
.element {
  width: 100px;
  height: 100px;
  transition: all 0.3s;
}

/* Хорошо - использует GPU */
.element {
  transform: translateX(100px);
  transition: transform 0.3s;
}
```

## Лучшие практики для производительного CSS

- Используйте классы вместо ID в селекторах
- Организуйте CSS по модульным компонентам
- Избегайте вложенных правил глубже 3 уровней
- Используйте CSS-переменные для согласованности
- Минимизируйте использование `!important`

## Инструменты для анализа производительности CSS

- Chrome DevTools
- CSS Stats
- PurifyCSS
- UnCSS
- Lighthouse

## Современные подходы к оптимизации CSS

- Использование CSS-in-JS
- Atomic CSS
- CSS-модули
- Tree-shaking CSS
- Lazy loading стилей

---

#css #performance #web-development #frontend