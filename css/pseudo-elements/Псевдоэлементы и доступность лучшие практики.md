---
aliases: ["Доступность псевдоэлементов", "CSS и доступность", "Псевдоэлементы для a11y"]
tags: [css, pseudo-elements, accessibility, a11y, best-practices]
---

# Псевдоэлементы и доступность: лучшие практики

## Введение

Псевдоэлементы CSS позволяют добавлять визуальные элементы без изменения HTML-разметки, что может повлиять на доступность веб-страницы. В этом руководстве мы рассмотрим, как правильно использовать псевдоэлементы, сохраняя доступность интерфейса для всех пользователей, включая тех, кто использует вспомогательные технологии.

## Влияние псевдоэлементов на доступность

### Что видят вспомогательные технологии

Псевдоэлементы `::before` и `::after` **не добавляются в DOM** и **не читаются** скринридерами по умолчанию. Это означает, что визуальная информация, добавленная через псевдоэлементы, может быть недоступна пользователям, полагающимся на вспомогательные технологии.

### Пример проблемы доступности

```css
/* ПЛОХО: важная информация только в псевдоэлементе */
.required-field::after {
  content: "Обязательное поле";
  color: red;
}

/* ХОРОШО: информация дублируется в разметке */
.required-field .required-label {
  display: none; /* Скрыто визуально, но доступно для скринридеров */
}

.required-field::after {
  content: "*";
  color: red;
}
```

## Лучшие практики использования псевдоэлементов

### 1. Декоративное содержимое

Псевдоэлементы идеально подходят для чисто декоративного содержимого:

```css
/* ХОРОШО: декоративные элементы */
.quote::before {
  content: """;
  position: absolute;
  top: 0;
  left: 0;
  font-size: 60px;
  color: #007bff;
  opacity: 0.2;
}

/* Декоративные углы */
.frame::before,
.frame::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  border: 2px solid #007bff;
}
```

### 2. Иконки и символы

Для добавления иконок и символов псевдоэлементы подходят отлично:

```css
/* Добавление стрелки к ссылке */
.arrow-link::after {
  content: "▶";
  margin-left: 5px;
  transition: transform 0.2s ease;
}

.arrow-link:hover::after {
  transform: translateX(3px);
}

/* Иконка внешней ссылки */
.external-link::after {
  content: " ↗";
  font-size: 0.8em;
}
```

## Псевдоэлементы и семантическая разметка

### Обеспечение контекста через разметку

```html
<!-- ХОРОШО: визуальный индикатор + семантическая разметка -->
<button class="status-button" aria-label="Сообщение прочитано">
  <span class="sr-only">Сообщение прочитано</span>
  <span class="status-indicator"></span>
</button>
```

```css
.status-indicator::after {
  content: "✓";
  display: inline-block;
  width: 16px;
  height: 16px;
  background: #28a745;
  color: white;
  border-radius: 50%;
  text-align: center;
  line-height: 16px;
  font-size: 0.8em;
}
```

### Скрытие визуальных элементов для скринридеров

```css
/* Скрытие визуальных элементов от скринридеров */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Показ только для скринридеров */
.visually-hidden {
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px);
}
```

## Псевдоэлементы в формах

### Индикаторы состояния

```css
/* ХОРОШО: визуальный индикатор с дополнительной разметкой */
.form-field {
  position: relative;
}

.form-field.valid::after {
  content: "✓";
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #28a745;
}

.form-field.invalid::after {
  content: "✗";
  position: absolute;
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
  color: #dc3545;
}

/* Дополнительная разметка для доступности */
.form-field .validation-message {
  display: none;
}

.form-field.valid .validation-message {
  display: block;
  color: #28a745;
}

.form-field.invalid .validation-message {
  display: block;
  color: #dc3545;
}
```

### Звездочки обязательных полей

```css
/* ПЛОХО: только визуальный индикатор */
.required-field::after {
  content: "*";
  color: red;
}

/* ХОРОШО: визуальный индикатор + семантическая разметка */
.required-field label::after {
  content: "*";
  color: red;
  margin-left: 3px;
}

.required-field label {
  position: relative;
}

.required-field label .sr-only {
  content: "Обязательное поле";
}
```

## Псевдоэлементы и фокус

### Индикаторы фокуса

```css
/* Создание кастомного индикатора фокуса */
.custom-focus:focus {
  outline: none;
  position: relative;
}

.custom-focus:focus::after {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  border: 2px solid #007bff;
  border-radius: 4px;
  pointer-events: none;
}

/* Альтернатива: использование box-shadow */
.focus-indicator:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.5);
}
```

### Обеспечение видимости фокуса

```css
/* Обязательно обеспечивайте видимый индикатор фокуса */
.focusable-element {
  outline: none;
  position: relative;
}

.focusable-element:focus::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border: 2px solid #007bff;
  border-radius: inherit;
  pointer-events: none;
  z-index: 1000;
}
```

## Псевдоэлементы и восприятие цвета

### Обеспечение контраста

```css
/* Убедитесь, что псевдоэлементы имеют достаточный контраст */
.accessible-marker::after {
  content: "*";
  color: #d32f2f; /* Достаточный контраст с фоном */
  background: #ffffff;
  padding: 0 2px;
  border-radius: 2px;
}

/* Альтернативные способы передачи информации */
.important::before {
  content: "ВАЖНО: ";
  font-weight: bold;
  color: #d32f2f;
}

@media (prefers-contrast: high) {
  .important::before {
    content: "ВАЖНО: ";
    font-weight: bold;
    color: CanvasText;
    background-color: Canvas;
  }
}
```

## Псевдоэлементы и анимации

### Уважение к предпочтениям пользователей

```css
/* Учет предпочтения отключения анимаций */
.decorative-animation::after {
  content: '';
  width: 20px;
  height: 20px;
  background: #007bff;
  animation: pulse 2s infinite;
}

@media (prefers-reduced-motion: reduce) {
  .decorative-animation::after {
    animation: none;
  }
}

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
  100% { transform: scale(1); opacity: 1; }
}
```

### Плавные переходы

```css
/* Обеспечение плавных переходов для пользователей без ограничений */
.smooth-transition::before {
  content: '';
  position: absolute;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.smooth-transition:hover::before {
  opacity: 1;
}

@media (prefers-reduced-motion: reduce) {
  .smooth-transition::before {
    transition: none;
  }
}
```

## Практические примеры доступных решений

### Доступный переключатель (toggle switch)

```html
<div class="toggle-container">
  <input type="checkbox" id="toggle" class="sr-only">
  <label for="toggle" class="toggle-switch">
    <span class="toggle-text">Темный режим</span>
  </label>
</div>
```

```css
.toggle-switch {
  position: relative;
  display: inline-block;
  padding-left: 60px;
  cursor: pointer;
}

.toggle-switch::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 50px;
  height: 30px;
  background: #ccc;
  border-radius: 15px;
  transition: background 0.3s ease;
}

.toggle-switch::after {
  content: '';
  position: absolute;
  left: 2px;
  top: 50%;
  transform: translateY(-50%);
  width: 26px;
  height: 26px;
  background: white;
  border-radius: 50%;
  transition: transform 0.3s ease;
}

#toggle:checked + .toggle-switch::before {
  background: #007bff;
}

#toggle:checked + .toggle-switch::after {
  transform: translateY(-50%) translateX(20px);
}
```

### Доступная карточка с индикатором важности

```html
<article class="card" role="article">
  <h3 class="card-title">Заголовок карточки</h3>
  <p class="card-content">Содержимое карточки</p>
  <div class="importance-indicator" aria-label="Важная карточка"></div>
</article>
```

```css
.card {
  position: relative;
  padding: 20px;
  border: 1px solid #ddd;
}

.importance-indicator {
  position: absolute;
  top: 10px;
  right: 10px;
}

.importance-indicator::before {
  content: '!';
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  background: #dc3545;
  color: white;
  border-radius: 50%;
  font-weight: bold;
  font-size: 0.8em;
}

/* Дополнительная визуальная индикация важности */
.card.important {
  border-left: 4px solid #dc3545;
}
```

## Псевдоэлементы и разные типы пользователей

### Для пользователей с нарушениями зрения

```css
/* Обеспечение контекста для пользователей с нарушениями зрения */
.visual-indicator::after {
  content: attr(data-label); /* Получаем информацию из атрибута */
  position: absolute;
  left: -9999px; /* Делаем видимым только для скринридеров */
}

/* Использование атрибутов для передачи информации */
.status-indicator[data-status="active"]::before {
  content: "Активный элемент";
  position: absolute;
  left: -9999px;
}
```

### Для пользователей с моторными ограничениями

```css
/* Обеспечение достаточного размера для нажатия */
.touch-friendly::before {
  content: '';
  position: absolute;
  top: -10px;
  left: -10px;
  right: -10px;
  bottom: -10px;
  /* Увеличиваем область нажатия */
}
```

## Тестирование доступности

### Проверка с помощью инструментов

При использовании псевдоэлементов важно:

1. Проверить, что важная информация не теряется без визуального восприятия
2. Убедиться, что все интерактивные элементы остаются доступными
3. Проверить работу с отключенными стилями
4. Протестировать с включенным скринридером

### Пример проверочного списка

```css
/* Проверка: нужна ли информация из псевдоэлемента для понимания контента? */
/* Если да - дублируйте в HTML или обеспечьте альтернативный способ получения */

.accessibility-check {
  position: relative;
}

.accessibility-check::before {
  content: attr(data-accessibility); /* Получаем информацию из атрибута */
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
```

## Заключение

Псевдоэлементы - мощный инструмент для создания визуально привлекательных интерфейсов, но при их использовании важно помнить о доступности. Ключевые принципы:

1. Используйте псевдоэлементы только для декоративного содержимого
2. Обеспечивайте дублирование важной информации в разметке
3. Учитывайте предпочтения пользователей
4. Тестируйте доступность решений

## Связанные темы

- [[Продвинутые возможности псевдоэлементов]]
- [[Использование псевдоэлементов для создания декораций]]
- [[CSS Accessibility Guidelines]]
- [[CSS and Web Standards]]