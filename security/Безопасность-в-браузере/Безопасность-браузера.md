---
aliases: ["Безопасность веб-браузеров", "Браузерная безопасность", "Web Browser Security"]
tags: ["#security", "#web-security", "#browser-security", "#frontend-security", "#cybersecurity"]
created: 2025-11-18
updated: 2025-11-18
author: "Qwen"
status: "draft"
---

# Безопасность веб-браузера

## Введение в безопасность браузера

Безопасность веб-браузера — это комплекс мер, протоколов и технологий, направленных на защиту пользователей от различных угроз при использовании веб-приложений и сайтов. Современные браузеры реализуют множество встроенных механизмов безопасности, чтобы предотвратить атаки, такие как межсайтовый скриптинг (XSS), подделка межсайтовых запросов (CSRF), а также защитить данные пользователей и конфиденциальность.

## Архитектура безопасности браузера

Архитектура безопасности браузера включает в себя несколько уровней защиты:

- **Изоляция процессов**: Каждая вкладка или фрейм может работать в отдельном процессе
- **Песочница (Sandbox)**: Ограничение доступа к системным ресурсам
- **Политики безопасности**: Правила, определяющие, какие действия может выполнять код
- **Системы разрешений**: Управление доступом к чувствительным API

## Песочница (Sandbox)

Песочница — это изолированная среда выполнения, в которой запускается код веб-страницы. Она ограничивает доступ к системным ресурсам, файловой системе и другим процессам, предотвращая потенциальные угрозы.

### Принципы песочницы

- **Ограничение системных вызовов**: Песочница блокирует или фильтрует системные вызовы
- **Изоляция памяти**: Процессы не могут напрямую взаимодействовать с памятью других процессов
- **Контроль доступа**: Ограничение доступа к чувствительным API и ресурсам

## Same-Origin Policy

Same-Origin Policy (SOP) — это важный механизм безопасности, который ограничивает возможность веб-страницы взаимодействовать с ресурсами из другого источника (origin). Origin определяется комбинацией протокола, домена и порта.

### Определение Origin

Origin состоит из:
- **Protocol**: http, https
- **Host**: example.com
- **Port**: 80, 443 (если не стандартный)

### Ограничения SOP

- Загрузка данных с помощью XMLHttpRequest или Fetch API
- Доступ к DOM других фреймов/окон
- Доступ к кукам, localStorage, sessionStorage

> [!warning] Важно
> SOP не ограничивает отправку запросов, но ограничивает доступ к ответу на эти запросы из другого origin.

## Content Security Policy

Content Security Policy (CSP) — это механизм безопасности, который позволяет разработчикам явно указывать, какие ресурсы могут быть загружены и выполнены на веб-странице. CSP помогает предотвратить атаки типа XSS.

### Пример CSP заголовка

```
Content-Security-Policy: default-src 'self'; script-src 'self' https://apis.example.com; object-src 'none'; style-src 'self' 'unsafe-inline'
```

### Основные директивы CSP

- **default-src**: Значение по умолчанию для всех ресурсов
- **script-src**: Определяет разрешенные источники для JavaScript
- **style-src**: Разрешенные источники для CSS
- **img-src**: Разрешенные источники для изображений
- **connect-src**: Разрешенные источники для AJAX и Fetch API
- **frame-src**: Разрешенные источники для iframe
- **font-src**: Разрешенные источники для шрифтов
- **media-src**: Разрешенные источники для аудио/видео

## Cross-Origin Resource Sharing (CORS)

Cross-Origin Resource Sharing (CORS) — это механизм, который позволяет веб-странице делать запросы к другому origin, отличному от того, с которого загружена страница. CORS реализован для безопасного взаимодействия между разными источниками.

### CORS заголовки

- **Access-Control-Allow-Origin**: Указывает, какие origin могут получить доступ к ресурсу
- **Access-Control-Allow-Methods**: Разрешенные HTTP методы
- **Access-Control-Allow-Headers**: Разрешенные заголовки
- **Access-Control-Allow-Credentials**: Разрешение на отправку учетных данных

### Типы CORS запросов

- **Простые запросы**: GET, POST с определенными заголовками
- **Предварительные запросы (preflight)**: Проверка разрешений перед основным запросом
- **Запросы с учетными данными**: С отправкой cookies и аутентификации

## Cross-Site Request Forgery (CSRF) защита

Cross-Site Request Forgery (CSRF) — это атака, при которой вредоносный сайт заставляет браузер пользователя выполнить нежелательное действие на доверенном сайте, где пользователь аутентифицирован.

### Методы защиты от CSRF

- **CSRF токены**: Случайные значения, которые проверяются на сервере
- **SameSite cookies**: Ограничение отправки кук в межсайтовых запросах
- **Double Submit Cookie**: Токен в куке и в теле/заголовке запроса
- **Origin/Referer заголовки**: Проверка источника запроса

### SameSite атрибут кук

- **Strict**: Куки отправляются только в рамках одного сайта
- **Lax**: Куки отправляются при навигации с другого сайта, но не при POST запросах
- **None**: Куки отправляются во всех случаях (требует Secure флага)

## Cross-Site Scripting (XSS) защита

Cross-Site Scripting (XSS) — это тип уязвимости, при котором злоумышленник вставляет вредоносный скрипт в контент, который затем выполняется в браузере других пользователей.

### Типы XSS

- **Reflected XSS**: Скрипт отражается от сервера в ответе
- **Stored XSS**: Скрипт сохраняется на сервере и отображается другим пользователям
- **DOM-based XSS**: Уязвимость в клиентском JavaScript коде

### Методы защиты

- **Экранирование вывода**: Правильное экранирование данных перед отображением
- **CSP**: Ограничение выполнения встроенных скриптов
- **Input validation**: Проверка и фильтрация входных данных
- **Использование безопасных API**: DOMPurify, sanitize-html и т.д.

## HTTP Strict Transport Security (HSTS)

HTTP Strict Transport Security (HSTS) — это механизм безопасности, который заставляет браузер использовать HTTPS вместо HTTP при подключении к сайту. Это предотвращает атаки типа "человек посередине" на начальном HTTP запросе.

### HSTS заголовок

```
Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
```

### Параметры HSTS

- **max-age**: Время в секундах, на которое браузер должен запоминать правило
- **includeSubDomains**: Применение к поддоменам
- **preload**: Включение в HSTS preload list браузеров

## Referrer Policy

Referrer Policy — это механизм, который контролирует, какая информация об отправителе запроса передается в заголовке Referer. Это помогает защищать конфиденциальность пользователей и предотвращать утечку чувствительной информации.

### Значения Referrer Policy

- **no-referrer**: Не отправлять заголовок Referer
- **no-referrer-when-downgrade**: Не отправлять при переходе с HTTPS на HTTP
- **same-origin**: Отправлять только для запросов в пределах одного origin
- **strict-origin**: Отправлять только origin, и только при HTTPS-HTTPS или HTTP-HTTP
- **strict-origin-when-cross-origin**: Отправлять полный URL для same-origin, origin для cross-origin
- **unsafe-url**: Отправлять полный URL всегда

## Feature Policy (теперь Permissions Policy)

Feature Policy (ныне Permissions Policy) — это механизм, который позволяет разработчикам контролировать, какие функции браузера могут быть использованы на веб-странице. Это помогает предотвратить использование потенциально опасных API.

### Пример Permissions Policy

```
Permissions-Policy: geolocation=(self "https://trusted.com"), microphone=(), camera=(self)
```

### Основные возможности

- **geolocation**: Доступ к геолокации
- **microphone**: Доступ к микрофону
- **camera**: Доступ к камере
- **fullscreen**: Использование полноэкранного режима
- **payment**: Использование Payment Request API
- **sync-xhr**: Синхронные XMLHttpRequest

## Фреймворки безопасности

Современные фреймворки и библиотеки включают в себя встроенные механизмы безопасности для защиты от распространенных уязвимостей.

### Angular

- Встроенная защита от XSS через автоматическое экранирование
- Санитайзер для обработки HTML контента
- Встроенные механизмы CSRF защиты

### React

- Автоматическое экранирование JSX
- Рекомендации по безопасной работе с dangerouslySetInnerHTML
- Библиотеки для санитизации (DOMPurify, sanitize-html)

### Vue.js

- Защита от XSS через автоматическое экранирование
- Рекомендации по безопасной вставке HTML
- Встроенные возможности для санитизации

## Безопасность веб-компонентов

Веб-компоненты (Custom Elements, Shadow DOM, HTML Templates) имеют свои особенности безопасности, которые нужно учитывать при разработке.

### Shadow DOM и безопасность

- Изоляция DOM и стилей
- Ограничения доступа к содержимому Shadow DOM
- Правила для обработки событий

### Безопасность Custom Elements

- Правила наименования (должны содержать дефис)
- Ограничения на наследование от определенных элементов
- Правила инициализации и обновления

## Безопасность расширений

Расширения браузера имеют повышенные привилегии и доступ к различным API, что делает их потенциально опасными.

### Риск безопасности расширений

- Доступ к данным на всех сайтах
- Возможность чтения и изменения DOM
- Доступ к cookies и localStorage
- Взаимодействие с API браузера

### Меры безопасности

- Регулярные обновления и проверки
- Минимизация разрешений
- Использование Content Security Policy для расширений
- Проверка разработчиков и подписка расширений

## Ссылки на другие связанные файлы

- [[XSS-защита]] - Подробное руководство по защите от межсайтового скриптинга
- [[CORS-практики]] - Лучшие практики для настройки CORS
- [[CSRF-предотвращение]] - Подробное руководство по защите от CSRF
- [[HTTPS-безопасность]] - Руководство по безопасному использованию HTTPS
- [[Cookie-безопасность]] - Руководство по безопасной работе с куками
- [[WebSockets-безопасность]] - Безопасность WebSocket соединений
- [[Frontend-безопасность]] - Общие принципы безопасности на стороне клиента
- [[Authentication-безопасность]] - Безопасность аутентификации в веб-приложениях
- [[Authorization-безопасность]] - Безопасность авторизации в веб-приложениях
- [[API-безопасность]] - Руководство по безопасности API
- [[Content-Security-Policy]] - Подробное руководство по CSP
- [[Browser-архитектура]] - Архитектура современных веб-браузеров
- [[Security-headers]] - HTTP заголовки безопасности
- [[OWASP-Top-10]] - Топ-10 уязвимостей по версии OWASP
- [[Security-testing]] - Тестирование безопасности веб-приложений
- [[Privacy-политика]] - Руководство по защите конфиденциальности
- [[Cryptography-база]] - Основы криптографии для веб-разработчиков
- [[Network-безопасность]] - Сетевая безопасность для веб-приложений
- [[Mobile-безопасность]] - Особенности безопасности мобильных веб-приложений
- [[DevSecOps-практики]] - Интеграция безопасности в процесс разработки

## Заключение

Безопасность веб-браузера — это многоуровневая система, включающая как клиентские, так и серверные меры защиты. Понимание и правильная реализация этих механизмов критически важна для защиты пользователей и данных веб-приложений. Регулярное обновление знаний и следование лучшим практикам безопасности позволяет создавать более защищенные и надежные веб-приложения.
