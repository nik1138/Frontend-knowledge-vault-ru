---
aliases: ["Обзор Feature Policy", "Feature Policy Overview"]
tags: [security, feature-policy, web-security, browser-security]
---

# Обзор Feature Policy

Feature Policy (ранее известная как Permission Policy) - это механизм веб-безопасности, который позволяет разработчикам контролировать, какие браузерные функции доступны для веб-страницы и встроенных фреймов. Этот механизм предоставляет мощный способ ограничения потенциально опасных функций и уменьшения атакующей поверхности веб-приложений.

## Введение в Feature Policy

Feature Policy - это декларативный механизм, который позволяет веб-разработчикам ограничивать доступ к различным браузерным API и функциям. Он был разработан для решения проблем с безопасностью и конфиденциальностью, возникающих при использовании мощных веб-функций.

Политика может быть объявлена с помощью HTTP-заголовка или атрибута в HTML-элементах. Она позволяет указать, какие функции могут быть использованы, где они могут быть использованы и кем они могут быть использованы.

## История и эволюция

Feature Policy была впервые представлена как "Permissions Policy" и позже переименована в "Feature Policy". Она развивалась из более раннего механизма "Feature Policy" (ранее "Feature Policy Framework"), который был разработан для контроля доступа к функциям браузера.

## Основные концепции

### Политики функций

Каждая браузерная функция имеет связанное с ней имя политики. Например:
- `camera` - доступ к камере
- `microphone` - доступ к микрофону
- `geolocation` - геолокация
- `fullscreen` - полноэкранный режим
- `payment` - платежи

### Значения политик

Политики могут принимать следующие значения:

- `*` - разрешено для всех
- `'self'` - разрешено только для текущего источника
- `'none'` - запрещено
- Список разрешенных источников - например, `'self' https://trusted-site.com`

## Синтаксис и реализация

### HTTP-заголовок

```http
Feature-Policy: camera 'none'; microphone 'self'; geolocation 'self' https://trusted-location.com
```

### В HTML-документе

Политику можно также указать с помощью тега `<meta>`:

```html
<meta http-equiv="Feature-Policy" content="camera 'none'; microphone 'self'">
```

### Для iframe

Политику можно применить к отдельным iframe с помощью атрибута `allow`:

```html
<iframe src="https://example.com" allow="geolocation 'self'; camera 'none'"></iframe>
```

## Основные области применения

### Защита от нежелательного доступа к функциям

Feature Policy позволяет предотвратить доступ к чувствительным функциям, таким как камера, микрофон или геолокация, которые могут быть использованы для нарушения конфиденциальности пользователя.

### Контроль встроенных фреймов

Политика особенно полезна для контроля функций во встроенных фреймах, где доверие к содержимому может быть ограничено.

### Уменьшение атакующей поверхности

Ограничение доступа к функциям снижает вероятность эксплуатации уязвимостей, связанных с этими функциями.

## Поддерживаемые функции

Некоторые из поддерживаемых функций включают:

- `accelerometer` - доступ к акселерометру
- `ambient-light-sensor` - датчик освещенности
- `autoplay` - автовоспроизведение медиа
- `camera` - доступ к камере
- `display-capture` - захват экрана
- `encrypted-media` - зашифрованные медиа
- `fullscreen` - полноэкранный режим
- `geolocation` - геолокация
- `gyroscope` - гироскоп
- `magnetometer` - магнитометр
- `microphone` - доступ к микрофону
- `midi` - доступ к MIDI
- `payment` - платежи
- `usb` - доступ к USB

## Примеры использования

### Запрет всех чувствительных функций

```http
Feature-Policy: 
  camera 'none';
  microphone 'none';
  geolocation 'none';
  accelerometer 'none';
  gyroscope 'none'
```

### Разрешение функций только для доверенных источников

```http
Feature-Policy: 
  camera 'self' https://trusted-camera.com;
  geolocation 'self';
  microphone 'self'
```

### Контроль в iframe

```html
<iframe 
  src="https://third-party.com" 
  allow="geolocation 'self'; camera 'none'; microphone 'none'">
</iframe>
```

## Совместимость с браузерами

Feature Policy поддерживается современными браузерами:
- Chrome 60+
- Firefox 69+
- Safari 14+
- Edge 79+

Важно проверять совместимость при использовании специфических функций.

## Лучшие практики

### 1. Принцип наименьших привилегий

Предоставляйте только минимально необходимые права доступа к функциям:

```http
Feature-Policy: 
  camera 'self';
  geolocation 'self';
  microphone 'none'
```

### 2. Использование конкретных доменов

Вместо универсального разрешения `*`, указывайте конкретные доверенные домены:

```http
Feature-Policy: 
  payment 'self' https://trusted-payment.com;
  camera 'self'
```

### 3. Регулярный аудит политик

Регулярно пересматривайте и обновляйте политики в соответствии с изменениями в приложении и требованиями безопасности.

### 4. Комбинирование с другими мерами безопасности

Feature Policy должна использоваться в сочетании с другими мерами безопасности, такими как [[Content Security Policy]] и [[Subresource Integrity]].

## Отладка и тестирование

Для тестирования Feature Policy можно использовать:

- Инструменты разработчика браузера
- Проверку HTTP-заголовков
- Тестирование доступа к функциям в разных контекстах

## Будущее Feature Policy

Feature Policy продолжает развиваться, с добавлением новых функций и улучшением существующих механизмов. Важно следить за обновлениями спецификации и изменениями в браузерах.

## Заключение

Feature Policy - мощный инструмент для контроля доступа к браузерным функциям и повышения безопасности веб-приложений. Правильное использование этой технологии позволяет значительно уменьшить атакующую поверхность и защитить пользователей от потенциальных угроз.

Для более глубокого понимания темы рекомендуется изучить [[Контроль-функций]], [[Безопасность-браузерных-функций]] и [[Реализация-Feature-Policy]].

## См. также

- [[Контроль-функций]]
- [[Безопасность-браузерных-функций]]
- [[Реализация-Feature-Policy]]
- [[Content Security Policy]]
- [[Permissions API]]

#security #feature-policy #web-security #browser-security