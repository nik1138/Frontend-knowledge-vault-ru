---
aliases: [i18n security, безопасность локализации, интернационализация безопасность]
tags: [security, i18n, localization, web-security, development]
---

# Безопасность в системах локализации (i18n)

## Введение в безопасность локализации

Безопасность локализации (internationalization security или i18n security) - это специфическая область информационной безопасности, посвященная защите систем, поддерживающих интернационализацию и локализацию. При разработке приложений, ориентированных на международную аудиторию, разработчики сталкиваются с уникальными уязвимостями, связанными с обработкой переведенного контента, который может быть источником атак.

В отличие от традиционных подходов к безопасности, безопасность локализации учитывает специфику обработки данных на разных языках, включая символы, кодировки, форматирование и пользовательские переводы. Неправильная реализация может привести к серьезным уязвимостям, особенно в системах, где пользователи могут вносить свои переводы или где переводы загружаются из внешних источников.

## Особенности безопасности интернационализации

Системы интернационализации (i18n) имеют несколько ключевых особенностей, влияющих на безопасность:

- **Многоязычность**: Поддержка различных языков может привести к неожиданным поведениям при обработке специальных символов
- **Разные кодировки**: Использование различных кодировок (UTF-8, UTF-16, etc.) может создать векторы атак
- **Форматирование строк**: Механизмы форматирования строк могут быть уязвимы к атакам типа "format string"
- **Направление текста**: Поддержка RTL (справа налево) языков может быть использована для визуальных атак
- **Размер шрифта и отображение**: Некоторые языки требуют специфического отображения, что может быть использовано для обхода фильтров

## Уязвимости через переводы

Уязвимости через переводы возникают, когда злонамеренные переводы используются для внедрения вредоносного кода. Это может произойти в следующих сценариях:

- **Непроверенные переводы**: Использование непроверенных или автоматически генерируемых переводов
- **Пользовательские переводы**: Возможность для пользователей вносить свои переводы без должной проверки
- **Внешние API переводов**: Использование внешних сервисов перевода, которые могут быть скомпрометированы
- **Неправильная обработка шаблонов**: Неправильное экранирование специальных символов в шаблонах переводов

## Защита от XSS в переводах

Cross-Site Scripting (XSS) в переводах - одна из самых распространенных уязвимостей. Защита включает:

- **Санитизация вывода**: Все переводы должны быть санитизированы перед отображением
- **Контекстное экранирование**: Использование разных методов экранирования в зависимости от контекста (HTML, JavaScript, URL)
- **Проверка на наличие скриптов**: Автоматическая проверка переводов на наличие потенциально вредоносных тегов и скриптов
- **Ограничение HTML**: В большинстве случаев переводы не должны содержать HTML-теги

Пример безопасного подхода:

```javascript
// Небезопасный код
document.getElementById('message').innerHTML = translatedText;

// Безопасный код
document.getElementById('message').textContent = translatedText;
```

## Санитизация локализованных строк

Санитизация локализованных строк включает:

- **Удаление потенциально опасных символов**: Специальные символы, которые могут быть использованы для атак
- **Проверка длины строк**: Ограничение длины переводов для предотвращения атак типа "buffer overflow"
- **Проверка формата**: Убедиться, что переводы соответствуют ожидаемому формату
- **Фильтрация ввода**: Проверка переводов перед сохранением в систему

Использование библиотек санитизации:

```javascript
const DOMPurify = require('dompurify');
const sanitized = DOMPurify.sanitize(translatedText);
```

## Безопасность файлов локализации

Файлы локализации (обычно JSON, XML, PO) могут быть уязвимы к различным атакам:

- **Изменение структуры файла**: Злонамеренные изменения структуры файла могут привести к ошибкам приложения
- **Внедрение кода**: Внедрение вредоносного кода в файлы локализации
- **Переполнение памяти**: Очень большие файлы локализации могут привести к переполнению памяти
- **Доступ к конфиденциальной информации**: Файлы локализации могут содержать информацию о внутренней структуре приложения

## Управление доступом к файлам перевода

Эффективное управление доступом к файлам перевода включает:

- **Разграничение прав**: Только авторизованные пользователи должны иметь доступ к изменению файлов перевода
- **Логирование изменений**: Все изменения файлов должны логироваться для аудита
- **Версионирование**: Использование системы контроля версий для отслеживания изменений
- **Модерация**: Все изменения должны проходить модерацию перед публикацией

## Кодирование локализованных данных

Правильное кодирование локализованных данных критически важно:

- **UTF-8**: Рекомендуется использовать UTF-8 как стандартную кодировку
- **Экранирование специальных символов**: Правильное экранирование специальных символов в разных контекстах
- **Обработка BOM**: Правильная обработка метки порядка байтов (BOM) в файлах
- **Консистентность**: Все файлы локализации должны использовать одинаковую кодировку

## Тестирование безопасности переводов

Тестирование безопасности переводов должно включать:

- **Автоматические сканеры**: Использование инструментов для поиска потенциально опасных строк в файлах перевода
- **Ручная проверка**: Проверка переводов на наличие вредоносного содержимого
- **Пентестинг**: Тестирование на проникновение с использованием переведенного контента
- **Юнит-тесты**: Создание тестов, проверяющих безопасность обработки переводов

## Модерация пользовательских переводов

В системах с пользовательскими переводами необходимо:

- **Промежуточное хранение**: Переводы должны проходить модерацию перед публикацией
- **Автоматические фильтры**: Использование автоматических фильтров для обнаружения потенциально опасного контента
- **Репутационная система**: Оценка качества и надежности переводчиков
- **Механизмы отката**: Возможность отката изменений при обнаружении проблем

## Лучшие практики

- **Минимизация доверия**: Не доверять внешним источникам перевода без проверки
- **Изоляция контекста**: Разделение контекста выполнения для обработки переводов
- **Регулярные обновления**: Обновление библиотек и инструментов безопасности
- **Обучение команды**: Обучение команды разработчиков безопасности локализации
- **Документирование**: Создание документации по безопасной работе с переводами

## Связанные темы

- [[Межсайтовый-скриптинг-XSS]] - подробнее о типах XSS-атак
- [[Санитизация-ввода]] - общие принципы санитизации данных
- [[Безопасность-веб-приложений]] - комплексный подход к безопасности веб-приложений
- [[Интернационализация-приложений]] - основы реализации i18n
- [[Форматы-файлов-локализации]] - различные форматы файлов локализации
- [[Безопасность-API]] - безопасность при работе с внешними API
- [[Кодировки-и-символы]] - особенности работы с кодировками
- [[Тестирование-безопасности]] - общие принципы тестирования безопасности
- [[Управление-доступом]] - системы контроля доступа
- [[Валидация-данных]] - принципы валидации пользовательского ввода
- [[Системы-модерации]] - подходы к модерации контента
- [[Контекстное-экранирование]] - методы безопасного отображения данных
- [[Безопасность-файловых-операций]] - безопасность при работе с файлами
- [[Права-доступа-в-системах]] - управление правами доступа
- [[Аудит-безопасности]] - процессы аудита безопасности