---
aliases: [i18n-security, безопасность-локализации, безопасность-переводов]
tags: [security, i18n, l10n, best-practices, web-security]
---

# Безопасность в системах интернационализации (i18n)

## Введение в безопасность интернационализации

Интернационализация (i18n) и локализация (l10n) позволяют приложениям работать с пользователями из разных стран и регионов. Однако при реализации многоязычных систем возникают специфические угрозы безопасности, которые могут привести к серьезным уязвимостям. Безопасность в системах i18n требует особого внимания к обработке многоязычного контента, файлов локализации и динамических переводов.

## Что такое i18n и l10n

**Интернационализация (i18n)** — это процесс подготовки приложения к использованию в разных культурах и регионах. Это включает:

- Поддержку разных языков
- Работу с разными форматами дат, времени, чисел
- Учет культурных особенностей (например, направления текста)

**Локализация (l10n)** — это адаптация приложения под конкретный язык и культуру. Это включает:

- Перевод интерфейса
- Адаптацию контента под местные особенности
- Работу с региональными форматами

> [!tip] Запомните
> i18n означает "internationalization" (18 букв между i и n), а l10n означает "localization" (10 букв между l и n)

## Угрозы безопасности в системах i18n

Системы интернационализации подвержены следующим угрозам:

### 1. Внедрение вредоносного кода через переводы

Если переводы поступают из внешних источников или могут быть изменены неавторизованными пользователями, в них могут быть включены:

- JavaScript-код для XSS-атак
- HTML-теги для манипуляции интерфейсом
- CSS-правила для визуального обмана

### 2. Уязвимости при обработке языковых данных

- Неправильная обработка языковых меток
- Утечка конфиденциальной информации через языковые файлы
- Нарушение целостности переводов

### 3. Атаки через кодирование текста

- Использование нестандартных кодировок
- Обход фильтров через символы Unicode
- Попытки манипуляции с байтовыми порядками

## Уязвимости, связанные с локализацией

### 1. Небезопасное хранение переводов

Если файлы локализации хранятся в открытом виде и доступны для редактирования, это может привести к:

- Внедрению вредоносного контента
- Изменению критических переводов
- Подмене важных сообщений

### 2. Отсутствие проверки переводов

Без автоматической и ручной проверки переводов возможны:

- Вставка вредоносного кода
- Искажение смысла сообщений
- Введение пользователей в заблуждение

### 3. Уязвимости в системе выбора языка

- Параметры языка в URL могут быть подвержены атакам
- Хранение языка в cookie без защиты
- Возможность подмены языка для атак

## Атаки через переводы

### 1. XSS через переводы

Пример уязвимого кода:

```javascript
// НЕБЕЗОПАСНО
document.getElementById('message').innerHTML = translations['welcome_message'];
```

Если `translations['welcome_message']` содержит `<script>alert('XSS')</script>`, это приведет к выполнению вредоносного кода.

### 2. Подмена интерфейса

Злоумышленник может изменить переводы так, чтобы:

- Перенаправить пользователей на фишинговые страницы
- Изменить кнопки и элементы управления
- Скрыть важные предупреждения

### 3. Социальная инженерия через переводы

Неправильные или измененные переводы могут использоваться для:

- Обмана пользователей
- Вызова доверия к поддельным сообщениям
- Подмены инструкций

## Защита от XSS в переводах

### 1. Санитизация переводов

Всегда санитизируйте переводы перед отображением:

```javascript
// БЕЗОПАСНО
function sanitizeTranslation(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

document.getElementById('message').textContent = sanitizeTranslation(translations['welcome_message']);
```

### 2. Использование безопасных методов отображения

- Используйте `textContent` вместо `innerHTML`
- Применяйте фреймворки с встроенной защитой (React, Vue)
- Используйте шаблонные литералы с экранированием

### 3. Валидация переводов

- Проверяйте переводы на наличие HTML-тегов
- Ограничивайте использование специальных символов
- Проводите автоматическую проверку на наличие скриптов

## Санитизация многоязычного контента

### 1. Фильтрация специальных символов

При работе с многоязычным контентом необходимо:

- Фильтровать потенциально опасные символы Unicode
- Проверять длину строк (для предотвращения DoS-атак)
- Обрабатывать специальные символы направления текста

### 2. Проверка кодировок

- Использовать только разрешенные кодировки (UTF-8)
- Проверять соответствие кодировки содержимому
- Обрабатывать некорректные байтовые последовательности

### 3. Обработка двунаправленного текста

Для языков с правым направлением текста:

- Использовать BIDI-алгоритмы корректно
- Предотвращать манипуляции с направлением текста
- Проверять валидность BIDI-контрольных символов

## Правильное кодирование текста

### 1. Использование UTF-8

- Убедитесь, что все файлы локализации используют UTF-8
- Установите правильную кодировку в HTTP-заголовках
- Проверяйте кодировку при загрузке переводов

### 2. Экранирование специальных символов

- Экранируйте символы, которые могут быть интерпретированы как код
- Используйте HTML-сущности для специальных символов
- Обрабатывайте символы Unicode корректно

### 3. Проверка границ строк

- Проверяйте корректность завершения строк
- Обрабатывайте символы окончания строк
- Предотвращайте внедрение дополнительных строк

## Управление файлами локализации

### 1. Безопасное хранение

- Храните файлы локализации в защищенном месте
- Используйте контроль доступа к переводам
- Шифруйте чувствительные переводы

### 2. Версионирование переводов

- Используйте системы контроля версий для переводов
- Отслеживайте изменения в файлах локализации
- Проводите аудит изменений переводов

### 3. Автоматическая проверка

- Внедрите автоматическую проверку переводов
- Используйте CI/CD для проверки безопасности переводов
- Проверяйте целостность файлов локализации

## Проверка безопасности переводов

### 1. Автоматические сканеры

Используйте инструменты для проверки переводов:

- Сканирование на наличие XSS
- Проверка на наличие вредоносного кода
- Анализ структуры файлов локализации

### 2. Ручная проверка

- Проверка переводов на предмет подозрительного содержимого
- Тестирование отображения переводов
- Верификация смысла переводов

### 3. Пентестинг многоязычных приложений

- Проверка безопасности интерфейса на разных языках
- Тестирование параметров локализации
- Анализ уязвимостей в системе i18n

## Лучшие практики

### 1. Разработка безопасной системы i18n

- Используйте проверенные библиотеки локализации
- Внедряйте принцип наименьших привилегий
- Проводите регулярные аудиты безопасности

### 2. Обработка пользовательского ввода

- Санитизируйте весь пользовательский ввод
- Проверяйте кодировку вводимого текста
- Ограничивайте возможности для внедрения

### 3. Обучение команды

- Обучайте команду безопасности i18n
- Проводите регулярные тренинги
- Делитесь лучшими практиками

### 4. Мониторинг и логирование

- Логируйте попытки модификации переводов
- Мониторьте аномальное поведение системы i18n
- Отслеживайте подозрительные изменения

## Связанные темы

- [[XSS-атаки и защита]] - для понимания основных принципов защиты от внедрения кода
- [[Безопасность веб-приложений]] - общие принципы безопасности веб-приложений
- [[Кодирование и безопасность]] - вопросы кодирования текста и безопасности
- [[Многоязычные приложения]] - архитектурные аспекты многоязычных систем
- [[Защита от CSRF]] - защита от подделки межсайтовых запросов
- [[JSON-безопасность]] - безопасность при работе с JSON-данными
- [[HTTP-безопасность]] - безопасность HTTP-запросов и заголовков
- [[Unicode-безопасность]] - безопасность при работе с Unicode-символами
- [[Шаблонизация и безопасность]] - безопасность при работе с шаблонами
- [[Контент-политика безопасности]] - CSP для защиты от XSS

## Ключевые выводы

- Безопасность систем i18n требует особого внимания к обработке многоязычного контента
- Необходима санитизация всех переводов перед отображением
- Файлы локализации должны быть защищены от несанкционированного доступа
- Автоматическая проверка переводов помогает выявлять угрозы безопасности
- Регулярные аудиты и тестирование безопасности систем i18n необходимы для поддержания защищенности