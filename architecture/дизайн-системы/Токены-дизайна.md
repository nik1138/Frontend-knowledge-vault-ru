---
aliases: [Дизайн токены, Стилевые токены, CSS переменные]
tags: [design-system, tokens, frontend, styling, architecture]
---

# Токены-дизайна

## Обзор

Токены-дизайна (design tokens) — это атомарные значения, используемые для построения дизайн-системы. Они представляют собой единицы стиля (цвета, размеры, шрифты, тени и т.д.), которые можно использовать в различных технологиях и платформах. Токены позволяют централизовать и стандартизировать стилевые решения, обеспечивая консистентность интерфейсов и упрощая процесс масштабирования дизайн-системы.

Этот документ охватывает концепцию дизайн-токенов, их структуру, реализацию и использование в фронтенд-разработке.

## Понятие дизайн-токенов

### Что такое дизайн-токены

Дизайн-токены — это именованные сущности, представляющие базовые стилевые значения. Они абстрагируют конкретные значения (например, `#3b82f6`) от их семантического значения (например, `primary-color`). Это позволяет изменять внешний вид интерфейса, не переписывая код, и поддерживать согласованность стилей по всему приложению.

### Преимущества использования токенов

1. **Консистентность** — все компоненты используют одни и те же значения
2. **Масштабируемость** — изменения в токенах автоматически применяются ко всем компонентам
3. **Поддержка темизации** — легко реализовать светлую и темную темы
4. **Кроссплатформенность** — одни и те же токены могут использоваться в разных технологиях
5. **Упрощение обслуживания** — централизованное управление стилями

## Архитектура токенов

### Классификация токенов

Токены обычно классифицируются на несколько уровней:

#### 1. Семантические токены (Semantic Tokens)
Эти токены имеют конкретное назначение в интерфейсе:

```json
{
  "color": {
    "primary": {
      "main": "{color.blue.500}",
      "light": "{color.blue.300}",
      "dark": "{color.blue.700}"
    },
    "background": {
      "primary": "{color.neutral.50}",
      "secondary": "{color.neutral.100}"
    },
    "text": {
      "primary": "{color.neutral.900}",
      "secondary": "{color.neutral.600}"
    }
  }
}
```

#### 2. Атомарные токены (Atomic Tokens)
Базовые значения, не зависящие от контекста использования:

```json
{
  "color": {
    "blue": {
      "50": "#eff6ff",
      "100": "#dbeafe",
      "200": "#bfdbfe",
      "300": "#93c5fd",
      "400": "#60a5fa",
      "500": "#3b82f6",
      "600": "#2563eb",
      "700": "#1d4ed8",
      "800": "#1e40af",
      "900": "#1e3a8a"
    },
    "neutral": {
      "50": "#f9fafb",
      "100": "#f3f4f6",
      "200": "#e5e7eb",
      "300": "#d1d5db",
      "400": "#9ca3af",
      "500": "#6b7280",
      "600": "#4b5563",
      "700": "#374151",
      "800": "#1f2937",
      "900": "#111827"
    }
  },
  "spacing": {
    "xxs": "4px",
    "xs": "8px",
    "sm": "12px",
    "md": "16px",
    "lg": "24px",
    "xl": "32px",
    "xxl": "48px"
  },
  "typography": {
    "fontSize": {
      "sm": "12px",
      "md": "14px",
      "lg": "16px",
      "xl": "18px",
      "xxl": "24px"
    },
    "fontWeight": {
      "regular": "400",
      "medium": "500",
      "bold": "700"
    }
  }
}
```

### Структура токенов

Для эффективной организации токенов рекомендуется использовать иерархическую структуру:

```
tokens/
├── global/
│   ├── color/
│   │   ├── base.json
│   │   └── semantic.json
│   ├── spacing/
│   │   ├── base.json
│   │   └── semantic.json
│   ├── typography/
│   │   ├── base.json
│   │   └── semantic.json
│   └── effects/
│       ├── base.json
│       └── semantic.json
├── themes/
│   ├── light.json
│   └── dark.json
└── platforms/
    ├── web/
    ├── mobile/
    └── desktop/
```

## Реализация токенов

### JSON-формат для хранения токенов

```json
// tokens/global/color/base.json
{
  "color": {
    "red": {
      "50": { "value": "#fef2f2" },
      "100": { "value": "#fee2e2" },
      "200": { "value": "#fecaca" },
      "300": { "value": "#fca5a5" },
      "400": { "value": "#f87171" },
      "500": { "value": "#ef4444" },
      "600": { "value": "#dc2626" },
      "700": { "value": "#b91c1c" },
      "800": { "value": "#991b1b" },
      "900": { "value": "#7f1d1d" }
    },
    "blue": {
      "50": { "value": "#eff6ff" },
      "100": { "value": "#dbeafe" },
      "200": { "value": "#bfdbfe" },
      "300": { "value": "#93c5fd" },
      "400": { "value": "#60a5fa" },
      "500": { "value": "#3b82f6" },
      "600": { "value": "#2563eb" },
      "700": { "value": "#1d4ed8" },
      "800": { "value": "#1e40af" },
      "900": { "value": "#1e3a8a" }
    }
  }
}
```

```json
// tokens/global/color/semantic.json
{
  "color": {
    "primary": {
      "main": { "value": "{color.blue.500}", "type": "color" },
      "light": { "value": "{color.blue.300}", "type": "color" },
      "dark": { "value": "{color.blue.700}", "type": "color" }
    },
    "secondary": {
      "main": { "value": "{color.red.500}", "type": "color" },
      "light": { "value": "{color.red.300}", "type": "color" },
      "dark": { "value": "{color.red.700}", "type": "color" }
    },
    "background": {
      "primary": { "value": "{color.neutral.50}", "type": "color" },
      "secondary": { "value": "{color.neutral.100}", "type": "color" }
    },
    "text": {
      "primary": { "value": "{color.neutral.900}", "type": "color" },
      "secondary": { "value": "{color.neutral.600}", "type": "color" },
      "inverse": { "value": "{color.neutral.50}", "type": "color" }
    }
  }
}
```

### Генерация токенов для разных платформ

Для использования токенов в разных платформах (CSS, JS, Android, iOS и т.д.) рекомендуется использовать инструменты автоматической генерации, такие как Style Dictionary или Theo.

```javascript
// build-tokens.js
const StyleDictionary = require('style-dictionary');

StyleDictionary.registerTransform({
  name: 'size/px',
  type: 'value',
  matcher: (token) => token.attributes.category === 'size',
  transformer: (token) => `${token.value}px`,
});

StyleDictionary.extend({
  source: ['tokens/**/*.json'],
  platforms: {
    css: {
      transformGroup: 'css',
      buildPath: 'dist/css/',
      files: [{
        destination: '_tokens.css',
        format: 'css/variables',
      }]
    },
    js: {
      transformGroup: 'js',
      buildPath: 'dist/js/',
      files: [{
        destination: 'tokens.js',
        format: 'javascript/es6',
      }]
    }
  }
}).buildAllPlatforms();
```

### CSS-переменные из токенов

```css
/* dist/css/_tokens.css */
:root {
  /* Цвета */
  --color-red-50: #fef2f2;
  --color-red-100: #fee2e2;
  --color-red-200: #fecaca;
  --color-red-300: #fca5a5;
  --color-red-400: #f87171;
  --color-red-500: #ef4444;
  --color-red-600: #dc2626;
  --color-red-700: #b91c1c;
  --color-red-800: #991b1b;
  --color-red-900: #7f1d1d;

  /* Семантические цвета */
  --color-primary-main: var(--color-blue-500);
  --color-primary-light: var(--color-blue-300);
  --color-primary-dark: var(--color-blue-700);
  --color-background-primary: var(--color-neutral-50);
  --color-background-secondary: var(--color-neutral-100);
  --color-text-primary: var(--color-neutral-900);
  --color-text-secondary: var(--color-neutral-600);

  /* Отступы */
  --spacing-xxs: 4px;
  --spacing-xs: 8px;
  --spacing-sm: 12px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;
  --spacing-xxl: 48px;

  /* Типографика */
  --typography-font-size-sm: 12px;
  --typography-font-size-md: 14px;
  --typography-font-size-lg: 16px;
  --typography-font-size-xl: 18px;
  --typography-font-size-xxl: 24px;
  --typography-font-weight-regular: 400;
  --typography-font-weight-medium: 500;
  --typography-font-weight-bold: 700;
}
```

### JavaScript-модуль с токенами

```javascript
// dist/js/tokens.js
export const ColorTokens = {
  red: {
    "50": "#fef2f2",
    "100": "#fee2e2",
    "200": "#fecaca",
    "300": "#fca5a5",
    "400": "#f87171",
    "500": "#ef4444",
    "600": "#dc2626",
    "700": "#b91c1c",
    "800": "#991b1b",
    "900": "#7f1d1d"
  },
  blue: {
    "50": "#eff6ff",
    "100": "#dbeafe",
    "200": "#bfdbfe",
    "300": "#93c5fd",
    "400": "#60a5fa",
    "500": "#3b82f6",
    "600": "#2563eb",
    "700": "#1d4ed8",
    "800": "#1e40af",
    "900": "#1e3a8a"
  },
  primary: {
    main: "#3b82f6",
    light: "#93c5fd",
    dark: "#1d4ed8"
  },
  background: {
    primary: "#f9fafb",
    secondary: "#f3f4f6"
  },
  text: {
    primary: "#111827",
    secondary: "#6b7280",
    inverse: "#f9fafb"
  }
};

export const SpacingTokens = {
  xxs: "4px",
  xs: "8px",
  sm: "12px",
  md: "16px",
  lg: "24px",
  xl: "32px",
  xxl: "48px"
};

export const TypographyTokens = {
  fontSize: {
    sm: "12px",
    md: "14px",
    lg: "16px",
    xl: "18px",
    xxl: "24px"
  },
  fontWeight: {
    regular: 400,
    medium: 500,
    bold: 700
  }
};
```

## Использование токенов в компонентах

### В CSS с использованием CSS-переменных

```css
/* components/Button/Button.css */
.button {
  background-color: var(--color-primary-main);
  color: var(--color-text-inverse);
  border: none;
  padding: var(--spacing-md) var(--spacing-xl);
  border-radius: var(--border-radius-medium);
  font-size: var(--typography-font-size-md);
  font-weight: var(--typography-font-weight-medium);
  cursor: pointer;
  transition: background-color var(--transition-duration-fast) ease;
}

.button:hover {
  background-color: var(--color-primary-dark);
}

.button--secondary {
  background-color: var(--color-background-secondary);
  color: var(--color-text-primary);
}

.button--secondary:hover {
  background-color: var(--color-neutral-200);
}
```

### В JavaScript/TypeScript с использованием объектов токенов

```tsx
// components/Button/Button.styles.ts
import { css } from '@emotion/react';
import { ColorTokens, SpacingTokens, TypographyTokens } from '../../tokens';

export const getButtonStyles = ({ 
  variant = 'primary', 
  size = 'medium' 
}: { 
  variant?: 'primary' | 'secondary'; 
  size?: 'small' | 'medium' | 'large' 
}) => {
  const sizeMap = {
    small: {
      padding: `${SpacingTokens.xs} ${SpacingTokens.sm}`,
      fontSize: TypographyTokens.fontSize.sm
    },
    medium: {
      padding: `${SpacingTokens.md} ${SpacingTokens.lg}`,
      fontSize: TypographyTokens.fontSize.md
    },
    large: {
      padding: `${SpacingTokens.lg} ${SpacingTokens.xl}`,
      fontSize: TypographyTokens.fontSize.lg
    }
  };

  const variantMap = {
    primary: {
      backgroundColor: ColorTokens.primary.main,
      color: ColorTokens.text.inverse,
      hoverColor: ColorTokens.primary.dark
    },
    secondary: {
      backgroundColor: ColorTokens.background.secondary,
      color: ColorTokens.text.primary,
      hoverColor: ColorTokens.neutral[200]
    }
  };

  const { padding, fontSize } = sizeMap[size];
  const { backgroundColor, color, hoverColor } = variantMap[variant];

  return css`
    background-color: ${backgroundColor};
    color: ${color};
    border: none;
    padding: ${padding};
    border-radius: ${SpacingTokens.sm};
    font-size: ${fontSize};
    font-weight: ${TypographyTokens.fontWeight.medium};
    cursor: pointer;
    transition: background-color 0.2s ease;

    &:hover {
      background-color: ${hoverColor};
    }

    &:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
  `;
};
```

### В SCSS с импортом токенов

```scss
// components/Card/_Card.scss
@import '../../tokens/scss/tokens';

.card {
  background-color: var(--color-background-primary);
  border: 1px solid var(--color-border-default);
  border-radius: var(--border-radius-medium);
  padding: var(--spacing-lg);
  box-shadow: var(--elevation-medium);
  
  &--featured {
    border-color: var(--color-primary-main);
    border-width: 2px;
  }
  
  &__header {
    margin-bottom: var(--spacing-md);
    font-size: var(--typography-font-size-xl);
    font-weight: var(--typography-font-weight-bold);
    color: var(--color-text-primary);
  }
  
  &__content {
    color: var(--color-text-secondary);
    line-height: var(--typography-line-height-medium);
  }
}
```

## Темизация с использованием токенов

### Создание тем

```json
// tokens/themes/light.json
{
  "color": {
    "background": {
      "primary": "{color.neutral.50}",
      "secondary": "{color.neutral.100}"
    },
    "text": {
      "primary": "{color.neutral.900}",
      "secondary": "{color.neutral.600}"
    },
    "border": {
      "default": "{color.neutral.300}"
    }
  }
}
```

```json
// tokens/themes/dark.json
{
  "color": {
    "background": {
      "primary": "{color.neutral.900}",
      "secondary": "{color.neutral.800}"
    },
    "text": {
      "primary": "{color.neutral.50}",
      "secondary": "{color.neutral.400}"
    },
    "border": {
      "default": "{color.neutral.700}"
    }
  }
}
```

### Реализация переключения тем

```tsx
// ThemeProvider.tsx
import React, { createContext, useContext, ReactNode } from 'react';
import { ColorTokens } from '../tokens';

interface ThemeContextType {
  theme: 'light' | 'dark';
  toggleTheme: () => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const ThemeProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [theme, setTheme] = React.useState<'light' | 'dark'>('light');

  const toggleTheme = () => {
    setTheme(prev => prev === 'light' ? 'dark' : 'light');
  };

  React.useEffect(() => {
    document.documentElement.setAttribute('data-theme', theme);
  }, [theme]);

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};
```

```css
/* themes.css */
[data-theme="light"] {
  --color-background-primary: #f9fafb;
  --color-background-secondary: #f3f4f6;
  --color-text-primary: #111827;
  --color-text-secondary: #6b7280;
  --color-border-default: #d1d5db;
}

[data-theme="dark"] {
  --color-background-primary: #111827;
  --color-background-secondary: #1f2937;
  --color-text-primary: #f9fafb;
  --color-text-secondary: #d1d5db;
  --color-border-default: #374151;
}
```

## Расширенные возможности токенов

### Условные токены

```json
{
  "component": {
    "button": {
      "primary": {
        "background": {
          "default": "{color.primary.main}",
          "hover": "{color.primary.dark}",
          "active": "{color.primary.darker}",
          "disabled": "{color.neutral.300}"
        }
      }
    }
  }
}
```

### Токены для адаптивности

```json
{
  "breakpoints": {
    "mobile": "0px",
    "tablet": "768px",
    "desktop": "1024px",
    "large": "1440px"
  },
  "spacing": {
    "mobile": {
      "sm": "8px",
      "md": "12px",
      "lg": "16px"
    },
    "desktop": {
      "sm": "12px",
      "md": "16px",
      "lg": "24px"
    }
  }
}
```

### Токены для анимаций

```json
{
  "transition": {
    "duration": {
      "fast": "100ms",
      "normal": "250ms",
      "slow": "500ms"
    },
    "timing": {
      "ease": "ease",
      "ease-in": "ease-in",
      "ease-out": "ease-out",
      "ease-in-out": "ease-in-out",
      "linear": "linear"
    },
    "property": {
      "common": "all",
      "color": "color, background-color, border-color",
      "opacity": "opacity",
      "transform": "transform"
    }
  },
  "elevation": {
    "none": "none",
    "small": "0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",
    "medium": "0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",
    "large": "0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"
  }
}
```

## Лучшие практики работы с токенами

### 1. Семантическое именование

Используйте семантические имена, отражающие назначение токена:

```json
// Хорошо
{
  "color": {
    "primary": {
      "main": "#3b82f6",
      "light": "#93c5fd",
      "dark": "#1d4ed8"
    },
    "background": {
      "primary": "#ffffff",
      "secondary": "#f9fafb"
    },
    "text": {
      "primary": "#111827",
      "secondary": "#6b7280"
    }
  }
}

// Плохо
{
  "color": {
    "blue500": "#3b82f6",
    "lightGray": "#f9fafb",
    "darkText": "#111827"
  }
}
```

### 2. Иерархическая структура

Организуйте токены в логическую иерархию:

```json
{
  "size": {
    "font": {
      "small": "12px",
      "medium": "14px",
      "large": "16px"
    },
    "spacing": {
      "xsmall": "4px",
      "small": "8px",
      "medium": "16px",
      "large": "24px"
    },
    "border": {
      "width": {
        "thin": "1px",
        "thick": "2px"
      }
    }
  }
}
```

### 3. Документирование токенов

Каждый токен должен быть задокументирован:

```json
{
  "color": {
    "primary": {
      "main": {
        "value": "#3b82f6",
        "type": "color",
        "description": "Основной цвет бренда, используется для акцентных элементов"
      }
    }
  }
}
```

### 4. Валидация токенов

Реализуйте валидацию токенов для проверки их корректности:

```javascript
// validate-tokens.js
const fs = require('fs');
const path = require('path');

function validateTokens(tokens, filePath) {
  let isValid = true;
  
  function checkToken(token, keyPath) {
    if (typeof token === 'object' && token !== null) {
      if (token.hasOwnProperty('value')) {
        // Это конкретный токен
        if (!token.hasOwnProperty('type')) {
          console.warn(`Токен ${keyPath} не имеет типа в ${filePath}`);
        }
        if (typeof token.value !== 'string') {
          console.error(`Значение токена ${keyPath} должно быть строкой в ${filePath}`);
          isValid = false;
        }
      } else {
        // Это группа токенов
        Object.keys(token).forEach(key => {
          checkToken(token[key], `${keyPath}.${key}`);
        });
      }
    }
  }
  
  checkToken(tokens, '');
  return isValid;
}

// Использование
const tokenFiles = [
  'tokens/global/color/base.json',
  'tokens/global/color/semantic.json'
];

tokenFiles.forEach(file => {
  const tokens = JSON.parse(fs.readFileSync(file, 'utf8'));
  const isValid = validateTokens(tokens, file);
  console.log(`${file}: ${isValid ? 'Валидация пройдена' : 'Ошибки валидации'}`);
});
```

## Инструменты для работы с токенами

### Style Dictionary

Style Dictionary — это инструмент от Amazon, который позволяет определять токены в одном месте и генерировать их для разных платформ:

```javascript
// config.json
{
  "source": ["tokens/**/*.json"],
  "platforms": {
    "css": {
      "transformGroup": "css",
      "buildPath": "dist/css/",
      "files": [{
        "destination": "variables.css",
        "format": "css/variables"
      }]
    },
    "scss": {
      "transformGroup": "scss",
      "buildPath": "dist/scss/",
      "files": [{
        "destination": "_variables.scss",
        "format": "scss/variables"
      }]
    },
    "js": {
      "transformGroup": "js",
      "buildPath": "dist/js/",
      "files": [{
        "destination": "tokens.js",
        "format": "javascript/es6"
      }]
    }
  }
}
```

### Theo

Theo — это инструмент от Salesforce для преобразования дизайн-токенов в различные форматы:

```yaml
# theo.config.yml
transform: raw
formats:
  - custom/format.js
resolve:
  color:
    - raw
  size:
    - rem
```

## Заключение

Токены-дизайна являются фундаментальной частью современной дизайн-системы. Они обеспечивают централизованное управление стилевыми значениями, упрощают поддержку и масштабирование интерфейсов, а также позволяют легко реализовать темизацию и адаптивность.

Для успешной реализации токенов важно следовать лучшим практикам именования, использовать иерархическую структуру и автоматизировать процесс генерации токенов для различных платформ.

Для более глубокого понимания применения токенов в компонентах рекомендуется ознакомиться с [[Компоненты-дизайна]] и [[Создание-дизайн-системы]].