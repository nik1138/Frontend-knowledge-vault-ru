---
aliases: [Bundlers, Бандлеры, Модульные бандлеры, Сборка модулей]
tags: [frontend, architecture, build-tools, modules]
---

# Бандлеры

## Обзор

Бандлеры - это инструменты, которые объединяют модули JavaScript и другие ресурсы в один или несколько файлов (бандлов) для использования в браузере. Они анализируют зависимости между модулями и создают оптимизированные бандлы, готовые к развертыванию.

## Основные функции бандлеров

- **Разрешение зависимостей** - анализ и объединение модулей
- **Объединение файлов** - создание бандлов из множества файлов
- **Минификация** - уменьшение размера бандлов
- **Оптимизация** - tree shaking, code splitting, lazy loading
- **Преобразование кода** - транспиляция и трансформация

## Популярные бандлеры

### 1. Webpack

> [!info] Webpack
> Один из самых популярных бандлеров с мощной системой плагинов и лоадеров.

```javascript
// webpack.config.js
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.[contenthash].js',
    path: path.resolve(__dirname, 'dist'),
    clean: true
  },
  module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: ['@babel/preset-env', '@babel/preset-react']
          }
        }
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      }
    ]
  },
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendor: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all',
        }
      }
    }
  }
};
```

### 2. Rollup

> [!info] Rollup
> Бандлер, оптимизированный для создания библиотек с поддержкой ES-модулей.

```javascript
// rollup.config.js
import resolve from '@rollup/plugin-node-resolve';
import commonjs from '@rollup/plugin-commonjs';
import babel from '@rollup/plugin-babel';

export default {
  input: 'src/main.js',
  output: {
    file: 'dist/bundle.js',
    format: 'es',
    sourcemap: true
  },
  plugins: [
    resolve(),
    commonjs(),
    babel({
      babelHelpers: 'bundled',
      exclude: 'node_modules/**'
    })
  ]
};
```

### 3. Parcel

> [!info] Parcel
> Бандлер "из коробки" с минимальной конфигурацией.

```javascript
// package.json
{
  "scripts": {
    "start": "parcel index.html",
    "build": "parcel build index.html"
  },
  "devDependencies": {
    "parcel": "^2.0.0"
  }
}
```

### 4. Vite

> [!info] Vite
> Современный бандлер с быстрой загрузкой, использующий ES-модули в браузере.

```javascript
// vite.config.js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['react', 'react-dom'],
          ui: ['@mui/material', '@emotion/react']
        }
      }
    }
  }
});
```

## Типы бандлов

### 1. Single Bundle

Создает один файл для всего приложения:

```javascript
// webpack.config.js
module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'app.js'
  }
};
```

### 2. Code Splitting

Разделяет код на несколько бандлов:

```javascript
// Динамический импорт для разделения кода
const loadLodash = async () => {
  const { default: _ } = await import('lodash');
  return _;
};
```

### 3. Vendor Bundles

Отдельный бандл для зависимостей:

```javascript
// webpack.config.js
optimization: {
  splitChunks: {
    chunks: 'all',
    cacheGroups: {
      vendor: {
        test: /[\\/]node_modules[\\/]/,
        name: 'vendors',
        chunks: 'all',
      }
    }
  }
}
```

## Оптимизация бандлов

### Tree Shaking

Удаление неиспользуемого кода:

```javascript
// utils.js
export const add = (a, b) => a + b;
export const subtract = (a, b) => a - b;

// main.js
import { add } from './utils.js'; // Только импорт add
// subtract будет удален при tree shaking
```

### Lazy Loading

Отложенная загрузка частей приложения:

```javascript
import { lazy } from 'react';

const LazyComponent = lazy(() => import('./LazyComponent'));
```

### Preloading

Предварительная загрузка критических ресурсов:

```javascript
// preload важных модулей
import('./critical-module.js').then(module => {
  // Использование модуля
});
```

## Анализ бандлов

Для анализа размера бандлов используйте инструменты:

```bash
# Для Webpack
npm install --save-dev webpack-bundle-analyzer

# В конфигурации Webpack
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin;

module.exports = {
  plugins: [
    new BundleAnalyzerPlugin()
  ]
};
```

## Лучшие практики

1. **Разделяйте код** с помощью динамических импортов
2. **Используйте tree shaking** для удаления неиспользуемого кода
3. **Оптимизируйте vendor бандлы** для лучшего кэширования
4. **Анализируйте размеры бандлов** регулярно
5. **Используйте правильные форматы модулей** (ESM, CJS)

## Сравнение бандлеров

| Бандлер | Скорость | Гибкость | Сложность | Использование |
|---------|----------|-----------|------------|----------------|
| Webpack | Средняя | Высокая | Высокая | Сложные приложения |
| Rollup | Высокая | Средняя | Средняя | Библиотеки |
| Parcel | Высокая | Низкая | Низкая | Простые проекты |
| Vite | Очень высокая | Средняя | Средняя | Современные приложения |

## См. также

- [[Системы-сборки]]
- [[Транспиляторы]]
- [[Линтеры]]
- [[Форматтеры]]
- [[Webpack]]
- [[Rollup]]
- [[Vite]]

## Ключевые выводы

- Бандлеры объединяют модули в оптимизированные бандлы
- Выбор бандлера зависит от типа проекта (приложение или библиотека)
- Оптимизация бандлов критична для производительности приложения