---
aliases: [Formatters, Форматтеры, Форматирование кода, Автоформатирование]
tags: [frontend, architecture, quality-tools, development]
---

# Форматтеры

## Обзор

Форматтеры - это инструменты, которые автоматически форматируют код в соответствии с заданными правилами стиля. В отличие от линтеров, которые только указывают на проблемы, форматтеры активно изменяют код, обеспечивая единообразный стиль во всем проекте без ручного вмешательства разработчика.

## Основные функции форматтеров

- **Автоматическое форматирование** - приведение кода к единому стилю
- **Согласование отступов** - установка правильных отступов и пробелов
- **Выравнивание кода** - организация структуры кода
- **Согласование кавычек** - унификация кавычек и скобок
- **Оптимизация читаемости** - улучшение восприятия кода

## Популярные форматтеры

### 1. Prettier

> [!info] Prettier
> Один из самых популярных форматтеров с минимальной настройкой и широкой поддержкой языков.

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2,
  "useTabs": false,
  "bracketSpacing": true,
  "arrowParens": "avoid",
  "endOfLine": "lf"
}
```

Пример форматирования:

```javascript
// До форматирования
function  greetUser( name,age  ) { if ( name &&  age > 0 ) { return `Hello, ${ name }! You are ${ age } years old.`; } else { return 'Invalid input'; }}

// После форматирования Prettier
function greetUser(name, age) {
  if (name && age > 0) {
    return `Hello, ${name}! You are ${age} years old.`;
  } else {
    return 'Invalid input';
  }
}
```

### 2. beautify (для HTML, CSS, JS)

> [!info] beautify
> Форматтер для веб-технологий, доступен в различных IDE и как отдельный инструмент.

```json
// .jsbeautifyrc
{
  "html": {
    "indent_size": 2,
    "indent_char": " ",
    "max_preserve_newlines": 2
  },
  "css": {
    "indent_size": 2,
    "indent_char": " "
  },
  "js": {
    "indent_size": 2,
    "indent_char": " ",
    "preserve-newlines": true
  }
}
```

### 3. Black (для Python)

> [!info] Black
> Форматтер для Python, следующий философии "опinionated" форматирования.

### 4. rustfmt (для Rust)

> [!info] rustfmt
> Форматтер для языка Rust, интегрированный с инструментами языка.

## Конфигурация форматтеров

### Prettier - основные опции

```json
{
  "semi": true,                    // использовать точки с запятой
  "trailingComma": "es5",         // запятые в конце массивов/объектов
  "singleQuote": true,            // использовать одинарные кавычки
  "printWidth": 80,               // максимальная ширина строки
  "tabWidth": 2,                  // размер табуляции
  "useTabs": false,               // использовать пробелы вместо табов
  "bracketSpacing": true,         // пробелы в скобках объектов
  "arrowParens": "avoid",         // скобки у стрелочных функций
  "endOfLine": "lf"               // символ конца строки
}
```

### Игнорирование файлов

```ignore
# .prettierignore
node_modules/
dist/
build/
*.min.js
coverage/
*.svg
```

## Интеграция с системами сборки

### Webpack

```javascript
// webpack.config.js
const PrettierPlugin = require('@prettier/webpack-plugin');

module.exports = {
  plugins: [
    new PrettierPlugin({
      parser: 'babel',
      singleQuote: true,
      trailingComma: 'es5'
    })
  ]
};
```

### Vite

Prettier обычно интегрируется через плагины или в процессе разработки, а не в сборке.

## Интеграция с редакторами

### VS Code

```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[javascript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[typescript]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[html]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[css]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  },
  "[json]": {
    "editor.defaultFormatter": "esbenp.prettier-vscode"
  }
}
```

## Использование в командной строке

```bash
# Форматирование всех файлов
npx prettier --write .

# Проверка форматирования (без изменений)
npx prettier --check .

# Форматирование конкретных файлов
npx prettier --write "src/**/*.{js,jsx,ts,tsx,css,md}"

# Форматирование с кастомной конфигурацией
npx prettier --config .prettierrc --write src/
```

## Совместимость с линтерами

### ESLint + Prettier

```json
// package.json
{
  "devDependencies": {
    "eslint": "^8.0.0",
    "prettier": "^2.0.0",
    "eslint-config-prettier": "^8.0.0",
    "eslint-plugin-prettier": "^4.0.0"
  }
}
```

```javascript
// .eslintrc.js
module.exports = {
  extends: [
    'eslint:recommended',
    'plugin:react/recommended',
    'prettier' // Отключение конфликтующих правил
  ],
  plugins: ['prettier'],
  rules: {
    'prettier/prettier': 'error' // Проверка форматирования как ошибка ESLint
  }
};
```

## Практические примеры форматирования

### JavaScript

```javascript
// До
const users = [
{name:'John',age:30},
{ name: 'Jane', age: 25 }
];
const getUserInfo = (user) => {
return `${user.name} (${user.age})`;
};

// После Prettier
const users = [
  { name: 'John', age: 30 },
  { name: 'Jane', age: 25 },
];

const getUserInfo = (user) => {
  return `${user.name} (${user.age})`;
};
```

### CSS

```css
/* До */
.container{display:flex;flex-direction:column;align-items:center;justify-content:space-between;}

/* После Prettier */
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
}
```

### JSX

```jsx
// До
function App() {
return (
<div className="app">
<h1>Welcome</h1>
<button onClick={() => console.log('clicked')}>Click me</button>
</div>
);
}

// После Prettier
function App() {
  return (
    <div className="app">
      <h1>Welcome</h1>
      <button onClick={() => console.log('clicked')}>Click me</button>
    </div>
  );
}
```

## Преимущества использования форматтеров

1. **Экономия времени** - нет необходимости вручную форматировать код
2. **Единообразие** - одинаковый стиль во всем проекте
3. **Уменьшение конфликтов** - меньше споров о стиле в команде
4. **Улучшенная читаемость** - консистентный формат улучшает восприятие
5. **Профессиональный вид** - код выглядит аккуратно и профессионально

## Лучшие практики

1. **Настройте форматтер на ранней стадии проекта**
2. **Интегрируйте форматирование в процесс сохранения файла**
3. **Используйте Git hooks** для форматирования перед коммитом
4. **Согласуйте настройки** с командой разработчиков
5. **Регулярно обновляйте конфигурации** и зависимости

## Git Hooks для форматирования

```json
// package.json
{
  "scripts": {
    "format": "prettier --write .",
    "format:check": "prettier --check ."
  },
  "devDependencies": {
    "husky": "^7.0.0",
    "lint-staged": "^12.0.0"
  },
  "lint-staged": {
    "*.{js,jsx,ts,tsx,css,scss,md,json}": [
      "prettier --write",
      "git add"
    ]
  },
  "husky": {
    "hooks": {
      "pre-commit": "lint-staged"
    }
  }
}
```

## Сравнение форматтеров

| Форматтер | Языки | Философия | Гибкость | Использование |
|-----------|-------|-----------|-----------|----------------|
| Prettier | Много | Opinionated | Низкая | Универсальный выбор |
| beautify | HTML/CSS/JS | Configurable | Высокая | Специфические случаи |
| Black | Python | Opinionated | Низкая | Python проекты |
| rustfmt | Rust | Configurable | Средняя | Rust проекты |

## См. также

- [[Системы-сборки]]
- [[Бандлеры]]
- [[Транспиляторы]]
- [[Линтеры]]
- [[ESLint]]
- [[Prettier]]
- [[Stylelint]]

## Ключевые выводы

- Форматтеры автоматически приводят код к единому стилю
- Prettier - наиболее популярный форматтер с минимальной настройкой
- Интеграция форматтера в процесс разработки повышает качество кода