---
tags: [programming, regexp, syntax, frontend, javascript]
aliases: [синтаксис-регулярных-выражений, regexp-syntax]
---

# Синтаксис регулярных выражений

Синтаксис регулярных выражений определяет правила построения паттернов для поиска, сопоставления и манипуляции строками. Понимание синтаксиса критически важно для эффективного использования регулярных выражений в веб-разработке.

## Базовые элементы синтаксиса

### Буквенные символы

Буквенные символы соответствуют самим себе:

```javascript
const text = "Привет, мир!";
const regex = /Привет/;

console.log(regex.test(text)); // true
```

### Специальные символы

Следующие символы имеют специальное значение в регулярных выражениях:
`. ^ $ * + ? { } [ ] \ | ( )`

Чтобы использовать их буквально, нужно экранировать символом `\`:

```javascript
const text = "Цена: $10.99";
const dollarRegex = /\$\d+\.\d+/; // Ищем $, затем цифры, точку и снова цифры

console.log(text.match(dollarRegex)); // ['$10.99']
```

## Квантификаторы

Квантификаторы определяют, сколько раз должен встречаться предыдущий элемент.

### `*` - ноль или более раз

```javascript
const text = "aa aaa a b";
const regex = /a*/;

console.log(text.match(regex)); // ['aa', 'aaa', 'a', ''] - находит все последовательности 'a'
```

### `+` - один или более раз

```javascript
const text = "a aa aaa b";
const regex = /a+/g;

console.log([...text.matchAll(regex)].map(m => m[0])); // ['a', 'aa', 'aaa']
```

### `?` - ноль или один раз

```javascript
// Необязательный символ
const text = "color colour";
const regex = /colou?r/g;

console.log(text.match(regex)); // ['color', 'colour']
```

### `{n}` - ровно n раз

```javascript
// Ровно 3 цифры
const text = "12 123 1234 12345";
const regex = /\d{3}/g;

console.log(text.match(regex)); // ['123', '123', '451'] - не совсем то, что ожидается
```

### `{n,}` - n или более раз

```javascript
// 3 или более цифр
const text = "12 123 1234 12345";
const regex = /\d{3,}/g;

console.log(text.match(regex)); // ['123', '1234', '12345']
```

### `{n,m}` - от n до m раз

```javascript
// От 2 до 4 цифр
const text = "1 12 123 1234 12345";
const regex = /\d{2,4}/g;

console.log(text.match(regex)); // ['12', '123', '1234', '1234'] - последняя 5 не включена
```

## Классы символов

### `\d` - цифры (0-9)

```javascript
const text = "У меня 123 яблока и 45 груш";
const regex = /\d+/g;

console.log(text.match(regex)); // ['123', '45']
```

### `\w` - "словообразующие" символы (буквы, цифры, подчеркивание)

```javascript
const text = "user_name123 @email.com";
const regex = /\w+/g;

console.log(text.match(regex)); // ['user_name123', 'email']
```

### `\s` - пробельные символы

```javascript
const text = "Привет\tмир\n!";
const regex = /\s/g;

console.log(text.match(regex)); // ['\t', '\n']
```

### Обратные классы: `\D`, `\W`, `\S`

```javascript
const text = "abc123def456";
const nonDigitsRegex = /\D+/g;

console.log(text.match(nonDigitsRegex)); // ['abc', 'def']
```

## Наборы символов

### `[abc]` - любой из указанных символов

```javascript
const text = "cat, bat, rat, sat";
const regex = /[br]at/g;

console.log(text.match(regex)); // ['bat', 'rat']
```

### `[^abc]` - любой символ, кроме указанных

```javascript
const text = "cat bat rat sat";
const regex = /c[^a]t/g;

console.log(text.match(regex)); // [] - не найдено, так как все после 'c' и перед 't' - это 'a'
```

### Диапазоны: `[a-z]`, `[A-Z]`, `[0-9]`

```javascript
// Только строчные буквы
const text = "Hello World 123!";
const regex = /[a-z]+/g;

console.log(text.match(regex)); // ['ello', 'orld']
```

## Якоря

### `^` - начало строки

```javascript
const text = "Привет, мир!\nКак дела?";
const regex = /^Привет/gm; // флаг m для многострочного режима

console.log([...text.matchAll(regex)].map(m => m[0])); // ['Привет']
```

### `$` - конец строки

```javascript
const text = "Привет, мир!\nПока";
const regex = /Пока$/gm;

console.log([...text.matchAll(regex)].map(m => m[0])); // ['Пока']
```

### `\b` - граница слова

```javascript
const text = "test testing tester";
const regex = /\btest\b/g;

console.log(text.match(regex)); // ['test'] - не включает 'testing' и 'tester'
```

## Практические примеры синтаксиса в веб-разработке

### Валидация сложного пароля

```javascript
// Пароль: 8-20 символов, минимум одна заглавная, одна строчная, одна цифра и один специальный символ
const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,20}$/;

function validatePassword(password) {
  return passwordRegex.test(password);
}

console.log(validatePassword("MyPass123!")); // true
console.log(validatePassword("mypass123!")); // false - нет заглавной буквы
```

### Извлечение доменов из URL

```javascript
function extractDomains(urls) {
  // Извлекаем домены из списка URL
  const domainRegex = /https?:\/\/(?:www\.)?([^\/\?#]+)/gi;
  const domains = new Set(); // Используем Set для уникальности
  
  for (const url of urls) {
    const match = url.match(domainRegex);
    if (match) {
      for (const fullMatch of match) {
        const domainMatch = fullMatch.match(domainRegex)[0];
        const extractedDomain = domainMatch.match(/https?:\/\/(?:www\.)?([^\/\?#]+)/i)[1];
        domains.add(extractedDomain);
      }
    }
  }
  
  return Array.from(domains);
}

const urls = [
  "https://example.com/page1",
  "http://www.test.org/path",
  "https://api.example.com/v1/users"
];

console.log(extractDomains(urls)); // ['example.com', 'test.org', 'api.example.com']
```

### Валидация формата даты

```javascript
// Проверка формата даты DD/MM/YYYY или DD-MM-YYYY
const dateRegex = /^(0[1-9]|[12][0-9]|3[01])[-\/](0[1-9]|1[0-2])[-\/]\d{4}$/;

function validateDate(dateString) {
  return dateRegex.test(dateString);
}

console.log(validateDate("25/12/2023")); // true
console.log(validateDate("32/01/2023")); // false
console.log(validateDate("25-12-2023")); // true
```

### Проверка и форматирование телефонного номера

```javascript
// Паттерн для международного формата номера телефона
const phoneRegex = /^(\+?\d{1,3}[-.\s]?)?\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}$/;

function formatPhone(phone) {
  // Удаляем все нецифровые символы, кроме +
  const cleanPhone = phone.replace(/[^\d+]/g, '');
  
  // Проверяем, начинается ли с +
  const hasPlus = cleanPhone.startsWith('+');
  const digits = hasPlus ? cleanPhone.substring(1) : cleanPhone;
  
  // Форматируем как +X (XXX) XXX-XXXX
  if (digits.length === 10) {
    const formatted = digits.replace(/(\d{3})(\d{3})(\d{4})/, "($1) $2-$3");
    return hasPlus ? `+${formatted}` : formatted;
  }
  
  return phone; // Возвращаем исходный, если не подходит формат
}

console.log(formatPhone("1234567890")); // "(123) 456-7890"
console.log(formatPhone("+1 123 456 7890")); // "+(123) 456-7890"
```

## Продвинутые элементы синтаксиса

### Позитивная и негативная опережающая проверка (Lookahead)

```javascript
// Позитивная опережающая проверка: (?=...)
// Найти все слова, за которыми следует определенный шаблон
const text = "password123, username456, email789";
const regex = /\w+(?=\d{3})/g; // Найти слова, за которыми следуют 3 цифры

console.log(text.match(regex)); // ['password', 'username', 'email']

// Негативная опережающая проверка: (?!...)
// Найти все слова, за которыми НЕ следуют 3 цифры
const text2 = "password123, username, email789";
const regex2 = /\w+(?!\d{3})\b/g; // Найти слова, за которыми НЕ следуют 3 цифры

console.log(text2.match(regex2)); // ['ssword', ' username', 'ail'] - не совсем то, что ожидается
```

### Позитивная и негативная ретроспективная проверка (Lookbehind) - ES2018

```javascript
// Позитивная ретроспективная проверка: (?<=...)
// Найти числа, перед которыми стоит знак $
const text = "Цена: $10.99, скидка: $5, налог: 1.50";
const priceRegex = /(?<=\$)\d+(\.\d+)?/g; // Найти числа после $

console.log(text.match(priceRegex)); // ['10', '99', '5'] - не совсем корректно, нужен другой подход

// Правильный пример:
const text2 = "Цена: $10.99, скидка: $5, налог: 1.50";
const fullPriceRegex = /(?<=\$)\d+(?:\.\d{2})?/g; // Найти полные цены после $

console.log(text2.match(fullPriceRegex)); // ['10.99', '5'] - почти, но не совсем
```

## Практические советы

### Экранирование специальных символов

```javascript
// Функция для экранирования специальных символов в строке для использования в регулярном выражении
function escapeRegExp(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

const userInput = "What is $10 + $20?"; // Пользовательский ввод с особыми символами
const escapedInput = escapeRegExp(userInput);
const regex = new RegExp(escapedInput, 'i');

console.log(regex.test("What is $10 + $20? Answer: $30")); // true
```

### Создание динамических регулярных выражений

```javascript
// Создание регулярного выражения на основе пользовательского ввода
function createSearchRegex(searchTerm, caseSensitive = false) {
  const escapedTerm = escapeRegExp(searchTerm);
  const flags = caseSensitive ? 'g' : 'gi';
  return new RegExp(escapedTerm, flags);
}

const searchTerm = "JavaScript";
const regex = createSearchRegex(searchTerm);
console.log(regex.test("I love JavaScript programming")); // true
```

## Следующие шаги

После изучения синтаксиса рекомендуется перейти к:

- [[Паттерны регулярных выражений]]
- [[Группы в регулярных выражениях]]
- [[Практические примеры]]