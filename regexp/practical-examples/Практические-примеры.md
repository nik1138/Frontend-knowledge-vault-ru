---
tags: [programming, regexp, practical, frontend, javascript, examples]
aliases: [практические-примеры-регулярных-выражений, regexp-examples]
---

# Практические примеры использования регулярных выражений

В этой статье рассмотрим реальные примеры использования регулярных выражений в веб-разработке. Мы покажем, как регулярные выражения помогают решать повседневные задачи, связанные с обработкой строк, валидацией данных и манипуляцией текстом в интерфейсах.

## Валидация форм

### Валидация email

```javascript
class EmailValidator {
  // Основной паттерн для валидации email
  static emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  
  // Более строгий паттерн
  static strictEmailRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
  
  static validate(email, strict = false) {
    const regex = strict ? this.strictEmailRegex : this.emailRegex;
    return regex.test(email);
  }
}

// Использование
console.log(EmailValidator.validate("user@example.com")); // true
console.log(EmailValidator.validate("invalid.email"));    // false
```

### Валидация телефонного номера

```javascript
class PhoneValidator {
  // Паттерн для международного формата
  static internationalRegex = /^\+?[\d\s\-\(\)]{7,15}$/;
  
  // Паттерн для российских номеров
  static ruRegex = /^(\+7|8)?[\s\-]?\(?[0-9]{3}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;
  
  static validate(phone, country = 'international') {
    switch (country) {
      case 'ru':
        return this.ruRegex.test(phone);
      default:
        return this.internationalRegex.test(phone);
    }
  }
  
  static format(phone, country = 'international') {
    // Убираем все нецифровые символы (кроме + в начале)
    let cleanNumber = phone.replace(/[^\d+]/g, '');
    
    if (country === 'ru') {
      // Добавляем +7 если отсутствует
      if (cleanNumber.length === 10) {
        cleanNumber = '+7' + cleanNumber;
      } else if (cleanNumber.length === 11 && cleanNumber[0] === '8') {
        cleanNumber = '+7' + cleanNumber.substring(1);
      }
      
      // Форматируем как +7 (XXX) XXX-XX-XX
      return cleanNumber.replace(/(\+7)(\d{3})(\d{3})(\d{2})(\d{2})/, "$1 ($2) $3-$4-$5");
    }
    
    // Общий формат
    return cleanNumber.replace(/(\d{1,4})(\d{3})(\d{3})(\d{2})(\d{2})/, "$1 $2 $3 $4 $5").trim();
  }
}

// Использование
console.log(PhoneValidator.validate("89261234567", 'ru')); // true
console.log(PhoneValidator.format("89261234567", 'ru')); // "+7 (926) 123-45-67"
```

### Валидация пароля

```javascript
class PasswordValidator {
  static validate(password) {
    const checks = {
      length: password.length >= 8,
      hasUppercase: /[A-Z]/.test(password),
      hasLowercase: /[a-z]/.test(password),
      hasNumber: /\d/.test(password),
      hasSpecialChar: /[!@#$%^&*(),.?":{}|<>]/.test(password)
    };
    
    return {
      isValid: Object.values(checks).every(check => check),
      checks
    };
  }
  
  static getStrength(password) {
    const result = this.validate(password);
    const passedChecks = Object.values(result.checks).filter(check => check).length;
    
    if (passedChecks === 0) return 'очень слабый';
    if (passedChecks <= 2) return 'слабый';
    if (passedChecks === 3) return 'средний';
    if (passedChecks === 4) return 'сильный';
    return 'очень сильный';
  }
}

// Использование
const password = "MyPass123!";
const validation = PasswordValidator.validate(password);
console.log(validation); // { isValid: true, checks: { ... } }
console.log(PasswordValidator.getStrength(password)); // "очень сильный"
```

## Обработка пользовательского ввода

### Очистка текста от HTML-тегов

```javascript
function stripHtmlTags(html) {
  // Удаляем все HTML-теги
  const tagRegex = /<[^>]*>/gs;
  return html.replace(tagRegex, '');
}

// Пример использования
const htmlContent = '<p>Это <strong>жирный</strong> текст с <em>курсивом</em>.</p>';
console.log(stripHtmlTags(htmlContent)); // "Это жирный текст с курсивом."
```

### Форматирование чисел

```javascript
function formatNumber(number, decimals = 2) {
  // Проверяем, является ли входное значение числом
  const num = parseFloat(number);
  if (isNaN(num)) return number;
  
  // Разделяем целую и дробную части
  const fixedNum = num.toFixed(decimals);
  const parts = fixedNum.split('.');
  
  // Добавляем разделители тысяч
  parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
  
  return parts.join('.');
}

// Использование
console.log(formatNumber(1234567.89)); // "1 234 567.89"
console.log(formatNumber(987654321.123, 3)); // "987 654 321.123"
```

### Санитизация пользовательского ввода

```javascript
class InputSanitizer {
  static sanitize(input) {
    // Удаляем потенциально опасные символы
    return input
      .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '') // Удаляем скрипты
      .replace(/javascript:/gi, '') // Удаляем javascript: ссылки
      .replace(/on\w+\s*=/gi, '') // Удаляем обработчики событий
      .trim(); // Удаляем лишние пробелы
  }
  
  static sanitizeForAttribute(input) {
    // Санитизация для использования в HTML-атрибутах
    return input
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#x27;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');
  }
}

// Использование
const userInput = '<script>alert("XSS")</script>Привет, мир!';
console.log(InputSanitizer.sanitize(userInput)); // "Привет, мир!"
```

## Работа с URL и параметрами

### Извлечение параметров из URL

```javascript
function parseUrlParams(url) {
  // Извлекаем строку запроса из URL
  const match = url.match(/[?#]([^#]*)/);
  if (!match) return {};
  
  const queryString = match[1];
  const params = {};
  
  // Разбиваем строку запроса на пары ключ=значение
  const pairs = queryString.split(/[&;]/);
  
  for (const pair of pairs) {
    const [key, value] = pair.split('=');
    if (key) {
      params[decodeURIComponent(key)] = value ? decodeURIComponent(value) : '';
    }
  }
  
  return params;
}

// Использование
const url = 'https://example.com/page?name=Иван&city=Москва&age=30#section';
console.log(parseUrlParams(url)); // { name: 'Иван', city: 'Москва', age: '30' }
```

### Проверка формата URL

```javascript
function validateUrl(url) {
  // Базовая проверка формата URL
  const urlRegex = /^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i;
  return urlRegex.test(url);
}

function extractDomain(url) {
  // Извлечение домена из URL
  const domainRegex = /https?:\/\/(?:www\.)?([^\/\?#]+)/i;
  const match = url.match(domainRegex);
  return match ? match[1] : null;
}

// Использование
console.log(validateUrl('https://example.com')); // true
console.log(extractDomain('https://www.example.com/path')); // "example.com"
```

## Работа с текстом и строками

### Поиск и замена с подсветкой

```javascript
function highlightText(text, searchTerm, caseSensitive = false) {
  if (!searchTerm) return text;
  
  // Экранируем специальные символы в поисковом запросе
  const escapedTerm = searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  
  // Создаем регулярное выражение с учетом регистра
  const flags = caseSensitive ? 'g' : 'gi';
  const regex = new RegExp(`(${escapedTerm})`, flags);
  
  // Заменяем совпадения с подсветкой
  return text.replace(regex, '<mark>$1</mark>');
}

// Использование
const content = 'JavaScript - мощный язык программирования. Язык JavaScript используется в веб-разработке.';
console.log(highlightText(content, 'JavaScript'));
// "«mark»JavaScript«/mark» - мощный язык программирования. Язык «mark»JavaScript«/mark» используется в веб-разработке."
```

### Извлечение хештегов

```javascript
function extractHashtags(text) {
  // Находим все хештеги в тексте
  const hashtagRegex = /#[a-zA-Zа-яёА-ЯЁ0-9_]+/g;
  const matches = text.match(hashtagRegex);
  return matches ? matches.map(tag => tag.toLowerCase()) : [];
}

// Использование
const postText = 'Изучаю #JavaScript и #регулярныеВыражения #webdev #frontend';
console.log(extractHashtags(postText)); // ['#javascript', '#регулярныевыражения', '#webdev', '#frontend']
```

### Форматирование текста

```javascript
function formatPhoneNumber(phone) {
  // Очищаем номер от всех нецифровых символов
  const cleanNumber = phone.replace(/\D/g, '');
  
  // Проверяем длину и форматируем
  if (cleanNumber.length === 11 && cleanNumber.startsWith('8')) {
    // Российский формат
    return cleanNumber.replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/, '+7 ($2) $3-$4-$5');
  } else if (cleanNumber.length === 10) {
    // Американский формат
    return cleanNumber.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
  }
  
  return phone; // Возвращаем исходный, если не подходит формат
}

// Использование
console.log(formatPhoneNumber('89261234567')); // "+7 (926) 123-45-67"
console.log(formatPhoneNumber('1234567890')); // "(123) 456-7890"
```

## Продвинутые примеры

### Валидация и обработка JSON-подобных строк

```javascript
function isValidJsonString(str) {
  // Проверяем, является ли строка валидной JSON-строкой
  const jsonRegex = /^\s*(\[.*\]|\{.*\})\s*$/s;
  if (!jsonRegex.test(str)) return false;
  
  try {
    JSON.parse(str);
    return true;
  } catch {
    return false;
  }
}

function extractJsonObjects(text) {
  // Извлекаем все JSON-объекты из текста
  const jsonRegex = /(\{(?:[^{}]|(?R))*\})|(\[(?:[^\[\]]|(?R))*\])/g;
  const matches = [...text.matchAll(jsonRegex)];
  return matches.map(match => match[0]);
}

// Использование
const textWithJson = 'Данные: {"name": "Иван", "age": 30} и [{"id": 1}, {"id": 2}]';
console.log(extractJsonObjects(textWithJson)); 
// ['{"name": "Иван", "age": 30}', '[{"id": 1}, {"id": 2}]']
```

### Работа с цветами

```javascript
class ColorValidator {
  static hexRegex = /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;
  static rgbRegex = /^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;
  static rgbaRegex = /^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0|1|0?\.\d+)\s*\)$/;
  
  static validate(color) {
    return this.hexRegex.test(color) || 
           this.rgbRegex.test(color) || 
           this.rgbaRegex.test(color);
  }
  
  static toHex(color) {
    if (this.hexRegex.test(color)) return color;
    
    if (this.rgbRegex.test(color)) {
      const [, r, g, b] = color.match(this.rgbRegex);
      return `#${parseInt(r).toString(16).padStart(2, '0')}${parseInt(g).toString(16).padStart(2, '0')}${parseInt(b).toString(16).padStart(2, '0')}`;
    }
    
    return null;
  }
}

// Использование
console.log(ColorValidator.validate('#ff0000')); // true
console.log(ColorValidator.validate('rgb(255, 0, 0)')); // true
console.log(ColorValidator.toHex('rgb(255, 0, 0)')); // "#ff0000"
```

### Валидация дат и времени

```javascript
class DateTimeValidator {
  static dateRegex = /^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[0-2])[-/.]\d{4}$/;
  static timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$/;
  static dateTimeRegex = /^(0[1-9]|[12][0-9]|3[01])[-/.](0[1-9]|1[0-2])[-/.]\d{4}\s+([01]?[0-9]|2[0-3]):[0-5][0-9](:[0-5][0-9])?$/;
  
  static validateDate(dateString) {
    if (!this.dateRegex.test(dateString)) return false;
    
    // Дополнительная проверка корректности даты
    const [day, month, year] = dateString.split(/[-/.]/).map(Number);
    const date = new Date(year, month - 1, day);
    
    return date.getFullYear() === year && 
           date.getMonth() === month - 1 && 
           date.getDate() === day;
  }
  
  static validateTime(timeString) {
    if (!this.timeRegex.test(timeString)) return false;
    
    const [hours, minutes, seconds] = timeString.split(':').map(Number);
    return hours <= 23 && minutes <= 59 && (seconds === undefined || seconds <= 59);
  }
  
  static formatDate(dateString) {
    if (!this.validateDate(dateString)) return null;
    
    const [day, month, year] = dateString.split(/[-/.]/);
    return `${year}-${month.padStart(2, '0')}-${day.padStart(2, '0')}`;
  }
}

// Использование
console.log(DateTimeValidator.validateDate('29/02/2024')); // true (високосный год)
console.log(DateTimeValidator.validateDate('29/02/2023')); // false (не високосный год)
console.log(DateTimeValidator.formatDate('25/12/2023')); // "2023-12-25"
```

## Практические советы

### Экранирование пользовательского ввода

```javascript
function escapeRegExp(string) {
  // Функция для экранирования специальных символов регулярных выражений
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

function createSearchRegex(terms, caseSensitive = false) {
  // Создание регулярного выражения для поиска по нескольким терминам
  const escapedTerms = terms.map(escapeRegExp);
  const pattern = escapedTerms.join('|');
  const flags = caseSensitive ? 'g' : 'gi';
  
  return new RegExp(pattern, flags);
}

// Использование
const searchTerms = ['JavaScript', 'TypeScript', 'React'];
const regex = createSearchRegex(searchTerms);
console.log(regex.test('Я изучаю JavaScript и React')); // true
```

### Оптимизация производительности

```javascript
// Кэширование регулярных выражений для многократного использования
class RegexCache {
  static cache = new Map();
  
  static get(pattern, flags = '') {
    const key = `${pattern}_${flags}`;
    if (!this.cache.has(key)) {
      this.cache.set(key, new RegExp(pattern, flags));
    }
    return this.cache.get(key);
  }
}

// Использование кэшированного регулярного выражения
function validateEmail(email) {
  const emailRegex = RegexCache.get('^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$', 'i');
  return emailRegex.test(email);
}
```

## Следующие шаги

После изучения практических примеров рекомендуется перейти к:

- [[Продвинутые темы]]
- [[Группы в регулярных выражениях]]
- [[Флаги регулярных выражений]]