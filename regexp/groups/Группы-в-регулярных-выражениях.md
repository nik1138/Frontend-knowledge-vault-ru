---
tags: [programming, regexp, groups, frontend, javascript]
aliases: [группы-регулярных-выражений, regexp-groups]
---

# Группы в регулярных выражениях

Группы позволяют объединять части регулярного выражения в логические блоки, что делает их мощным инструментом для захвата, анализа и манипуляции частями строки. В веб-разработке группы особенно полезны для извлечения данных из строк, например, из URL или пользовательского ввода.

## Типы групп

### Захватывающие группы (Capturing Groups)

Захватывающие группы создаются с помощью круглых скобок `()`. Они захватывают совпадающую часть строки и позволяют к ней обращаться.

```javascript
const text = "Меня зовут Иван Петров";
const regex = /Меня зовут (\w+) (\w+)/;

const match = text.match(regex);
console.log(match[1]); // "Иван" (первое имя)
console.log(match[2]); // "Петров" (фамилия)
```

### Незахватывающие группы (Non-capturing Groups)

Незахватывающие группы создаются с помощью `(?:...)`. Они группируют выражение, но не сохраняют захваченное значение.

```javascript
const text = "Я живу в Москве и Санкт-Петербурге";
const regex = /(?:в|на) (\w+)/g;

const matches = [...text.matchAll(regex)];
console.log(matches[0][1]); // "Москве"
console.log(matches[1][1]); // "Петербурге"
```

## Применение в веб-разработке

### Извлечение параметров из URL

```javascript
function parseUrl(url) {
  // Паттерн для извлечения протокола, домена и пути
  const regex = /^(\w+):\/\/([^\/]+)(\/.*)?$/;
  const match = url.match(regex);
  
  if (match) {
    return {
      protocol: match[1],
      domain: match[2],
      path: match[3] || '/'
    };
  }
  
  return null;
}

const url = "https://example.com/users/123";
const parsed = parseUrl(url);
console.log(parsed); // { protocol: 'https', domain: 'example.com', path: '/users/123' }
```

### Анализ строковых данных

```javascript
// Извлечение имени и фамилии из строки
function extractName(fullName) {
  const regex = /^([А-ЯЁ][а-яё]+)\s+([А-ЯЁ][а-яё]+)$/;
  const match = fullName.match(regex);
  
  if (match) {
    return {
      firstName: match[1],
      lastName: match[2]
    };
  }
  
  return null;
}

const name = "Иван Петров";
const extracted = extractName(name);
console.log(extracted); // { firstName: 'Иван', lastName: 'Петров' }
```

### Обработка пользовательского ввода

```javascript
// Валидация и разбор даты в формате DD.MM.YYYY
function parseDate(dateString) {
  const regex = /^(\d{2})\.(\d{2})\.(\d{4})$/;
  const match = dateString.match(regex);
  
  if (match) {
    const [, day, month, year] = match;
    return {
      day: parseInt(day),
      month: parseInt(month),
      year: parseInt(year)
    };
  }
  
  return null;
}

const date = "25.12.2023";
const parsedDate = parseDate(date);
console.log(parsedDate); // { day: 25, month: 12, year: 2023 }
```

## Именованные группы (Named Capture Groups)

ES2018 добавил поддержку именованных групп, которые делают регулярные выражения более читаемыми.

```javascript
// Извлечение параметров из URL с именованными группами
const urlRegex = /(?<protocol>\w+):\/\/(?<domain>[^\/]+)(?:\/(?<path>.*))?/;

const url = "https://api.example.com/users/123";
const match = url.match(urlRegex);

console.log(match.groups.protocol); // "https"
console.log(match.groups.domain);   // "api.example.com"
console.log(match.groups.path);     // "users/123"
```

### Извлечение данных из логов

```javascript
// Паттерн для анализа логов в формате "ВРЕМЯ IP МЕТОД ПУТЬ СТАТУС"
const logRegex = /^(?<timestamp>\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}) (?<ip>[\d.]+) (?<method>\w+) (?<path>\/\S*) (?<status>\d{3})$/;

const logLine = "2023-12-25 10:30:45 192.168.1.1 GET /api/users 200";
const match = logLine.match(logRegex);

if (match) {
  console.log(match.groups.timestamp); // "2023-12-25 10:30:45"
  console.log(match.groups.ip);        // "192.168.1.1"
  console.log(match.groups.method);    // "GET"
  console.log(match.groups.path);      // "/api/users"
  console.log(match.groups.status);    // "200"
}
```

## Продвинутые примеры

### Замена с использованием групп

```javascript
// Форматирование телефонного номера
const phoneRegex = /^(\d{3})(\d{3})(\d{2})(\d{2})$/;
const phone = "1234567890";
const formattedPhone = phone.replace(phoneRegex, "($1) $2-$3-$4");

console.log(formattedPhone); // "(123) 456-78-90"
```

### Работа с HTML-тегами

```javascript
// Извлечение содержимого тегов с атрибутами
function extractTagContent(html, tagName) {
  const regex = new RegExp(`<${tagName}(?:\\s[^>]*)?>(.*?)<\\/${tagName}>`, 'gi');
  const matches = [...html.matchAll(regex)];
  
  return matches.map(match => ({
    content: match[1],
    fullTag: match[0]
  }));
}

const html = '<div class="header">Заголовок</div><div>Контент</div>';
const divContents = extractTagContent(html, 'div');
console.log(divContents); 
// [
//   { content: 'Заголовок', fullTag: '<div class="header">Заголовок</div>' },
//   { content: 'Контент', fullTag: '<div>Контент</div>' }
// ]
```

### Парсинг параметров из строки запроса

```javascript
function parseQueryParams(queryString) {
  // Убираем начальный символ ?
  const cleanQuery = queryString.startsWith('?') ? queryString.slice(1) : queryString;
  
  // Паттерн для извлечения ключ=значение
  const paramRegex = /([^&=]+)=([^&]*)/g;
  const params = {};
  let match;
  
  while (match = paramRegex.exec(cleanQuery)) {
    const key = decodeURIComponent(match[1]);
    const value = decodeURIComponent(match[2]);
    params[key] = value;
  }
  
  return params;
}

const query = "?name=Иван&city=Москва&age=30";
const params = parseQueryParams(query);
console.log(params); // { name: 'Иван', city: 'Москва', age: '30' }
```

## Практические советы

1. **Используйте именованные группы** для улучшения читаемости кода
2. **Избегайте захвата ненужных данных** с помощью незахватывающих групп
3. **Проверяйте совпадения перед обращением к группам** чтобы избежать ошибок
4. **Используйте `matchAll()`** для поиска всех совпадений с группами

```javascript
// Хорошая практика - проверка совпадений
function safeExtract(text, regex) {
  const matches = [...text.matchAll(regex)];
  
  return matches.map(match => {
    // Проверяем, есть ли захваченные группы
    if (match.length > 1) {
      return match.slice(1); // Возвращаем только захваченные группы
    }
    return null;
  }).filter(Boolean);
}
```

## Следующие шаги

После изучения групп рекомендуется перейти к:

- [[Флаги регулярных выражений]]
- [[Продвинутые темы]]
- [[Практические примеры]]