---
aliases: ["Запоминание результатов", "Кэширование подзадач", "Memoization"]
tags: [алгоритмы, динамическое_программирование, оптимизация, программирование]
---

# Мемоизация

## Определение

**Мемоизация** — это техника оптимизации, которая заключается в сохранении результатов вычислений функций для избежания повторных вычислений при одинаковых входных данных. В контексте [[Основы-динамического-программирования]] мемоизация используется для хранения результатов подзадач, чтобы не пересчитывать их несколько раз.

## Принцип работы

Мемоизация реализуется с помощью хранения результатов в специальной структуре данных (обычно хэш-таблице или массиве), где ключом является входной параметр функции, а значением — результат вычисления. При каждом вызове функции сначала проверяется, не вычислен ли уже результат для данных параметров.

## Пример реализации

```
АЛГОРИТМ Мемоизированный_Фибоначчи
    СОЗДАТЬ кэш (ассоциативный массив)

    ФУНКЦИЯ fib(n)
        ЕСЛИ n в кэше ТО
            ВОЗВРАТ кэш[n]
        КОНЕЦ ЕСЛИ

        ЕСЛИ n <= 1 ТО
            результат = n
        ИНАЧЕ
            результат = fib(n-1) + fib(n-2)
        КОНЕЦ ЕСЛИ

        кэш[n] = результат
        ВОЗВРАТ результат
    КОНЕЦ ФУНКЦИИ

    ВОЗВРАТ ФУНКЦИЯ fib
КОНЕЦ АЛГОРИТМ
```

```javascript
function memoizedFibonacci() {
    const cache = new Map();

    return function fib(n) {
        if (cache.has(n)) {
            return cache.get(n);
        }

        let result;
        if (n <= 1) {
            result = n;
        } else {
            result = fib(n-1) + fib(n-2);
        }

        cache.set(n, result);
        return result;
    };
}

// Использование
const fibonacci = memoizedFibonacci();
console.log(fibonacci(10)); // 55
```

## Сравнение с табличным подходом

| Характеристика | Мемоизация | Табличный подход |
|----------------|------------|------------------|
| Направление вычислений | Сверху вниз (top-down) | Снизу вверх (bottom-up) |
| Память | Используется только для нужных подзадач | Может использовать память для всех подзадач |
| Сложность реализации | Иногда проще реализовать | Требует тщательного планирования порядка вычислений |
| Использование стека | Может привести к переполнению | Не использует рекурсию |

## Применение мемоизации

Мемоизация особенно актуальна при:
- Разработке высоконагруженных систем
- Оптимизации алгоритмов для олимпиад по программированию
- Создании эффективных решений для анализа больших данных
- Разработке игровых движков и симуляций

## Практические советы

1. **Выбор структуры данных**: Используйте хэш-таблицы для быстрого доступа к закэшированным результатам
2. **Идентификация подзадач**: Определите параметры, которые однозначно определяют подзадачу
3. **Ограничение размера кэша**: В задачах с ограничениями по памяти контролируйте размер кэша
4. **Очистка кэша**: В долгосрочных приложениях предусмотрите очистку устаревших данных

## Примеры задач, решаемых с мемоизацией

1. **Числа Фибоначчи**: Классический пример, показывающий эффективность мемоизации
2. **Задача о расстановке ферзей**: Подсчет количества возможных расстановок
3. **Размен монет**: Подсчет способов размена суммы монетами разных номиналов
4. [[Задача-о-рюкзаке]]: Оптимизация выбора предметов с ограничениями

## Вариации мемоизации

### Частичная мемоизация
Используется, когда функция имеет несколько параметров, и нужно кэшировать только по части из них.

### Автоматическая мемоизация
Некоторые языки программирования (например, Haskell) предоставляют встроенные механизмы мемоизации.

## Заключение

Мемоизация — важный инструмент в арсенале разработчика, особенно при решении задач с использованием динамического программирования. Понимание и умение применять мемоизацию особенно ценно в условиях современных требований к производительности и эффективности алгоритмов.

## См. также
- [[Основы-динамического-программирования]]
- [[Рекурсивные-и-итеративные-решения]]
- [[Таблица-для-хранения-результатов]]
- [[Оптимизация-по-памяти]]