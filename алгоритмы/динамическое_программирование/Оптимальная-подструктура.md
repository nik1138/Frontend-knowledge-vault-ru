---
aliases: ["Оптимальная подструктура", "Свойство оптимальности", "Принцип оптимальности"]
tags: [алгоритмы, динамическое_программирование, оптимизация, структура задач]
---

# Оптимальная подструктура

## Определение

**Оптимальная подструктура** — это свойство задачи, при котором оптимальное решение задачи может быть построено из оптимальных решений её подзадач. Это одно из двух ключевых свойств, необходимых для применения [[Основы-динамического-программирования]] (второе — [[Перекрывающиеся-подзадачи]]).

Формально: задача обладает оптимальной подструктурой, если оптимальное решение содержит оптимальные решения всех её подзадач.

## Примеры с оптимальной подструктурой

### 1. Кратчайший путь в графе
Если кратчайший путь из вершины A в вершину C проходит через вершину B, то его часть — путь из A в B — также должен быть кратчайшим. То же верно для пути из B в C.

### 2. Задача о взвешенном независимом множестве в дереве
Для дерева с весами узлов, максимальный взвешенный независимый набор может быть найден, комбинируя решения для поддеревьев.

### 3. [[Задача-о-рюкзаке]]
Оптимальное решение задачи о рюкзаке строится из оптимальных решений для меньших вместимостей и меньшего набора предметов.

## Примеры без оптимальной подструктуры

### 1. Самый длинный путь в графе
Самый длинный путь (без циклов) между двумя вершинами не обязательно содержит самые длинные пути между промежуточными вершинами.

### 2. Независимое множество максимального размера в графе
В общем случае, удаление узла из максимального независимого множества не приводит к максимальному независимому множеству в оставшемся графе.

## Принцип оптимальности Беллмана

Ричард Беллман сформулировал принцип оптимальности, который гласит:
> "Оптимальная политика обладает тем свойством, что, независимо от начального состояния и начального решения, оставшиеся решения должны составлять оптимальную политику в отношении состояния, получающегося в результате первого решения."

Этот принцип лежит в основе динамического программирования и помогает формализовать понятие оптимальной подструктуры.

## Применение оптимальной подструктуры

Понимание оптимальной подструктуры особенно важно при:

1. **Разработке алгоритмов для e-commerce**: Оптимизация цепочек поставок, маршрутизация доставки
2. **Финансовом моделировании**: Портфельное инвестирование, оптимизация рисков
3. **ИИ и машинном обучении**: Обучение с подкреплением, где применяется принцип Беллмана
4. **Системах планирования**: Оптимизация производственных процессов, расписаний
5. **Игровой индустрии**: Алгоритмы ИИ для стратегических игр, оптимизация игровых механик

## Проверка на оптимальную подструктуру

Чтобы определить, обладает ли задача оптимальной подструктурой, можно использовать следующий подход:

1. **Разделить задачу** на более мелкие подзадачи
2. **Решить подзадачи** оптимально
3. **Объединить решения** подзадач в общее решение
4. **Проверить**, является ли объединенное решение оптимальным для исходной задачи

## Связь с динамическим программированием

Оптимальная подструктура — необходимое условие для применения динамического программирования. Если задача обладает этим свойством, можно:
- Определить состояние (описание подзадачи)
- Найти переход (связь между подзадачами)
- Установить базовые случаи (граничные условия)

## Пример: Задача о наименьшем количестве монет

Рассмотрим задачу: даны номиналы монет и сумма S, найти минимальное количество монет для получения суммы S.

**Оптимальная подструктура**: Если мы знаем оптимальное решение для суммы S-c[i] (где c[i] — номинал монеты), то добавив одну монету номинала c[i], мы получим решение для суммы S. Если это дает минимальное количество монет, то оно оптимально.

```
АЛГОРИТМ Минимальное_Количество_Монет(coins, amount)
    // dp[i] - минимальное количество монет для суммы i
    СОЗДАТЬ массив dp размером amount+1
    ЗАПОЛНИТЬ dp значениями "бесконечность"
    dp[0] = 0  // Базовый случай: 0 монет для суммы 0

    ДЛЯ i ОТ 1 ДО amount ВКЛЮЧАЯ
        ДЛЯ каждой coin в coins
            ЕСЛИ coin <= i ТО
                dp[i] = МИНИМУМ(dp[i], dp[i - coin] + 1)
            КОНЕЦ ЕСЛИ
        КОНЕЦ ДЛЯ
    КОНЕЦ ДЛЯ

    ЕСЛИ dp[amount] != "бесконечность" ТО
        ВОЗВРАТ dp[amount]
    ИНАЧЕ
        ВОЗВРАТ -1
    КОНЕЦ ЕСЛИ
КОНЕЦ АЛГОРИТМ
```

```javascript
function minCoins(coins, amount) {
    // dp[i] - минимальное количество монет для суммы i
    const dp = new Array(amount + 1).fill(Infinity);
    dp[0] = 0;  // Базовый случай: 0 монет для суммы 0

    for (let i = 1; i <= amount; i++) {
        for (const coin of coins) {
            if (coin <= i) {
                dp[i] = Math.min(dp[i], dp[i - coin] + 1);
            }
        }
    }

    return dp[amount] !== Infinity ? dp[amount] : -1;
}

// Пример использования
const coins = [1, 3, 4];
const amount = 6;
const result = minCoins(coins, amount);
console.log(`Минимальное количество монет: ${result}`); // Вывод: 2 (3+3)
```

## Практические советы

1. **Идентификация подзадач**: Определите, как можно разбить задачу на меньшие подзадачи
2. **Проверка свойства**: Убедитесь, что объединение оптимальных решений подзадач дает оптимальное решение всей задачи
3. **Математическая формализация**: Запишите рекуррентное соотношение, описывающее связь между задачей и подзадачами
4. **Анализ примеров**: Протестируйте свойство на нескольких примерах разного размера

## Заключение

Оптимальная подструктура — фундаментальное свойство, которое определяет применимость динамического программирования к задаче. Понимание этого свойства позволяет эффективно решать сложные задачи, разбивая их на более простые подзадачи и комбинируя их решения. В условиях быстро развивающейся IT-индустрии в России в 2025 году, знание принципов оптимальной подструктуры становится важным навыком для разработчиков и аналитиков.

## См. также
- [[Основы-динамического-программирования]]
- [[Перекрывающиеся-подзадачи]]
- [[Мемоизация]]
- [[Таблица-для-хранения-результатов]]