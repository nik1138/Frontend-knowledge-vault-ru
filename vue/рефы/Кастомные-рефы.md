---
aliases: ["Кастомные refs", "Пользовательские refs"]
---

# Кастомные-рефы

## Обзор

Кастомные refs в Vue позволяют создавать пользовательские обертки для управления состоянием и синхронизацией данных. Это продвинутый способ работы с реактивностью, позволяющий создавать более сложные и гибкие системы управления состоянием.

## Создание кастомного ref

Кастомный ref создается с помощью функции `customRef`, которая принимает factory функцию с `track` и `trigger`:

```javascript
import { customRef } from 'vue'

function useDebouncedRef(value, delay = 200) {
  let timeout
  return customRef((track, trigger) => {
    return {
      get() {
        track() // Отслеживание зависимости
        return value
      },
      set(newValue) {
        clearTimeout(timeout)
        timeout = setTimeout(() => {
          value = newValue
          trigger() // Уведомление об изменении
        }, delay)
      }
    }
  })
}
```

## Пример использования

```vue
<template>
  <input v-model="text" />
  <p>Значение: {{ text }}</p>
</template>

<script setup>
import { useDebouncedRef } from './composables/useDebouncedRef'

const text = useDebouncedRef('Привет', 500)
</script>
```

## Практические применения

- Дебаунсинг ввода (как в примере выше)
- Ленивая загрузка данных
- Контроль за частотой обновлений
- Создание специфичных для приложения реактивных оберток

## Сравнение с обычными refs

| Тип ref | Назначение | Использование |
|--------|------------|---------------|
| Обычный ref | Хранение реактивного значения | `ref(0)` |
| Кастомный ref | Пользовательская логика реактивности | `customRef(...)` |
| Computed ref | Производное значение | `computed(() => ...)` |

## Связанные темы

- [[Template-refs]]
- [[Component-refs]]
- [[Доступ-к-DOM]]
- [[Вызов-методов-компонента]]

#vue #refs #frontend #composition-api #reactivity #custom-ref