---
aliases: ["Вложенные маршруты Vue", "Дочерние маршруты", "Vue Router иерархия"]
tags: [vue, routing, nested-routes, frontend]
---

# Вложенные маршруты в Vue.js

Вложенные маршруты позволяют создавать иерархическую структуру навигации, где один маршрут может содержать другие маршруты. Это особенно полезно для создания сложных интерфейсов с общими элементами и вложенными представлениями.

## Основы вложенных маршрутов

Вложенные маршруты позволяют создавать иерархическую структуру, где родительский маршрут может содержать дочерние маршруты, отображаемые в специальном компоненте `<router-view>` внутри родительского компонента.

### Определение вложенной структуры

```javascript
// router/index.js
import { createRouter, createWebHistory } from 'vue-router'
import UserLayout from '@/components/UserLayout.vue'
import UserProfile from '@/views/User/Profile.vue'
import UserSettings from '@/views/User/Settings.vue'
import UserBilling from '@/views/User/Billing.vue'

const routes = [
  {
    path: '/user/:id',
    component: UserLayout,
    children: [
      {
        path: '', // /user/:id
        name: 'UserProfile',
        component: UserProfile
      },
      {
        path: 'settings', // /user/:id/settings
        name: 'UserSettings',
        component: UserSettings
      },
      {
        path: 'billing', // /user/:id/billing
        name: 'UserBilling',
        component: UserBilling
      }
    ]
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

export default router
```

## Структура компонентов

### Родительский компонент (UserLayout.vue)

```vue
<template>
  <div class="user-layout">
    <header>
      <h1>Профиль пользователя {{ $route.params.id }}</h1>
      <nav class="user-nav">
        <router-link :to="{ name: 'UserProfile' }">Профиль</router-link>
        <router-link :to="{ name: 'UserSettings' }">Настройки</router-link>
        <router-link :to="{ name: 'UserBilling' }">Платежи</router-link>
      </nav>
    </header>
    
    <main>
      <!-- Здесь будут отображаться дочерние маршруты -->
      <router-view />
    </main>
  </div>
</template>

<script>
export default {
  name: 'UserLayout'
}
</script>
```

### Дочерние компоненты

Дочерние компоненты отображаются внутри `<router-view>` родительского компонента:

```vue
<!-- UserProfile.vue -->
<template>
  <div class="user-profile">
    <h2>Информация о пользователе</h2>
    <p>ID: {{ $route.params.id }}</p>
    <!-- Содержимое профиля -->
  </div>
</template>
```

## Продвинутая структура вложенных маршрутов

### Многоуровневые вложения

```javascript
const routes = [
  {
    path: '/admin',
    component: AdminLayout,
    children: [
      {
        path: 'dashboard',
        name: 'AdminDashboard',
        component: AdminDashboard
      },
      {
        path: 'users',
        component: UsersLayout,
        children: [
          {
            path: '',
            name: 'UserList',
            component: UserList
          },
          {
            path: ':userId',
            component: UserDetailLayout,
            children: [
              {
                path: '',
                name: 'UserDetail',
                component: UserDetail
              },
              {
                path: 'edit',
                name: 'UserEdit',
                component: UserEdit
              },
              {
                path: 'permissions',
                name: 'UserPermissions',
                component: UserPermissions
              }
            ]
          }
        ]
      }
    ]
  }
]
```

## Использование Composition API

### В родительском компоненте

```vue
<template>
  <div class="dashboard-layout">
    <aside>
      <nav>
        <router-link to="/dashboard">Обзор</router-link>
        <router-link to="/dashboard/analytics">Аналитика</router-link>
        <router-link to="/dashboard/reports">Отчеты</router-link>
      </nav>
    </aside>
    
    <main>
      <router-view v-slot="{ Component }">
        <transition name="fade" mode="out-in">
          <component :is="Component" />
        </transition>
      </router-view>
    </main>
  </div>
</template>

<script>
import { useRoute } from 'vue-router'
import { computed } from 'vue'

export default {
  name: 'DashboardLayout',
  setup() {
    const route = useRoute()
    
    // Вычисляем активный раздел
    const activeSection = computed(() => {
      const path = route.path
      if (path.includes('analytics')) return 'analytics'
      if (path.includes('reports')) return 'reports'
      return 'dashboard'
    })
    
    return { activeSection }
  }
}
</script>
```

## Динамические вложенные маршруты

### Использование динамических параметров во вложенных маршрутах

```javascript
const routes = [
  {
    path: '/category/:categorySlug',
    component: CategoryLayout,
    children: [
      {
        path: '',
        name: 'CategoryHome',
        component: CategoryHome
      },
      {
        path: 'product/:productSlug',
        name: 'ProductDetail',
        component: ProductDetail
      },
      {
        path: 'reviews',
        name: 'CategoryReviews',
        component: CategoryReviews
      }
    ]
  }
]
```

## Управление навигацией во вложенных маршрутах

### Навигация между дочерними маршрутами

```vue
<template>
  <div class="user-profile">
    <div class="profile-tabs">
      <button 
        :class="{ active: $route.name === 'UserProfile' }"
        @click="goToProfile"
      >
        Профиль
      </button>
      <button 
        :class="{ active: $route.name === 'UserSettings' }"
        @click="goToSettings"
      >
        Настройки
      </button>
    </div>
    
    <router-view />
  </div>
</template>

<script>
import { useRouter, useRoute } from 'vue-router'

export default {
  name: 'UserProfile',
  setup() {
    const router = useRouter()
    const route = useRoute()
    
    const goToProfile = () => {
      router.push({
        name: 'UserProfile',
        params: { id: route.params.id }
      })
    }
    
    const goToSettings = () => {
      router.push({
        name: 'UserSettings',
        params: { id: route.params.id }
      })
    }
    
    return { goToProfile, goToSettings }
  }
}
</script>
```

## Мета-данные для вложенных маршрутов

Мета-данные могут быть определены как для родительского, так и для дочернего маршрута:

```javascript
{
  path: '/admin',
  component: AdminLayout,
  meta: { requiresAuth: true, role: 'admin' },
  children: [
    {
      path: 'dashboard',
      name: 'AdminDashboard',
      component: AdminDashboard,
      meta: { requiresAuth: true, role: 'admin', permissions: ['view_dashboard'] }
    },
    {
      path: 'users',
      name: 'UserManagement',
      component: UserManagement,
      meta: { requiresAuth: true, role: 'admin', permissions: ['manage_users'] }
    }
  ]
}
```

## Обработка 404 ошибок во вложенных маршрутах

```javascript
{
  path: '/user/:id',
  component: UserLayout,
  children: [
    // ... другие маршруты
    {
      path: ':pathMatch(.*)*',
      name: 'UserNotFound',
      component: UserNotFound
    }
  ]
}
```

## Практические примеры использования

### Пример: Панель управления проектом

```javascript
const routes = [
  {
    path: '/project/:projectId',
    component: ProjectLayout,
    children: [
      {
        path: '',
        name: 'ProjectOverview',
        component: ProjectOverview,
        children: [
          {
            path: 'timeline',
            name: 'ProjectTimeline',
            component: ProjectTimeline
          },
          {
            path: 'documents',
            name: 'ProjectDocuments',
            component: ProjectDocuments
          }
        ]
      },
      {
        path: 'team',
        name: 'ProjectTeam',
        component: ProjectTeam
      },
      {
        path: 'settings',
        name: 'ProjectSettings',
        component: ProjectSettings
      }
    ]
  }
]
```

### Пример: Интернет-магазин

```javascript
const routes = [
  {
    path: '/shop',
    component: ShopLayout,
    children: [
      {
        path: 'category/:categorySlug',
        component: CategoryLayout,
        children: [
          {
            path: '',
            name: 'Category',
            component: Category
          },
          {
            path: 'product/:productSlug',
            name: 'Product',
            component: Product
          }
        ]
      }
    ]
  }
]
```

## Рекомендации по архитектуре

> [!TIP]
> В российских реалиях 2025 года при проектировании вложенных маршрутов рекомендуется:
> - Ограничивать глубину вложенности 3-4 уровнями
> - Использовать понятную структуру URL
> - Обеспечивать согласованность навигации на всех уровнях
> - Обрабатывать ошибки и отсутствующие маршруты

## Оптимизация производительности

### Ленивая загрузка компонентов

```javascript
const routes = [
  {
    path: '/user/:id',
    component: () => import('@/components/UserLayout.vue'),
    children: [
      {
        path: '',
        name: 'UserProfile',
        component: () => import('@/views/User/Profile.vue')
      },
      {
        path: 'settings',
        name: 'UserSettings',
        component: () => import('@/views/User/Settings.vue')
      }
    ]
  }
]
```

## Связанные темы

- [[Основы-роутинга]]
- [[Динамические-маршруты]]
- [[Защита-маршрутов]]
- [[Vue Composition API]]
- [[Vue Router guards]]

## Заключение

Вложенные маршруты предоставляют мощный инструмент для создания сложных интерфейсов с общей структурой и вложенными представлениями. Правильное использование вложенных маршрутов позволяет создавать интуитивно понятную навигацию и улучшает пользовательский опыт.