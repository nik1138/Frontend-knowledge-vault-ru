---
aliases: []
tags: [vue, lifecycle, hooks]
---

# Vue Lifecycle Hooks

Хуки жизненного цикла (Lifecycle Hooks) в Vue.js - это специальные функции, которые вызываются на различных этапах жизни компонента. Они позволяют выполнять код в определенные моменты: при создании компонента, его монтировании, обновлении и уничтожении.

## Основные хуки жизненного цикла

### setup()
- Вызывается перед инициализацией компонента
- Используется в Composition API
- Является точкой входа для логики компонента

### beforeCreate
- Вызывается сразу после инициализации экземпляра компонента
- Состояние реактивности еще не установлено
- Редко используется в практике

### created
- Вызывается после создания экземпляра компонента
- Реактивные данные и события инициализированы
- Подходит для выполнения логики, которая зависит от реактивного состояния

### beforeMount
- Вызывается перед монтированием компонента
- Шаблон скомпилирован, но еще не вставлен в DOM
- Последний шанс изменить состояние перед рендерингом

### mounted
- Вызывается после монтирования компонента
- Экземпляр полностью установлен и видим в DOM
- Подходит для работы с DOM, отправки запросов, настройки подписок

### beforeUpdate
- Вызывается перед обновлением компонента
- После изменения реактивного состояния, но до обновления DOM
- Можно изменить состояние без дополнительных рендеров

### updated
- Вызывается после обновления компонента
- DOM обновлен в соответствии с изменениями состояния
- Подходит для работы с обновленным DOM

### beforeUnmount
- Вызывается перед размонтированием компонента
- Подходит для очистки подписок, таймеров и других ресурсов

### unmounted
- Вызывается после размонтирования компонента
- Экземпляр компонента полностью удален из DOM
- Все подписки и дочерние компоненты уничтожены

## Пример использования

```javascript
export default {
  data() {
    return {
      count: 0
    }
  },
  created() {
    console.log('Компонент создан')
    // Можно инициализировать данные
  },
  mounted() {
    console.log('Компонент смонтирован')
    // Подходит для выполнения запросов к API
    this.fetchData()
  },
  beforeUpdate() {
    console.log('Компонент будет обновлен')
  },
  updated() {
    console.log('Компонент обновлен')
    // Подходит для работы с обновленным DOM
  },
  beforeUnmount() {
    console.log('Компонент будет уничтожен')
    // Очистка ресурсов
    clearInterval(this.timer)
  },
  methods: {
    fetchData() {
      // Логика загрузки данных
    }
  }
}
```

## Composition API и хуки жизненного цикла

В Composition API хуки доступны как импортируемые функции:

```javascript
import { onMounted, onUpdated, onUnmounted } from 'vue'

export default {
  setup() {
    onMounted(() => {
      console.log('Компонент смонтирован')
    })
    
    onUpdated(() => {
      console.log('Компонент обновлен')
    })
    
    onUnmounted(() => {
      console.log('Компонент уничтожен')
    })
    
    // Остальная логика
  }
}
```

## Практические применения

- **created**: загрузка начальных данных, инициализация состояния
- **mounted**: доступ к DOM, отправка запросов к API, инициализация сторонних библиотек
- **updated**: работа с обновленным DOM, измерение элементов
- **unmounted**: очистка таймеров, отписка от событий, освобождение ресурсов

## Важные замечания

1. Не изменяйте состояние компонента в `updated` без условий - это может вызвать бесконечный цикл
2. Используйте `beforeUnmount` для очистки ресурсов, чтобы избежать утечек памяти
3. В `mounted` DOM уже доступен, но размеры элементов могут быть неточными до полной загрузки изображений

См. также: [[Vue компоненты]], [[Composition API]], [[Options API]]