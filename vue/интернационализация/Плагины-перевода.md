---
aliases: ["Плагины перевода", "I18n плагины", "Переводные плагины"]
tags: [vue, i18n, плагины, интернационализация]
---

# Плагины-перевода

## Обзор

Плагины перевода в Vue.js - это расширения и инструменты, которые упрощают процесс интернационализации приложений. Они могут автоматизировать извлечение строк для перевода, управлять файлами локализации и обеспечивать интеграцию с профессиональными переводческими системами.

## Популярные плагины и инструменты

### 1. @intlify/vite-plugin-vue-i18n

Этот плагин для Vite обеспечивает интеграцию с Vue I18n и предоставляет следующие возможности:

- Компиляция сообщений i18n во время сборки
- Предварительная загрузка файлов локализации
- Поддержка горячей перезагрузки при изменении файлов перевода

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import VueI18nPlugin from '@intlify/vite-plugin-vue-i18n'

export default defineConfig({
  plugins: [
    vue(),
    VueI18nPlugin({
      include: [path.resolve(__dirname, './path/to/src/locales/**')]
    })
  ]
})
```

### 2. i18n-extract

Инструмент для извлечения строк из кода, которые нуждаются в переводе:

```bash
# Установка
npm install -g i18n-extract

# Извлечение строк из исходного кода
i18n-extract extract './src/**/*.{js,vue}' --output './extracted-keys.json'
```

### 3. vue-i18n-extract

Плагин для анализа использования ключей перевода в Vue.js проектах:

```bash
npm install vue-i18n-extract --save-dev
```

```javascript
// Использование в скриптах
const { extractFromCode } = require('vue-i18n-extract')

const code = `<template>
  <div>{{ $t('hello') }}</div>
</template>`

const extracted = extractFromCode(code)
console.log(extracted) // [{ key: 'hello', path: '...' }]
```

## Интеграция с системами перевода

### 1. Интеграция с Phrase

Phrase - это платформа для управления переводами. Для интеграции с Vue.js приложением:

```javascript
// plugins/phrase.js
import { createI18n } from 'vue-i18n'

export default async function createPhraseI18n() {
  // Загрузка переводов из Phrase
  const translations = await fetchTranslationsFromPhrase()
  
  const i18n = createI18n({
    legacy: false,
    locale: 'ru',
    fallbackLocale: 'en',
    messages: translations
  })

  return i18n
}
```

### 2. Интеграция с Crowdin

Crowdin позволяет командам работать над переводами в реальном времени:

```javascript
// scripts/crowdin-sync.js
const crowdin = require('@crowdin/crowdin-api-client')

const { SourceFilesApi } = crowdin

async function syncWithCrowdin() {
  const filesApi = new SourceFilesApi('your-api-key')
  
  // Загрузка исходных файлов для перевода
  await filesApi.uploadStorage('path/to/translation/file.json', 'file.json')
  
  // Скачивание переведенных файлов
  const translatedFiles = await downloadTranslatedFiles()
  
  // Сохранение в проект
  saveTranslationsToProject(translatedFiles)
}
```

## Плагины для российских разработчиков

### 1. Плагин для работы с падежами

В русском языке важную роль играют падежи. Специализированный плагин может упростить работу с ними:

```javascript
// plugins/russian-case-inflection.js
export const RussianCasePlugin = {
  install(app, options) {
    app.config.globalProperties.$decline = function(n, titles) {
      const cases = [2, 0, 1, 1, 1, 2]
      return titles[(n % 100 > 4 && n % 100 < 20) ? 2 : cases[(n % 10 < 5) ? n % 10 : 5]]
    }
  }
}

// Использование в компоненте
// this.$decline(1, ['товар', 'товара', 'товаров']) // "товар"
// this.$decline(2, ['товар', 'товара', 'товаров']) // "товара"
// this.$decline(5, ['товар', 'товара', 'товаров']) // "товаров"
```

### 2. Плагин для форматирования дат и чисел

```javascript
// plugins/formatter.js
import { createFormatter } from 'vue-i18n'

export const FormatterPlugin = {
  install(app, options) {
    const formatter = createFormatter({
      locale: options.locale || 'ru-RU',
      formats: {
        dateTime: {
          short: {
            year: 'numeric',
            month: 'short',
            day: 'numeric'
          },
          long: {
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          }
        },
        number: {
          currency: {
            style: 'currency',
            currency: 'RUB',
            minimumFractionDigits: 2
          }
        }
      }
    })
    
    app.config.globalProperties.$formatDate = (date, format = 'short') => {
      return formatter.dateTime(date, format)
    }
    
    app.config.globalProperties.$formatCurrency = (value, format = 'currency') => {
      return formatter.number(value, format)
    }
  }
}
```

## Автоматизация процесса перевода

### 1. Скрипт для извлечения строк

```javascript
// scripts/extract-i18n.js
const fs = require('fs')
const path = require('path')
const glob = require('glob')

// Извлечение всех строк $t() и t() из Vue файлов
function extractI18nStrings() {
  const files = glob.sync('./src/**/*.{vue,js,ts}')
  const strings = new Set()
  
  files.forEach(file => {
    const content = fs.readFileSync(file, 'utf-8')
    
    // Регулярное выражение для поиска вызовов $t() и t()
    const regex = /(?:\$t|t)\(['"`]([^'"`]+)['"`]/g
    let match
    
    while ((match = regex.exec(content)) !== null) {
      strings.add(match[1])
    }
  })
  
  return Array.from(strings)
}

// Сохранение извлеченных строк в JSON файл
const extractedStrings = extractI18nStrings()
fs.writeFileSync('./i18n-extracted.json', JSON.stringify(extractedStrings, null, 2))
```

### 2. Скрипт для проверки отсутствующих переводов

```javascript
// scripts/check-missing-translations.js
const fs = require('fs')

function checkMissingTranslations(extractedStrings, translationFiles) {
  const missing = {}
  
  Object.keys(translationFiles).forEach(locale => {
    const translations = JSON.parse(fs.readFileSync(translationFiles[locale], 'utf-8'))
    const allKeys = flattenObject(translations)
    
    missing[locale] = extractedStrings.filter(key => !allKeys.hasOwnProperty(key))
  })
  
  return missing
}

function flattenObject(obj, prefix = '', result = {}) {
  Object.keys(obj).forEach(key => {
    const value = obj[key]
    const newKey = prefix ? `${prefix}.${key}` : key
    
    if (typeof value === 'object' && value !== null) {
      flattenObject(value, newKey, result)
    } else {
      result[newKey] = value
    }
  })
  
  return result
}
```

## Лучшие практики использования плагинов

1. **Централизованное управление**: Используйте единый файл конфигурации для всех плагинов перевода
2. **Автоматизация**: Настройте автоматическую проверку и обновление переводов
3. **Кэширование**: Реализуйте кэширование переводов для улучшения производительности
4. **Тестирование**: Тестируйте приложение с разными языками
5. **Документация**: Поддерживайте актуальную документацию по использованию плагинов

## Инструменты для разработчиков

### 1. Линтер для переводов

```javascript
// .eslintrc.js
module.exports = {
  rules: {
    'vue-i18n/no-missing-keys': 'error',
    'vue-i18n/no-unused-keys': 'warn',
    'vue-i18n/no-dynamic-keys': 'error'
  }
}
```

### 2. Инструменты для анализа качества переводов

```javascript
// tools/translation-quality-checker.js
class TranslationQualityChecker {
  constructor(translations) {
    this.translations = translations
  }
  
  checkCompleteness() {
    // Проверка полноты переводов
    const completeness = {}
    
    Object.keys(this.translations).forEach(locale => {
      const keys = Object.keys(flattenObject(this.translations[locale]))
      completeness[locale] = keys.length
    })
    
    return completeness
  }
  
  checkConsistency() {
    // Проверка согласованности переводов
    // ...
  }
}
```

## См. также

- [[Vue-I18n]]
- [[Локализация-компонентов]]
- [[Мультиязычность]]
- [[RTL-поддержка]]