---
aliases: ["Локализация компонентов", "Компонентная локализация", "I18n компоненты"]
tags: [vue, i18n, компоненты, интернационализация]
---

# Локализация-компонентов

## Обзор

Локализация компонентов в Vue.js - это процесс адаптации отдельных компонентов под различные языки и культурные особенности. Это важная часть разработки мультиязычных приложений, особенно в условиях российского рынка с его многоязычием и культурными различиями.

## Подходы к локализации компонентов

### 1. Централизованная локализация

При централизованном подходе все переводы хранятся в одном месте:

```javascript
// locales/ru.js
export default {
  header: {
    welcome: 'Добро пожаловать',
    login: 'Войти',
    logout: 'Выйти'
  },
  product: {
    price: 'Цена: {price} руб.',
    buy: 'Купить'
  }
}

// locales/en.js
export default {
  header: {
    welcome: 'Welcome',
    login: 'Login',
    logout: 'Logout'
  },
  product: {
    price: 'Price: {price} USD',
    buy: 'Buy'
  }
}
```

### 2. Локализация на уровне компонента

Каждый компонент может иметь свои собственные переводы:

```vue
<template>
  <div class="product-card">
    <h3>{{ $t('product.name') }}</h3>
    <p>{{ $t('product.description') }}</p>
    <span class="price">{{ $t('product.price', { price: formattedPrice }) }}</span>
    <button>{{ $t('product.buy') }}</button>
  </div>
</template>

<script>
import { defineComponent } from 'vue'

export default defineComponent({
  name: 'ProductCard',
  props: {
    product: {
      type: Object,
      required: true
    }
  },
  computed: {
    formattedPrice() {
      return this.product.price.toLocaleString(this.$i18n.locale, {
        style: 'currency',
        currency: this.$i18n.locale === 'ru' ? 'RUB' : 'USD'
      })
    }
  },
  i18n: {
    messages: {
      ru: {
        product: {
          name: 'Название продукта',
          description: 'Описание продукта',
          price: 'Цена: {price}',
          buy: 'Купить'
        }
      },
      en: {
        product: {
          name: 'Product Name',
          description: 'Product Description',
          price: 'Price: {price}',
          buy: 'Buy Now'
        }
      }
    }
  }
})
</script>
```

## Локализация с Composition API

### Использование useI18n

```vue
<template>
  <div class="user-profile">
    <h2>{{ t('profile.title') }}</h2>
    <p>{{ t('profile.greeting', { name: user.name }) }}</p>
    <div class="user-info">
      <label>{{ t('profile.email') }}:</label>
      <span>{{ user.email }}</span>
    </div>
    <div class="user-info">
      <label>{{ t('profile.phone') }}:</label>
      <span>{{ user.phone }}</span>
    </div>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { useI18n } from 'vue-i18n'

const props = defineProps({
  user: {
    type: Object,
    required: true
  }
})

const { t, locale } = useI18n()

// Компонент может иметь свои собственные переводы
const messages = computed(() => ({
  ru: {
    profile: {
      title: 'Профиль пользователя',
      greeting: 'Привет, {name}!',
      email: 'Электронная почта',
      phone: 'Телефон'
    }
  },
  en: {
    profile: {
      title: 'User Profile',
      greeting: 'Hello, {name}!',
      email: 'Email',
      phone: 'Phone'
    }
  }
}))

// Регистрация переводов компонента
// В реальном приложении переводы могут загружаться асинхронно
</script>
```

## Локализация сложных компонентов

### Динамическая локализация

Для компонентов, которые требуют динамической локализации, можно использовать следующий подход:

```vue
<template>
  <div class="dynamic-component">
    <component 
      :is="currentComponent" 
      v-for="item in items" 
      :key="item.id"
      :data="item"
      :translations="getComponentTranslations(item.type)"
    />
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useI18n } from 'vue-i18n'

const { locale } = useI18n()

const props = defineProps({
  items: {
    type: Array,
    required: true
  }
})

// Компоненты
const components = {
  text: () => import('@/components/LocalizedText.vue'),
  image: () => import('@/components/LocalizedImage.vue'),
  button: () => import('@/components/LocalizedButton.vue')
}

const getComponentTranslations = (type) => {
  const translations = {
    ru: {
      text: { placeholder: 'Введите текст' },
      image: { alt: 'Изображение' },
      button: { label: 'Нажмите здесь' }
    },
    en: {
      text: { placeholder: 'Enter text' },
      image: { alt: 'Image' },
      button: { label: 'Click here' }
    }
  }
  
  return translations[locale.value][type] || {}
}

const currentComponent = computed(() => {
  return (props) => {
    const { type, ...rest } = props
    const Component = components[type]
    return h(Component, { ...rest, translations: getComponentTranslations(type) })
  }
})
</script>
```

## Практические рекомендации для российских разработчиков

### Работа с кириллицей и RTL

При локализации компонентов в России важно учитывать:

1. **Кодировки**: Убедитесь, что все файлы сохранены в UTF-8
2. **Шрифты**: Используйте шрифты, поддерживающие кириллицу
3. **Тестирование**: Проверяйте отображение текста на различных устройствах

### Многоязычие в России

Учитывайте региональные особенности:

```javascript
// Пример поддержки татарского языка в дополнение к русскому
const regionalMessages = {
  'ru-tatar': {
    greetings: {
      morning: 'Кич саен',
      day: 'Хәерле көн',
      evening: 'Хәерле иртәнге'
    }
  }
}
```

### Асинхронная загрузка переводов

Для улучшения производительности загружайте переводы по требованию:

```javascript
// composables/useComponentI18n.js
import { ref, onMounted } from 'vue'
import { useI18n } from 'vue-i18n'

export function useComponentI18n(componentName) {
  const { locale, mergeLocaleMessage } = useI18n()
  const loaded = ref(false)

  const loadComponentTranslations = async () => {
    try {
      const translations = await import(`../locales/components/${componentName}/${locale.value}.json`)
      mergeLocaleMessage(locale.value, translations.default)
      loaded.value = true
    } catch (error) {
      console.warn(`Translations for ${componentName} in ${locale.value} not found`)
      // Загрузка резервного перевода
      const fallbackTranslations = await import(`../locales/components/${componentName}/en.json`)
      mergeLocaleMessage(locale.value, fallbackTranslations.default)
      loaded.value = true
    }
  }

  onMounted(loadComponentTranslations)

  return { loaded }
}
```

## Лучшие практики

1. **Изоляция переводов**: Храните переводы компонентов отдельно от общих переводов
2. **Повторное использование**: Создавайте переиспользуемые локализованные компоненты
3. **Тестирование**: Тестируйте компоненты с разными языками
4. **Документация**: Документируйте процесс локализации для команды

## См. также

- [[Vue-I18n]]
- [[Плагины-перевода]]
- [[Мультиязычность]]
- [[RTL-поддержка]]