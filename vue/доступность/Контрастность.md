---
aliases: ["Цветовой контраст", "Визуальная доступность", "WCAG контраст"]
tags: ["vue", "accessibility", "contrast", "color", "visual"]
---

# Контрастность в Vue-приложениях

## Введение

Контрастность - это разница в яркости между текстом и его фоном, которая позволяет пользователям легко различать элементы интерфейса. Недостаточный контраст может затруднить чтение текста людям с нарушениями зрения, включая дальтонизм, возрастное ухудшение зрения и другие визуальные ограничения.

## Стандарты контрастности

### WCAG 2.1 (и российские аналоги)

Согласно рекомендациям WCAG 2.1 и российским стандартам (ГОСТ Р 52872-2022), минимальные требования к контрастности:

- **AA уровень**: 
  - Нормальный текст: 4.5:1
  - Крупный текст (18pt+ или 14pt+ жирный): 3:1
- **AAA уровень**:
  - Нормальный текст: 7:1
  - Крупный текст: 4.5:1

### Федеральные требования России 2025

С 2025 года в России усилен контроль за доступностью веб-сайтов согласно:
- Федеральный закон №419-ФЗ от 25.11.2024
- ГОСТ Р 52872-2022 (новая редакция)

## Проверка контрастности

### Инструменты для проверки

1. **Contrast checker** - расширение для браузера
2. **Color Contrast Analyzer** - настольное приложение
3. **Online contrast checkers** - веб-инструменты

### Расчет контрастности в JavaScript

```javascript
// Функция для расчета контрастности (уровень AA)
function getContrastRatio(color1, color2) {
  const lum1 = getLuminance(color1);
  const lum2 = getLuminance(color2);
  return (Math.max(lum1, lum2) + 0.05) / (Math.min(lum1, lum2) + 0.05);
}

function getLuminance(hexColor) {
  const rgb = hexToRgb(hexColor);
  const a = [rgb.r, rgb.g, rgb.b].map(v => {
    v /= 255;
    return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
  });
  return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
}

function hexToRgb(hex) {
  const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  return result ? {
    r: parseInt(result[1], 16),
    g: parseInt(result[2], 16),
    b: parseInt(result[3], 16)
  } : null;
}
```

## Реализация в Vue-приложениях

### 1. Динамическая проверка контрастности

```vue
<template>
  <div class="contrast-checker">
    <div class="color-inputs">
      <div class="color-group">
        <label for="text-color">Цвет текста:</label>
        <input 
          id="text-color"
          type="color" 
          v-model="textColor"
          @input="checkContrast">
        <span>{{ textColor }}</span>
      </div>
      
      <div class="color-group">
        <label for="bg-color">Цвет фона:</label>
        <input 
          id="bg-color"
          type="color" 
          v-model="bgColor"
          @input="checkContrast">
        <span>{{ bgColor }}</span>
      </div>
    </div>
    
    <div class="preview" :style="{ backgroundColor: bgColor, color: textColor }">
      <p>Пример текста для проверки контрастности</p>
      <p class="large-text">Крупный текст (для проверки 3:1)</p>
    </div>
    
    <div class="result" :class="contrastResult.className">
      <p>Контраст: {{ contrastRatio.toFixed(2) }}:1</p>
      <p>Статус: {{ contrastResult.status }}</p>
      <p v-if="contrastResult.issues.length">
        Проблемы: {{ contrastResult.issues.join(', ') }}
      </p>
    </div>
  </div>
</template>

<script>
export default {
  name: 'ContrastChecker',
  data() {
    return {
      textColor: '#000000',
      bgColor: '#ffffff',
      contrastRatio: 0,
      contrastResult: {
        className: '',
        status: '',
        issues: []
      }
    }
  },
  mounted() {
    this.checkContrast();
  },
  methods: {
    getContrastRatio(color1, color2) {
      const lum1 = this.getLuminance(color1);
      const lum2 = this.getLuminance(color2);
      return (Math.max(lum1, lum2) + 0.05) / (Math.min(lum1, lum2) + 0.05);
    },
    
    getLuminance(hexColor) {
      const rgb = this.hexToRgb(hexColor);
      if (!rgb) return 0;
      
      const a = [rgb.r, rgb.g, rgb.b].map(v => {
        v /= 255;
        return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
      });
      
      return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
    },
    
    hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    },
    
    checkContrast() {
      this.contrastRatio = this.getContrastRatio(this.textColor, this.bgColor);
      this.evaluateContrast();
    },
    
    evaluateContrast() {
      const normalTextRatio = this.contrastRatio;
      const largeTextRatio = this.contrastRatio; // Для упрощения, считаем одинаково
      
      const issues = [];
      
      if (normalTextRatio < 4.5) {
        issues.push('Недостаточный контраст для обычного текста (нужно 4.5:1)');
      }
      
      if (largeTextRatio < 3) {
        issues.push('Недостаточный контраст для крупного текста (нужно 3:1)');
      }
      
      let className, status;
      
      if (normalTextRatio >= 7) {
        className = 'excellent';
        status = 'Отличный контраст (AAA)';
      } else if (normalTextRatio >= 4.5 && largeTextRatio >= 3) {
        className = 'good';
        status = 'Хороший контраст (AA)';
      } else {
        className = 'poor';
        status = 'Недостаточный контраст';
      }
      
      this.contrastResult = {
        className,
        status,
        issues
      };
    }
  }
}
</script>

<style scoped>
.contrast-checker {
  max-width: 600px;
  margin: 20px auto;
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
}

.color-inputs {
  display: flex;
  gap: 20px;
  margin-bottom: 20px;
}

.color-group {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.preview {
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 4px;
  margin-bottom: 20px;
}

.large-text {
  font-size: 24px;
  font-weight: bold;
}

.result {
  padding: 10px;
  border-radius: 4px;
  font-weight: bold;
}

.result.excellent {
  background-color: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}

.result.good {
  background-color: #fff3cd;
  color: #856404;
  border: 1px solid #ffeaa7;
}

.result.poor {
  background-color: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}
</style>
```

### 2. Компонент для проверки контрастности в реальном времени

```vue
<template>
  <div class="real-time-contrast-checker">
    <h3>Проверка контрастности в реальном времени</h3>
    
    <div class="theme-selector">
      <button 
        v-for="theme in themes" 
        :key="theme.name"
        @click="applyTheme(theme)"
        :class="{ active: currentTheme.name === theme.name }">
        {{ theme.name }}
      </button>
    </div>
    
    <div class="theme-preview" :style="currentTheme.styles">
      <h4>Пример использования</h4>
      <p>Это пример текста с текущей цветовой схемой.</p>
      <button>Пример кнопки</button>
      <input type="text" placeholder="Пример поля ввода">
    </div>
    
    <div class="contrast-report">
      <h4>Отчет о контрастности</h4>
      <ul>
        <li v-for="check in contrastChecks" :key="check.element" 
            :class="check.passed ? 'pass' : 'fail'">
          {{ check.element }}: {{ check.ratio.toFixed(2) }}:1 - 
          {{ check.passed ? '✓ Пройдено' : '✗ Не пройдено' }}
        </li>
      </ul>
    </div>
  </div>
</template>

<script>
export default {
  name: 'RealTimeContrastChecker',
  data() {
    return {
      currentTheme: {
        name: 'Светлая',
        styles: {
          backgroundColor: '#ffffff',
          color: '#000000',
          buttonBg: '#007cba',
          buttonColor: '#ffffff',
          inputBorder: '#ccc'
        }
      },
      themes: [
        {
          name: 'Светлая',
          styles: {
            backgroundColor: '#ffffff',
            color: '#000000',
            buttonBg: '#007cba',
            buttonColor: '#ffffff',
            inputBorder: '#ccc'
          }
        },
        {
          name: 'Темная',
          styles: {
            backgroundColor: '#1a1a1a',
            color: '#ffffff',
            buttonBg: '#005a9e',
            buttonColor: '#ffffff',
            inputBorder: '#555'
          }
        },
        {
          name: 'Высокий контраст',
          styles: {
            backgroundColor: '#000000',
            color: '#ffffff',
            buttonBg: '#ffff00',
            buttonColor: '#000000',
            inputBorder: '#ffffff'
          }
        }
      ],
      contrastChecks: []
    }
  },
  mounted() {
    this.updateContrastChecks();
  },
  methods: {
    applyTheme(theme) {
      this.currentTheme = theme;
      this.updateContrastChecks();
    },
    
    updateContrastChecks() {
      // В реальном приложении здесь будет анализ реальных стилей элементов
      this.contrastChecks = [
        {
          element: 'Текст на фоне',
          ratio: this.getContrastRatio(
            this.currentTheme.styles.color,
            this.currentTheme.styles.backgroundColor
          ),
          passed: this.checkContrast(
            this.currentTheme.styles.color,
            this.currentTheme.styles.backgroundColor
          )
        },
        {
          element: 'Кнопка на фоне',
          ratio: this.getContrastRatio(
            this.currentTheme.styles.buttonColor,
            this.currentTheme.styles.buttonBg
          ),
          passed: this.checkContrast(
            this.currentTheme.styles.buttonColor,
            this.currentTheme.styles.buttonBg
          )
        }
      ];
    },
    
    getContrastRatio(foreground, background) {
      const lum1 = this.getLuminance(foreground);
      const lum2 = this.getLuminance(background);
      return (Math.max(lum1, lum2) + 0.05) / (Math.min(lum1, lum2) + 0.05);
    },
    
    getLuminance(hexColor) {
      const rgb = this.hexToRgb(hexColor);
      if (!rgb) return 0;
      
      const a = [rgb.r, rgb.g, rgb.b].map(v => {
        v /= 255;
        return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
      });
      
      return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
    },
    
    hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    },
    
    checkContrast(foreground, background) {
      const ratio = this.getContrastRatio(foreground, background);
      return ratio >= 4.5; // Проверяем AA уровень для нормального текста
    }
  }
}
</script>

<style scoped>
.real-time-contrast-checker {
  padding: 20px;
}

.theme-selector {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.theme-selector button {
  padding: 8px 12px;
  border: 1px solid #ccc;
  background: white;
  cursor: pointer;
}

.theme-selector button.active {
  background: #007cba;
  color: white;
}

.theme-preview {
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 4px;
  margin-bottom: 20px;
}

.contrast-report ul {
  list-style: none;
  padding: 0;
}

.contrast-report li {
  padding: 5px 0;
}

.contrast-report li.pass {
  color: green;
}

.contrast-report li.fail {
  color: red;
}
</style>
```

## Практические рекомендации

### 1. Использование CSS-переменных для управления контрастностью

```vue
<template>
  <div class="accessible-component" :class="{ 'high-contrast': highContrastMode }">
    <h2>Доступный компонент</h2>
    <p>Этот текст будет соответствовать требованиям контрастности.</p>
    <button @click="toggleContrastMode">
      {{ highContrastMode ? 'Обычный режим' : 'Режим высокого контраста' }}
    </button>
  </div>
</template>

<script>
export default {
  name: 'AccessibleComponent',
  data() {
    return {
      highContrastMode: false
    }
  },
  methods: {
    toggleContrastMode() {
      this.highContrastMode = !this.highContrastMode;
    }
  }
}
</script>

<style scoped>
:root {
  --text-color: #212121;
  --background-color: #ffffff;
  --accent-color: #007cba;
  --border-color: #cccccc;
}

.high-contrast {
  --text-color: #000000;
  --background-color: #ffffff;
  --accent-color: #ffff00;
  --border-color: #000000;
}

.accessible-component {
  color: var(--text-color);
  background-color: var(--background-color);
  padding: 20px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
}

.accessible-component h2 {
  color: var(--accent-color);
}
</style>
```

### 2. Проверка контрастности при изменении темы

```vue
<template>
  <div class="theme-manager">
    <div class="theme-buttons">
      <button @click="setTheme('light')">Светлая тема</button>
      <button @click="setTheme('dark')">Темная тема</button>
      <button @click="setTheme('high-contrast')">Высокий контраст</button>
    </div>
    
    <div class="theme-preview" :data-theme="currentTheme">
      <h1>Заголовок страницы</h1>
      <p>Основной текст содержимого страницы.</p>
      <button class="action-button">Действие</button>
    </div>
    
    <div v-if="contrastIssues.length > 0" class="contrast-warning">
      <h4>Обнаружены проблемы с контрастностью:</h4>
      <ul>
        <li v-for="issue in contrastIssues" :key="issue.id">{{ issue.message }}</li>
      </ul>
    </div>
  </div>
</template>

<script>
export default {
  name: 'ThemeManager',
  data() {
    return {
      currentTheme: 'light',
      contrastIssues: []
    }
  },
  watch: {
    currentTheme() {
      this.applyTheme();
      this.checkContrast();
    }
  },
  mounted() {
    this.checkContrast();
  },
  methods: {
    setTheme(theme) {
      this.currentTheme = theme;
    },
    
    applyTheme() {
      document.body.className = `theme-${this.currentTheme}`;
    },
    
    checkContrast() {
      // В реальном приложении здесь будет более сложная логика проверки
      // на основе вычисленных стилей элементов
      this.contrastIssues = [];
      
      // Пример проверки для светлой темы
      if (this.currentTheme === 'light') {
        // Здесь можно добавить проверки на основе реальных элементов
        // и их вычисленных стилей
      }
    }
  }
}
</script>

<style>
.theme-light {
  --text-color: #212121;
  --background-color: #ffffff;
  --button-bg: #007cba;
  --button-color: #ffffff;
}

.theme-dark {
  --text-color: #e0e0e0;
  --background-color: #121212;
  --button-bg: #bb86fc;
  --button-color: #000000;
}

.theme-high-contrast {
  --text-color: #000000;
  --background-color: #ffffff;
  --button-bg: #ffff00;
  --button-color: #000000;
}

.theme-preview {
  padding: 20px;
  color: var(--text-color);
  background-color: var(--background-color);
  transition: all 0.3s ease;
}

.action-button {
  background-color: var(--button-bg);
  color: var(--button-color);
  border: none;
  padding: 10px 15px;
  cursor: pointer;
  margin-top: 10px;
}
</style>
```

## Особенности для российских разработчиков

### Соответствие российским стандартам

С 2025 года требования к контрастности в России ужесточаются:

1. **ГОСТ Р 52872-2022**:
   - Обязательное тестирование контрастности
   - Минимальный уровень AA (4.5:1 для обычного текста)
   - Обязательная поддержка режима высокого контраста

2. **Федеральный закон №419-ФЗ**:
   - Контроль за соблюдением стандартов доступности
   - Ответственность за несоответствие

### Рекомендации по цветовым схемам

1. **Используйте проверенные цветовые палитры**:
   - Палитры, соответствующие WCAG
   - Проверенные комбинации цветов

2. **Предоставьте опции для пользователей**:
   - Темная/светлая тема
   - Режим высокого контраста
   - Увеличение размера текста

3. **Тестируйте с различными типами дальтонизма**:
   - Протанопия
   - Дейтеранопия
   - Тританопия

## Наилучшие практики

1. **Используйте инструменты автоматической проверки**:
   - ESLint-плагины для проверки контрастности
   - Интеграция с CI/CD
   - Автоматические скриншот-тесты

2. **Не полагайтесь только на цвет**:
   - Добавляйте текстовые метки
   - Используйте иконки
   - Применяйте различные стили границ

3. **Обеспечьте контрастность интерактивных элементов**:
   - Кнопки
   - Ссылки
   - Формы ввода

4. **Тестируйте на различных устройствах**:
   - Мониторы с разным качеством
   - Мобильные устройства
   - Планшеты

## Заключение

Контрастность является важным аспектом визуальной доступности. Правильное соотношение цветов текста и фона делает интерфейс доступным для пользователей с нарушениями зрения. В Vue-приложениях важно реализовать не только проверку контрастности, но и предоставить пользователям возможность настройки интерфейса под свои потребности.

Следующие темы для изучения:
- [[Семантическая-разметка]]
- [[ARIA-атрибуты]]
- [[Навигация-с-клавиатуры]]
- [[Тестирование-доступности]]

## Ключевые теги
#vue #accessibility #contrast #color #frontend #web-development #visual