---
aliases: ["Тестирование доступности", "Проверка доступности", "Accessibility testing"]
tags: ["vue", "accessibility", "testing", "tools", "automation"]
---

# Тестирование доступности в Vue-приложениях

## Введение

Тестирование доступности - это процесс проверки того, насколько веб-приложение доступно для пользователей с ограниченными возможностями. В контексте Vue-приложений тестирование доступности включает как автоматизированные, так и ручные проверки различных аспектов интерфейса: семантической разметки, клавиатурной навигации, контрастности, работы со вспомогательными технологиями и т.д.

## Типы тестирования доступности

### 1. Автоматизированное тестирование

Автоматизированные инструменты могут проверить значительную часть требований доступности:

```javascript
// Пример настройки axe-core для тестирования Vue-компонентов
// jest.setup.js
import { configureAxe } from 'jest-axe';

// Настройка axe-core
const axe = configureAxe({
  rules: {
    // Отключение правил, которые не применимы к текущему проекту
    'color-contrast': { enabled: true },
    'heading-order': { enabled: true },
    'landmark-one-main': { enabled: true },
    'page-has-heading-one': { enabled: true },
    'region': { enabled: true }
  }
});

global.axe = axe;
```

```javascript
// Пример теста компонента с проверкой доступности
// Button.test.js
import { mount } from '@vue/test-utils';
import { axe, toHaveNoViolations } from 'jest-axe';
import AccessibleButton from '@/components/AccessibleButton.vue';

expect.extend(toHaveNoViolations);

describe('AccessibleButton', () => {
  it('должен быть доступным', async () => {
    const wrapper = mount(AccessibleButton, {
      props: {
        text: 'Нажми меня',
        variant: 'primary'
      }
    });

    const results = await axe(wrapper.element);
    expect(results).toHaveNoViolations();
  });
});
```

### 2. Ручное тестирование

Ручное тестирование включает проверку с помощью вспомогательных технологий:

- Проверка с использованием скринридеров (NVDA, JAWS, VoiceOver)
- Тестирование только с клавиатуры
- Проверка контрастности цветов
- Тестирование с увеличенным масштабом

## Инструменты для тестирования

### 1. axe-core

```vue
<template>
  <div class="accessibility-tester">
    <h1>Тестирование доступности</h1>
    <form @submit.prevent="handleSubmit">
      <div class="form-group">
        <label for="username">Имя пользователя</label>
        <input 
          id="username" 
          type="text" 
          v-model="username"
          required
          aria-describedby="username-help">
        <div id="username-help" class="help-text">
          Введите ваше имя пользователя
        </div>
      </div>
      
      <button type="submit">Отправить</button>
    </form>
  </div>
</template>

<script>
// Использование axe-core для проверки компонента
import axe from 'axe-core';

export default {
  name: 'AccessibilityTester',
  data() {
    return {
      username: ''
    }
  },
  methods: {
    async runAccessibilityAudit() {
      const results = await new Promise((resolve) => {
        axe.run(this.$el, (err, res) => {
          if (err) {
            console.error('Ошибка при проверке доступности:', err);
            resolve(null);
          } else {
            resolve(res);
          }
        });
      });

      if (results && results.violations.length > 0) {
        console.warn('Найдены нарушения доступности:', results.violations);
      } else {
        console.log('Доступность проверена - нарушений не найдено');
      }
    },
    handleSubmit() {
      // Обработка формы
      console.log('Форма отправлена:', this.username);
    }
  },
  mounted() {
    // Проверка доступности после монтирования компонента
    this.$nextTick(() => {
      this.runAccessibilityAudit();
    });
  }
}
</script>
```

### 2. Интеграция с CI/CD

```javascript
// .github/workflows/accessibility-check.yml
name: Accessibility Check
on: [push, pull_request]

jobs:
  accessibility:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run accessibility tests
        run: npm run test:accessibility
```

```json
// package.json
{
  "scripts": {
    "test:accessibility": "jest --testPathPattern=accessibility",
    "test:accessibility:ci": "npm run test:accessibility -- --ci --coverage"
  },
  "devDependencies": {
    "jest-axe": "^8.0.0",
    "axe-core": "^4.8.0"
  }
}
```

## Практические примеры тестирования

### 1. Тестирование формы с проверкой доступности

```vue
<template>
  <div class="accessible-form">
    <h2>Регистрация пользователя</h2>
    
    <form @submit.prevent="handleSubmit">
      <div 
        v-for="field in formFields" 
        :key="field.name"
        class="form-group"
        :class="{ 'has-error': errors[field.name] }">
        
        <label :for="field.name">{{ field.label }}</label>
        
        <input
          :id="field.name"
          :type="field.type"
          :name="field.name"
          v-model="formData[field.name]"
          :required="field.required"
          :aria-describedby="field.description ? `${field.name}-description` : null"
          :aria-invalid="errors[field.name] ? 'true' : 'false'">
        
        <div v-if="field.description" 
             :id="`${field.name}-description`" 
             class="field-description">
          {{ field.description }}
        </div>
        
        <div v-if="errors[field.name]" 
             :id="`${field.name}-error`" 
             class="error-message"
             role="alert">
          {{ errors[field.name] }}
        </div>
      </div>
      
      <button type="submit">Зарегистрироваться</button>
    </form>
    
    <div v-if="submitSuccess" class="success-message" role="status">
      Регистрация прошла успешно!
    </div>
  </div>
</template>

<script>
import { validateForm } from '@/utils/accessibility-validation';

export default {
  name: 'AccessibleRegistrationForm',
  data() {
    return {
      formData: {
        firstName: '',
        lastName: '',
        email: '',
        password: ''
      },
      errors: {},
      submitSuccess: false,
      formFields: [
        {
          name: 'firstName',
          label: 'Имя',
          type: 'text',
          required: true,
          description: 'Введите ваше имя'
        },
        {
          name: 'lastName',
          label: 'Фамилия',
          type: 'text',
          required: true,
          description: 'Введите вашу фамилию'
        },
        {
          name: 'email',
          label: 'Email',
          type: 'email',
          required: true,
          description: 'Введите действительный email-адрес'
        },
        {
          name: 'password',
          label: 'Пароль',
          type: 'password',
          required: true,
          description: 'Пароль должен содержать минимум 8 символов'
        }
      ]
    }
  },
  methods: {
    async handleSubmit() {
      const validationErrors = validateForm(this.formData, this.formFields);
      
      if (Object.keys(validationErrors).length > 0) {
        this.errors = validationErrors;
        // Фокус на первое поле с ошибкой
        const firstErrorField = Object.keys(validationErrors)[0];
        const element = document.getElementById(firstErrorField);
        if (element) {
          element.focus();
        }
        return;
      }
      
      // Отправка формы
      try {
        await this.submitForm();
        this.submitSuccess = true;
        this.errors = {};
        
        // Сообщение о успешной отправке для вспомогательных технологий
        this.announceToScreenReader('Форма успешно отправлена');
      } catch (error) {
        this.errors = { general: 'Произошла ошибка при отправке формы' };
      }
    },
    
    async submitForm() {
      // Симуляция отправки формы
      return new Promise(resolve => setTimeout(resolve, 1000));
    },
    
    announceToScreenReader(message) {
      // Создание временного элемента для объявления скринридеру
      const announcement = document.createElement('div');
      announcement.setAttribute('aria-live', 'polite');
      announcement.setAttribute('aria-atomic', 'true');
      announcement.className = 'sr-only';
      announcement.textContent = message;
      
      document.body.appendChild(announcement);
      
      setTimeout(() => {
        document.body.removeChild(announcement);
      }, 1000);
    }
  }
}
</script>

<style scoped>
.form-group {
  margin-bottom: 20px;
}

.form-group.has-error {
  border-left: 4px solid #d32f2f;
  padding-left: 10px;
}

label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}

input {
  width: 100%;
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

input:focus {
  outline: 2px solid #007cba;
  outline-offset: 2px;
}

.field-description {
  font-size: 0.875em;
  color: #666;
  margin-top: 4px;
}

.error-message {
  color: #d32f2f;
  font-size: 0.875em;
  margin-top: 4px;
}

.success-message {
  color: #388e3c;
  padding: 10px;
  background-color: #e8f5e8;
  border: 1px solid #388e3c;
  border-radius: 4px;
  margin-top: 10px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
</style>
```

### 2. Тестирование навигации с клавиатуры

```javascript
// keyboard-navigation.test.js
import { mount } from '@vue/test-utils';
import { axe, toHaveNoViolations } from 'jest-axe';
import AccessibleNavigation from '@/components/AccessibleNavigation.vue';

expect.extend(toHaveNoViolations);

describe('AccessibleNavigation', () => {
  let wrapper;

  beforeEach(() => {
    wrapper = mount(AccessibleNavigation);
  });

  afterEach(() => {
    wrapper.unmount();
  });

  test('должна иметь корректную семантическую разметку', () => {
    const nav = wrapper.find('nav');
    expect(nav.exists()).toBe(true);
    expect(nav.attributes('role')).toBe('navigation');
    expect(nav.attributes('aria-label')).toBe('Основная навигация');
  });

  test('все элементы навигации должны быть доступны с клавиатуры', () => {
    const links = wrapper.findAll('a');
    
    links.forEach(link => {
      expect(link.attributes('tabindex')).toBeUndefined(); // Не должны иметь tabindex, если семантически правильные
    });
  });

  test('должна быть доступной для проверки axe', async () => {
    const results = await axe(wrapper.element);
    expect(results).toHaveNoViolations();
  });

  test('должна корректно обрабатывать фокус', async () => {
    const firstLink = wrapper.find('a');
    firstLink.element.focus();
    
    expect(firstLink.element).toBe(document.activeElement);
  });
});
```

### 3. Интеграционные тесты доступности

```javascript
// accessibility-integration.test.js
import { createLocalVue, mount } from '@vue/test-utils';
import App from '@/App.vue';
import router from '@/router';
import { axe } from 'jest-axe';

describe('Полное тестирование доступности приложения', () => {
  let wrapper;

  beforeEach(() => {
    const localVue = createLocalVue();
    wrapper = mount(App, {
      localVue,
      router
    });
  });

  afterEach(() => {
    wrapper.destroy();
  });

  test('Главная страница должна быть доступной', async () => {
    // Переход на главную страницу
    await router.push('/');
    
    const results = await axe(wrapper.element);
    expect(results).toHaveNoViolations();
  });

  test('Страница с формой должна быть доступной', async () => {
    // Переход на страницу формы
    await router.push('/form');
    
    const results = await axe(wrapper.element);
    expect(results).toHaveNoViolations();
  });

  test('Модальные окна должны быть доступными', async () => {
    // Открытие модального окна
    const modalTrigger = wrapper.find('.modal-trigger');
    await modalTrigger.trigger('click');
    
    const modal = wrapper.find('.modal');
    const results = await axe(modal.element);
    expect(results).toHaveNoViolations();
  });
});
```

## Инструменты для ручного тестирования

### 1. Проверка с помощью вспомогательных технологий

```javascript
// utils/screen-reader-simulator.js
export function simulateScreenReader() {
  // Добавляем специальные классы для визуализации того, 
  // как воспринимается контент скринридерами
  document.body.classList.add('screen-reader-simulated');
  
  // Логика симуляции работы скринридера
  const focusableElements = document.querySelectorAll(
    'a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
  );
  
  focusableElements.forEach(el => {
    el.addEventListener('focus', highlightElement);
  });
  
  function highlightElement(e) {
    const highlight = document.createElement('div');
    highlight.style.position = 'fixed';
    highlight.style.border = '2px solid #ff0000';
    highlight.style.pointerEvents = 'none';
    highlight.style.zIndex = '10000';
    highlight.style.top = e.target.offsetTop + 'px';
    highlight.style.left = e.target.offsetLeft + 'px';
    highlight.style.width = e.target.offsetWidth + 'px';
    highlight.style.height = e.target.offsetHeight + 'px';
    
    document.body.appendChild(highlight);
    
    setTimeout(() => {
      document.body.removeChild(highlight);
    }, 1000);
  }
}
```

### 2. Проверка контрастности в реальном времени

```vue
<template>
  <div class="accessibility-debugger">
    <div class="debug-controls">
      <button @click="toggleContrastChecker">Проверка контрастности</button>
      <button @click="toggleScreenReaderMode">Режим скринридера</button>
      <button @click="toggleKeyboardOnlyMode">Только клавиатура</button>
    </div>
    
    <div v-if="showContrastChecker" class="contrast-overlay">
      <h3>Проверка контрастности</h3>
      <p>Наведите на элементы для проверки контрастности</p>
    </div>
  </div>
</template>

<script>
export default {
  name: 'AccessibilityDebugger',
  data() {
    return {
      showContrastChecker: false,
      screenReaderMode: false,
      keyboardOnlyMode: false
    }
  },
  methods: {
    toggleContrastChecker() {
      this.showContrastChecker = !this.showContrastChecker;
      
      if (this.showContrastChecker) {
        this.enableContrastDetection();
      } else {
        this.disableContrastDetection();
      }
    },
    
    enableContrastDetection() {
      document.addEventListener('mouseover', this.checkElementContrast);
    },
    
    disableContrastDetection() {
      document.removeEventListener('mouseover', this.checkElementContrast);
    },
    
    checkElementContrast(event) {
      const element = event.target;
      if (element.nodeType === Node.ELEMENT_NODE) {
        const computedStyles = window.getComputedStyle(element);
        const bgColor = computedStyles.backgroundColor;
        const textColor = computedStyles.color;
        
        // Проверка контрастности (упрощенная логика)
        if (!this.hasSufficientContrast(bgColor, textColor)) {
          element.style.outline = '2px solid red';
        } else {
          element.style.outline = '';
        }
      }
    },
    
    hasSufficientContrast(bgColor, textColor) {
      // Реализация проверки контрастности
      // В реальном приложении используйте полноценную библиотеку
      return true; // Заглушка
    },
    
    toggleScreenReaderMode() {
      this.screenReaderMode = !this.screenReaderMode;
      document.body.classList.toggle('screen-reader-mode', this.screenReaderMode);
    },
    
    toggleKeyboardOnlyMode() {
      this.keyboardOnlyMode = !this.keyboardOnlyMode;
      document.body.classList.toggle('keyboard-only-mode', this.keyboardOnlyMode);
    }
  }
}
</script>

<style>
.accessibility-debugger {
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 10000;
  background: white;
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 4px;
}

.debug-controls button {
  margin: 5px;
  padding: 5px 10px;
  background: #f5f5f5;
  border: 1px solid #ccc;
  cursor: pointer;
}

.contrast-overlay {
  position: fixed;
  top: 50px;
  right: 10px;
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid #ccc;
  padding: 10px;
  border-radius: 4px;
  z-index: 9999;
}
</style>
```

## Особенности для российских разработчиков

### Требования законодательства

С 2025 года в России усилен контроль за доступностью веб-сайтов согласно:

- Федеральный закон №419-ФЗ от 25.11.2024
- ГОСТ Р 52872-2022 (новая редакция)
- Указания ФСТЭК и Роскомнадзора

### Рекомендации по тестированию

1. **Регулярное тестирование**:
   - Еженедельные проверки с помощью axe-core
   - Ежемесячные ручные проверки
   - Квартальные проверки с пользователями с ограниченными возможностями

2. **Документирование результатов**:
   - Отчеты о проверках доступности
   - Протоколы тестирования с вспомогательными технологиями
   - Рекомендации по улучшению

3. **Обучение команды**:
   - Регулярные тренинги по доступности
   - Внедрение проверок в процесс разработки
   - Создание руководства по доступности

## Наилучшие практики тестирования

1. **Внедрение в процесс CI/CD**:
   - Автоматические проверки при каждом коммите
   - Блокировка пулл-реквестов при нарушениях доступности
   - Интеграция с системами отслеживания задач

2. **Комплексный подход**:
   - Автоматизированные + ручные тесты
   - Проверка с разными вспомогательными технологиями
   - Тестирование с реальными пользователями

3. **Мониторинг в продакшене**:
   - Инструменты для мониторинга доступности в реальном времени
   - Алерты при снижении уровня доступности
   - Регулярные аудиты продакшен-среды

## Заключение

Тестирование доступности - это не разовое мероприятие, а непрерывный процесс, который должен быть интегрирован в весь цикл разработки Vue-приложений. Комбинация автоматизированных инструментов, ручных проверок и тестирования с реальными пользователями позволяет создавать действительно доступные веб-приложения.

Следующие темы для изучения:
- [[Семантическая-разметка]]
- [[ARIA-атрибуты]]
- [[Навигация-с-клавиатуры]]
- [[Контрастность]]

## Ключевые теги
#vue #accessibility #testing #automation #frontend #web-development #quality-assurance