---
aliases: [Параметрические переходы, Динамические переходы, Transition с параметрами]
tags: [vue, transition, animation, dynamic, frontend]
---

# Параметризованные-переходы

## Обзор

Параметризованные переходы в Vue.js позволяют динамически изменять анимации в зависимости от входных данных, состояния приложения или пользовательских настроек. Это мощный инструмент для создания гибких анимационных систем, которые могут адаптироваться к различным сценариям использования.

## Основы параметризованных переходов

### Динамические имена переходов

Одним из самых простых способов параметризации переходов является использование динамических значений для атрибута `name`:

```vue
<template>
  <div>
    <div class="controls">
      <select v-model="transitionName">
        <option value="fade">Затухание</option>
        <option value="slide">Скольжение</option>
        <option value="bounce">Отскок</option>
        <option value="scale">Масштабирование</option>
      </select>
      <button @click="toggleElement">Переключить элемент</button>
    </div>
    
    <transition :name="transitionName" mode="out-in">
      <div v-if="show" :key="componentKey" class="transition-element">
        Содержимое с {{ transitionName }} анимацией
      </div>
    </transition>
  </div>
</template>

<script>
export default {
  data() {
    return {
      show: true,
      transitionName: 'fade',
      componentKey: 0
    }
  },
  methods: {
    toggleElement() {
      this.show = !this.show
      this.componentKey += 1 // Принудительный ререндер для анимации
    }
  }
}
</script>

<style>
/* Затухающий переход */
.fade-enter-active, .fade-leave-active {
  transition: opacity 0.3s ease;
}
.fade-enter-from, .fade-leave-to {
  opacity: 0;
}

/* Скользящий переход */
.slide-enter-active, .slide-leave-active {
  transition: all 0.3s ease;
}
.slide-enter-from {
  transform: translateX(-20px);
  opacity: 0;
}
.slide-leave-to {
  transform: translateX(20px);
  opacity: 0;
}

/* Отскакивающий переход */
.bounce-enter-active {
  animation: bounce-in 0.5s;
}
.bounce-leave-active {
  animation: bounce-out 0.3s;
}

@keyframes bounce-in {
  0% { transform: scale(0.8); opacity: 0; }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes bounce-out {
  0% { transform: scale(1); opacity: 1; }
  100% { transform: scale(0.8); opacity: 0; }
}

/* Масштабирующий переход */
.scale-enter-active, .scale-leave-active {
  transition: all 0.3s ease;
}
.scale-enter-from, .scale-leave-to {
  transform: scale(0.8);
  opacity: 0;
}
</style>
```

## Параметризованные CSS-переходы

### Динамические длительности

Использование CSS-переменных для динамического изменения длительности анимаций:

```vue
<template>
  <div>
    <div class="controls">
      <label>
        Длительность анимации: 
        <input 
          type="range" 
          min="100" 
          max="1000" 
          v-model.number="duration" 
          step="50"
        >
        {{ duration }}ms
      </label>
    </div>
    
    <transition 
      :name="transitionName" 
      :duration="duration"
      :css="true"
    >
      <div v-if="show" class="dynamic-duration-element">
        Элемент с динамической длительностью
      </div>
    </transition>
  </div>
</template>

<script>
export default {
  data() {
    return {
      show: true,
      duration: 500,
      transitionName: 'dynamic-duration'
    }
  },
  computed: {
    transitionStyle() {
      return {
        '--duration': `${this.duration}ms`
      }
    }
  }
}
</script>

<style>
.dynamic-duration-enter-active, .dynamic-duration-leave-active {
  transition: all var(--duration, 0.5s) ease;
}
.dynamic-duration-enter-from, .dynamic-duration-leave-to {
  opacity: 0;
  transform: translateY(-20px);
}
</style>
```

### Динамические параметры анимации

Использование вычисляемых свойств для генерации различных параметров анимации:

```vue
<template>
  <div>
    <div class="controls">
      <label>
        Направление: 
        <select v-model="direction">
          <option value="up">Снизу вверх</option>
          <option value="down">Сверху вниз</option>
          <option value="left">Справа налево</option>
          <option value="right">Слева направо</option>
        </select>
      </label>
      
      <label>
        Эффект: 
        <select v-model="effect">
          <option value="slide">Скольжение</option>
          <option value="fade">Затухание</option>
          <option value="scale">Масштаб</option>
        </select>
      </label>
    </div>
    
    <transition :name="computedTransitionName">
      <div v-if="show" class="parametric-element">
        Параметризованный переход: {{ direction }} | {{ effect }}
      </div>
    </transition>
  </div>
</template>

<script>
export default {
  data() {
    return {
      show: true,
      direction: 'up',
      effect: 'slide'
    }
  },
  computed: {
    computedTransitionName() {
      return `${this.effect}-${this.direction}`
    }
  }
}
</script>

<style>
/* Скольжение снизу вверх */
.slide-up-enter-active, .slide-up-leave-active {
  transition: all 0.3s ease;
}
.slide-up-enter-from {
  transform: translateY(20px);
  opacity: 0;
}
.slide-up-leave-to {
  transform: translateY(-20px);
  opacity: 0;
}

/* Скольжение сверху вниз */
.slide-down-enter-active, .slide-down-leave-active {
  transition: all 0.3s ease;
}
.slide-down-enter-from {
  transform: translateY(-20px);
  opacity: 0;
}
.slide-down-leave-to {
  transform: translateY(20px);
  opacity: 0;
}

/* Скольжение справа налево */
.slide-left-enter-active, .slide-left-leave-active {
  transition: all 0.3s ease;
}
.slide-left-enter-from {
  transform: translateX(20px);
  opacity: 0;
}
.slide-left-leave-to {
  transform: translateX(-20px);
  opacity: 0;
}

/* Скольжение слева направо */
.slide-right-enter-active, .slide-right-leave-active {
  transition: all 0.3s ease;
}
.slide-right-enter-from {
  transform: translateX(-20px);
  opacity: 0;
}
.slide-right-leave-to {
  transform: translateX(20px);
  opacity: 0;
}

/* Затухание */
.fade-enter-active, .fade-leave-active {
  transition: opacity 0.3s ease;
}
.fade-enter-from, .fade-leave-to {
  opacity: 0;
}

/* Масштаб */
.scale-enter-active, .scale-leave-active {
  transition: all 0.3s ease;
}
.scale-enter-from, .scale-leave-to {
  transform: scale(0.8);
  opacity: 0;
}
</style>
```

## Параметризованные JavaScript-переходы

### Передача параметров в хуки

Использование пропсов для передачи параметров в JavaScript-анимации:

```vue
<template>
  <div>
    <div class="controls">
      <label>
        Скорость: 
        <input type="range" v-model.number="speed" min="0.1" max="2" step="0.1">
        {{ speed }}x
      </label>
      
      <label>
        Эффект: 
        <select v-model="animationType">
          <option value="spring">Пружинный</option>
          <option value="elastic">Упругий</option>
          <option value="bounce">Отскок</option>
        </select>
      </label>
    </div>
    
    <transition
      @enter="enterWithParams"
      @leave="leaveWithParams"
      :css="false"
    >
      <div v-if="show" ref="animatedElement" class="js-parametric-element">
        JS параметризованная анимация
      </div>
    </transition>
  </div>
</template>

<script>
import { gsap } from 'gsap'

export default {
  props: {
    speed: {
      type: Number,
      default: 1
    },
    animationType: {
      type: String,
      default: 'spring'
    }
  },
  data() {
    return {
      show: true
    }
  },
  methods: {
    enterWithParams(el, done) {
      const duration = 0.8 / this.speed
      const params = this.getAnimationParams(this.animationType, 'enter')
      
      gsap.fromTo(el, 
        params.from,
        {
          ...params.to,
          duration,
          ease: params.ease,
          onComplete: done
        }
      )
    },
    leaveWithParams(el, done) {
      const duration = 0.5 / this.speed
      const params = this.getAnimationParams(this.animationType, 'leave')
      
      gsap.to(el, {
        ...params.to,
        duration,
        ease: params.ease,
        onComplete: done
      })
    },
    getAnimationParams(type, direction) {
      switch(type) {
        case 'spring':
          return direction === 'enter' 
            ? { 
                from: { scale: 0.5, opacity: 0, y: 50 },
                to: { scale: 1, opacity: 1, y: 0 },
                ease: 'elastic.out(1, 0.5)'
              }
            : { 
                to: { scale: 0.5, opacity: 0, y: -50 },
                ease: 'power2.in'
              }
              
        case 'elastic':
          return direction === 'enter'
            ? { 
                from: { scale: 0, opacity: 0, rotation: -15 },
                to: { scale: 1, opacity: 1, rotation: 0 },
                ease: 'elastic.out(1.2, 0.5)'
              }
            : { 
                to: { scale: 0, opacity: 0, rotation: 15 },
                ease: 'elastic.in(1, 0.5)'
              }
              
        case 'bounce':
          return direction === 'enter'
            ? { 
                from: { scale: 0.3, opacity: 0 },
                to: { scale: 1, opacity: 1 },
                ease: 'bounce.out'
              }
            : { 
                to: { scale: 0.3, opacity: 0 },
                ease: 'bounce.in'
              }
                
        default:
          return {
            from: { opacity: 0 },
            to: { opacity: 1 },
            ease: 'power2.out'
          }
      }
    }
  }
}
</script>
```

## Компонент для параметризованных переходов

Создание переиспользуемого компонента с параметризованными переходами:

```vue
<!-- ParametricTransition.vue -->
<template>
  <transition
    :name="computedName"
    :mode="mode"
    :duration="computedDuration"
    :css="css"
    @before-enter="beforeEnter"
    @enter="enter"
    @after-enter="afterEnter"
    @enter-cancelled="enterCancelled"
    @before-leave="beforeLeave"
    @leave="leave"
    @after-leave="afterLeave"
    @leave-cancelled="leaveCancelled"
  >
    <slot></slot>
  </transition>
</template>

<script>
export default {
  name: 'ParametricTransition',
  props: {
    type: {
      type: String,
      default: 'fade',
      validator: value => [
        'fade', 'slide', 'scale', 'bounce', 'flip', 'rotate'
      ].includes(value)
    },
    direction: {
      type: String,
      default: 'vertical',
      validator: value => ['vertical', 'horizontal', 'both'].includes(value)
    },
    duration: {
      type: Number,
      default: 300
    },
    mode: {
      type: String,
      default: 'out-in'
    },
    css: {
      type: Boolean,
      default: true
    },
    customClass: {
      type: String,
      default: ''
    }
  },
  computed: {
    computedName() {
      return `${this.type}-${this.direction}`
    },
    computedDuration() {
      return this.duration
    }
  },
  methods: {
    beforeEnter(el) {
      this.$emit('before-enter', el)
    },
    enter(el, done) {
      this.$emit('enter', el, done)
    },
    afterEnter(el) {
      this.$emit('after-enter', el)
    },
    enterCancelled(el) {
      this.$emit('enter-cancelled', el)
    },
    beforeLeave(el) {
      this.$emit('before-leave', el)
    },
    leave(el, done) {
      this.$emit('leave', el, done)
    },
    afterLeave(el) {
      this.$emit('after-leave', el)
    },
    leaveCancelled(el) {
      this.$emit('leave-cancelled', el)
    }
  }
}
</script>

<style>
/* Затухание */
.fade-vertical-enter-active, .fade-vertical-leave-active,
.fade-horizontal-enter-active, .fade-horizontal-leave-active,
.fade-both-enter-active, .fade-both-leave-active {
  transition: opacity 0.3s ease;
}
.fade-vertical-enter-from, .fade-vertical-leave-to,
.fade-horizontal-enter-from, .fade-horizontal-leave-to,
.fade-both-enter-from, .fade-both-leave-to {
  opacity: 0;
}

/* Скольжение */
.slide-vertical-enter-active, .slide-vertical-leave-active {
  transition: all 0.3s ease;
}
.slide-vertical-enter-from {
  transform: translateY(20px);
  opacity: 0;
}
.slide-vertical-leave-to {
  transform: translateY(-20px);
  opacity: 0;
}

.slide-horizontal-enter-active, .slide-horizontal-leave-active {
  transition: all 0.3s ease;
}
.slide-horizontal-enter-from {
  transform: translateX(20px);
  opacity: 0;
}
.slide-horizontal-leave-to {
  transform: translateX(-20px);
  opacity: 0;
}

/* Масштабирование */
.scale-both-enter-active, .scale-both-leave-active {
  transition: all 0.3s ease;
}
.scale-both-enter-from, .scale-both-leave-to {
  transform: scale(0.8);
  opacity: 0;
}

/* Вращение */
.rotate-both-enter-active, .rotate-both-leave-active {
  transition: all 0.3s ease;
}
.rotate-both-enter-from {
  transform: rotate(-10deg) scale(0.8);
  opacity: 0;
}
.rotate-both-leave-to {
  transform: rotate(10deg) scale(0.8);
  opacity: 0;
}
</style>
```

Использование компонента:

```vue
<template>
  <div>
    <div class="controls">
      <select v-model="transitionType">
        <option value="fade">Затухание</option>
        <option value="slide">Скольжение</option>
        <option value="scale">Масштаб</option>
        <option value="rotate">Вращение</option>
      </select>
      
      <select v-model="transitionDirection">
        <option value="vertical">Вертикально</option>
        <option value="horizontal">Горизонтально</option>
        <option value="both">Оба направления</option>
      </select>
      
      <input 
        type="range" 
        v-model.number="transitionDuration" 
        min="100" 
        max="1000" 
        step="50"
      >
      {{ transitionDuration }}ms
    </div>
    
    <ParametricTransition
      :type="transitionType"
      :direction="transitionDirection"
      :duration="transitionDuration"
      mode="out-in"
    >
      <div :key="componentKey" class="parametric-content">
        {{ transitionType }} | {{ transitionDirection }} | {{ transitionDuration }}ms
      </div>
    </ParametricTransition>
  </div>
</template>

<script>
import ParametricTransition from './ParametricTransition.vue'

export default {
  components: {
    ParametricTransition
  },
  data() {
    return {
      transitionType: 'fade',
      transitionDirection: 'vertical',
      transitionDuration: 300,
      componentKey: 0
    }
  },
  watch: {
    transitionType() {
      this.componentKey += 1
    },
    transitionDirection() {
      this.componentKey += 1
    }
  }
}
</script>
```

## Практические применения

### Анимации навигации с параметрами

Реализация параметризованных переходов для страниц в маршрутизации:

```vue
<!-- RouterTransition.vue -->
<template>
  <transition
    :name="routeTransition"
    mode="out-in"
    :duration="500"
  >
    <slot></slot>
  </transition>
</template>

<script>
export default {
  computed: {
    routeTransition() {
      const toDepth = this.$route.path.split('/').length
      const fromDepth = this.$route.redirectedFrom ? 
        this.$route.redirectedFrom[0].split('/').length : 0
      
      // Если переходим на более глубокий уровень - скольжение слева
      if (toDepth > fromDepth) {
        return 'slide-left'
      } 
      // Если возвращаемся - скольжение справа
      else if (toDepth < fromDepth) {
        return 'slide-right'
      }
      // Иначе стандартное затухание
      else {
        return 'fade'
      }
    }
  }
}
</script>

<style>
.slide-left-enter-active, .slide-left-leave-active {
  transition: all 0.3s ease;
}
.slide-left-enter-from {
  transform: translateX(30px);
  opacity: 0;
}
.slide-left-leave-to {
  transform: translateX(-30px);
  opacity: 0;
}

.slide-right-enter-active, .slide-right-leave-active {
  transition: all 0.3s ease;
}
.slide-right-enter-from {
  transform: translateX(-30px);
  opacity: 0;
}
.slide-right-leave-to {
  transform: translateX(30px);
  opacity: 0;
}
</style>
```

### Анимации списка с параметрами

Параметризованные анимации для элементов списка:

```vue
<template>
  <div>
    <div class="list-controls">
      <select v-model="listAnimation">
        <option value="stagger">Поочередно</option>
        <option value="simultaneous">Одновременно</option>
        <option value="random">Случайно</option>
      </select>
      
      <button @click="addItem">Добавить элемент</button>
      <button @click="removeItem">Удалить элемент</button>
    </div>
    
    <transition-group
      :name="listAnimation === 'stagger' ? 'stagger-list' : 'list'"
      tag="ul"
      class="animated-list"
    >
      <li 
        v-for="(item, index) in items" 
        :key="item.id"
        :data-index="index"
      >
        {{ item.text }}
      </li>
    </transition-group>
  </div>
</template>

<script>
export default {
  data() {
    return {
      items: [
        { id: 1, text: 'Элемент 1' },
        { id: 2, text: 'Элемент 2' },
        { id: 3, text: 'Элемент 3' }
      ],
      listAnimation: 'stagger',
      nextId: 4
    }
  },
  methods: {
    addItem() {
      this.items.push({ id: this.nextId++, text: `Элемент ${this.nextId - 1}` })
    },
    removeItem() {
      if (this.items.length > 0) {
        this.items.pop()
      }
    }
  }
}
</script>

<style>
.animated-list {
  list-style: none;
  padding: 0;
}

.animated-list li {
  padding: 10px;
  margin: 5px 0;
  background: #f0f0f0;
  border-radius: 4px;
}

/* Анимация списка */
.list-enter-active, .list-leave-active {
  transition: all 0.3s ease;
}
.list-enter-from {
  opacity: 0;
  transform: translateY(-20px);
}
.list-leave-to {
  opacity: 0;
  transform: translateY(20px);
}
.list-move {
  transition: transform 0.3s ease;
}

/* Поочередная анимация */
.stagger-list-enter-active {
  transition: all 0.3s ease;
  transition-delay: calc(v-bind(index) * 0.1s);
}
.stagger-list-leave-active {
  transition: all 0.3s ease;
  position: absolute; /* Для правильной анимации при удалении */
}
.stagger-list-enter-from {
  opacity: 0;
  transform: translateY(20px);
}
.stagger-list-leave-to {
  opacity: 0;
  transform: translateY(-20px);
}
</style>
```

## Особенности реализации в российских условиях (2025)

При реализации параметризованных переходов в российских условиях в 2025 году:

1. **Адаптивность под производительность** - использовать более простые анимации на слабых устройствах
2. **Пользовательские настройки** - давать пользователям возможность настраивать интенсивность анимаций
3. **Совместимость с отечественными браузерами** - тестировать параметризованные переходы в Яндекс.Браузере и КриптоПро Browser

```javascript
// Определение производительности устройства и настройка параметров анимации
export function getAnimationParamsForDevice() {
  // Проверяем настройки доступности
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    return { duration: 0, easing: 'linear' }
  }
  
  // Определяем производительность устройства
  const isLowEndDevice = navigator.hardwareConcurrency < 4 || 
                        (navigator.deviceMemory && navigator.deviceMemory < 4)
  
  if (isLowEndDevice) {
    return { 
      duration: 200, // Более быстрые анимации
      easing: 'ease-in-out' 
    }
  }
  
  return { 
    duration: 300,
    easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)' 
  }
}
```

## Связанные темы

- [[Встроенные-переходы]]
- [[Пользовательские-переходы]]
- [[Локальные-переходы]]
- [[Библиотеки-переходов]]
- [[Vue-Router-Transition]]
- [[CSS-анимации-и-переходы]]