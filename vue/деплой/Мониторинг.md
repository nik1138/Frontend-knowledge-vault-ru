---
aliases: ["Мониторинг Vue приложений", "Отслеживание производительности", "Vue Monitoring"]
tags: [vue, monitoring, performance, observability, logging, metrics]
---

# Мониторинг Vue.js приложений

## Обзор

Мониторинг Vue.js приложений — это комплекс мер по отслеживанию состояния, производительности и доступности приложения. Эффективный мониторинг позволяет выявлять проблемы до того, как они повлияют на пользователей, а также оптимизировать производительность и пользовательский опыт.

## Типы мониторинга

### 1. Инфраструктурный мониторинг

Отслеживание состояния серверов, контейнеров и сетевых ресурсов:

- Загрузка CPU и памяти
- Доступность дискового пространства
- Сетевые задержки и пропускная способность
- Состояние Docker-контейнеров

### 2. Прикладной мониторинг (APM)

Application Performance Monitoring для Vue.js приложений:

- Время загрузки страниц
- Время выполнения JavaScript
- Ошибки на клиенте
- Пользовательские метрики

### 3. Логирование

Системы централизованного логирования:

- Логи приложения
- Логи ошибок
- Логи производительности
- Логи безопасности

## Инструменты мониторинга

### Frontend мониторинг

#### 1. Sentry

Sentry — мощный инструмент для отслеживания ошибок:

```javascript
// Установка Sentry в Vue.js приложение
import { createApp } from 'vue'
import * as Sentry from '@sentry/vue'
import { Integrations } from '@sentry/tracing'

const app = createApp(App)

Sentry.init({
  app,
  dsn: 'YOUR_SENTRY_DSN',
  integrations: [
    new Integrations.BrowserTracing()
  ],
  tracesSampleRate: 1.0,
  logErrors: true
})
```

#### 2. LogRocket

LogRocket предоставляет запись сессий пользователей:

```javascript
// В main.js
import LogRocket from 'logrocket'
LogRocket.init('your-app-id')

// Интеграция с Vue
LogRocket.getSessionURL(sessionURL => {
  Sentry.configureScope(scope => {
    scope.setExtra('sessionURL', sessionURL)
  })
})
```

#### 3. Hotjar

Для анализа пользовательского поведения:

```javascript
// В компоненте или в шаблоне
mounted() {
  if (process.env.NODE_ENV === 'production') {
    // Скрипт Hotjar
    (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid: YOUR_HJID, hjsv: 6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  }
}
```

### Backend мониторинг (для SSR)

#### 1. Prometheus + Grafana

Prometheus для сбора метрик, Grafana для визуализации:

```javascript
// В Nuxt.js приложении
// plugins/metrics.js
import client from 'prom-client'

// Регистрация метрик
const httpRequestDuration = new client.Histogram({
  name: 'http_request_duration_seconds',
  help: 'Duration of HTTP requests in seconds',
  labelNames: ['method', 'route', 'status']
})

export default defineEventHandler((event) => {
  const start = Date.now()
  
  event.node.res.on('finish', () => {
    const duration = (Date.now() - start) / 1000
    httpRequestDuration
      .labels(event.node.req.method, event._path, event.node.res.statusCode)
      .observe(duration)
  })
})
```

#### 2. New Relic

New Relic для комплексного мониторинга:

```javascript
// В nuxt.config.ts
export default defineNuxtConfig({
  modules: [
    '@nuxtjs/newrelic'
  ],
  newrelic: {
    config: {
      app_name: 'My Vue App',
      license_key: process.env.NEW_RELIC_LICENSE_KEY,
      logging: {
        level: 'info'
      }
    }
  }
})
```

## Метрики производительности

### Web Vitals

Важные метрики для оценки пользовательского опыта:

```javascript
// Сбор Web Vitals метрик
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'

function sendToAnalytics(metric) {
  // Отправка метрики в аналитическую систему
  gtag('event', metric.name, {
    event_category: 'Web Vitals',
    event_label: metric.id,
    value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
    non_interaction: true
  })
}

getCLS(sendToAnalytics)
getFID(sendToAnalytics)
getFCP(sendToAnalytics)
getLCP(sendToAnalytics)
getTTFB(sendToAnalytics)
```

### Пользовательские метрики

Создание собственных метрик для Vue.js:

```javascript
// В компоненте
export default {
  methods: {
    measureComponentRenderTime() {
      const start = performance.now()
      
      this.$nextTick(() => {
        const end = performance.now()
        console.log(`Component rendered in ${end - start} milliseconds`)
        
        // Отправка метрики в систему мониторинга
        this.$gtag.event('component_render_time', {
          event_category: 'Performance',
          value: Math.round(end - start)
        })
      })
    }
  }
}
```

## Настройка логирования

### Centralized Logging

Конфигурация централизованного логирования:

```javascript
// logger.js
import winston from 'winston'

const logger = winston.createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  defaultMeta: { service: 'vue-frontend' },
  transports: [
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
})

if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.simple()
  }))
}

export default logger
```

### Логирование ошибок

```javascript
// errorHandler.js
export function setupErrorHandling(app) {
  // Глобальный обработчик ошибок Vue
  app.config.errorHandler = (err, instance, info) => {
    console.error('Vue Error:', err)
    console.error('Component:', instance)
    console.error('Info:', info)
    
    // Отправка ошибки в систему мониторинга
    if (process.env.NODE_ENV === 'production') {
      Sentry.captureException(err, {
        contexts: {
          vue: {
            component: instance?.$options.name,
            info: info
          }
        }
      })
    }
  }
  
  // Обработчик необработанных promise ошибок
  window.addEventListener('unhandledrejection', event => {
    console.error('Unhandled Promise Rejection:', event.reason)
    if (process.env.NODE_ENV === 'production') {
      Sentry.captureException(event.reason)
    }
  })
}
```

## Российские особенности мониторинга

### Локальные решения

В 2025 году особенно актуальны локальные решения для мониторинга:

- [[Яндекс.Метрика]] - для веб-аналитики
- [[Mail.Ru Metric]] - альтернатива Google Analytics
- Внутренние решения на базе ELK Stack
- Zabbix для инфраструктурного мониторинга

### Соответствие требованиям

- Соответствие 152-ФЗ (хранение персональных данных)
- Локализация данных в РФ
- Использование российских провайдеров мониторинга

### Российские облака

- [[Яндекс.Облако]] - Managed Service for ClickHouse, Monitoring
- [[МегаФон.Облако]] - сервисы мониторинга
- [[Ростелеком.Облако]] - решения для мониторинга

## Алертинг и уведомления

### Настройка алертов

Пример конфигурации AlertManager для Prometheus:

```yaml
# alertmanager.yml
global:
  smtp_smarthost: 'localhost:25'
  smtp_from: 'alertmanager@example.org'

route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'team-vue'
  
receivers:
- name: 'team-vue'
  email_configs:
  - to: 'vue-team@example.org'
    send_resolved: true
  webhook_configs:
  - url: 'http://127.0.0.1:5001/alert'
  
inhibit_rules:
- source_match:
    severity: 'critical'
  target_match:
    severity: 'warning'
  equal: ['alertname', 'dev', 'instance']
```

### Интеграция с мессенджерами

Уведомления в Telegram:

```javascript
// telegram-alert.js
const TelegramBot = require('node-telegram-bot-api')

class TelegramAlert {
  constructor(token, chatId) {
    this.bot = new TelegramBot(token, { polling: false })
    this.chatId = chatId
  }
  
  async sendAlert(message) {
    try {
      await this.bot.sendMessage(this.chatId, message)
    } catch (error) {
      console.error('Error sending Telegram alert:', error)
    }
  }
}

// Использование
const alertSystem = new TelegramAlert(process.env.TELEGRAM_BOT_TOKEN, process.env.TELEGRAM_CHAT_ID)
```

## Мониторинг производительности

### Key Performance Indicators (KPI)

Основные метрики для Vue.js приложений:

- **FCP (First Contentful Paint)**: Время до первого отображения контента
- **LCP (Largest Contentful Paint)**: Время загрузки основного контента
- **FID (First Input Delay)**: Задержка первого взаимодействия
- **CLS (Cumulative Layout Shift)**: Сдвиг макета
- **TTFB (Time to First Byte)**: Время до первого байта

### Инструменты аудита

#### Lighthouse

Интеграция Lighthouse в CI/CD:

```javascript
// lighthouse-audit.js
const lighthouse = require('lighthouse')
const chromeLauncher = require('chrome-launcher')

async function auditPage(url) {
  const chrome = await chromeLauncher.launch({ chromeFlags: ['--headless'] })
  const options = { logLevel: 'info', output: 'html', onlyCategories: ['performance', 'accessibility', 'best-practices', 'seo'] }
  const runnerResult = await lighthouse(url, options)

  // `.report` is the HTML report as a string
  const reportHtml = runnerResult.report
  console.log('Report is done for', url)

  await chrome.kill()
  return runnerResult.lhr // lighthouse result object
}
```

## Мониторинг безопасности

### Отслеживание уязвимостей

- Использование Snyk или Dependabot для проверки зависимостей
- Регулярные сканирования безопасности
- Мониторинг CVE уязвимостей

### Защита от XSS и CSRF

```javascript
// security-monitor.js
export function setupSecurityMonitoring() {
  // Отслеживание потенциальных XSS атак
  window.addEventListener('securitypolicyviolation', (e) => {
    console.warn('CSP Violation:', e)
    // Отправка в систему мониторинга
    if (process.env.NODE_ENV === 'production') {
      logger.warn('CSP Violation', {
        blockedURI: e.blockedURI,
        violatedDirective: e.violatedDirective,
        originalPolicy: e.originalPolicy
      })
    }
  })
}
```

## Лучшие практики мониторинга

### Снижение шума

- Настройка пороговых значений для алертов
- Группировка связанных событий
- Использование аннотаций для контекста

### Документирование

- Документирование метрик и алертов
- Создание runbook для типичных проблем
- Обновление документации при изменении системы

## Связанные темы

- [[Vue.js]] - основы фреймворка
- [[Статический-деплой]] - особенности мониторинга статических приложений
- [[SSR-деплой]] - особенности мониторинга SSR-приложений
- [[Docker]] - мониторинг контейнеров
- [[CI-CD]] - мониторинг CI/CD процессов

## Заключение

Мониторинг Vue.js приложений — это критически важный элемент обеспечения стабильности и производительности. При правильной настройке и учете российских реалий 2025 года, система мониторинга становится надежным инструментом для поддержки высококачественных веб-приложений.