---
aliases: ["Оптимизация Vue приложений", "Производительность Vue"]
tags: ["#vue", "#performance", "#optimization", "#bundle-size", "#loading-speed"]
---

# Оптимизация

## Обзор

Оптимизация Vue приложений включает в себя широкий спектр методов и подходов, направленных на улучшение производительности, ускорение загрузки и снижение размера бандла. В условиях российского сегмента интернета в 2025 году, где скорость соединения может варьироваться, а доступ к зарубежным CDN ограничен, оптимизация становится особенно важной.

## Методы оптимизации

### 1. Уменьшение размера бандла

#### Использование Tree Shaking

[[Tree Shaking]] позволяет исключить неиспользуемые части кода из финальной сборки. Для этого:

```js
// Правильно - импорт только нужных функций
import { ref, computed } from 'vue'

// Избегать - импорт всего модуля
import * as Vue from 'vue'
```

#### Замена тяжелых библиотек

Вместо крупных библиотек используйте более легковесные альтернативы:

- Lodash → Ramda или собственные утилиты
- Moment.js → Day.js или date-fns
- Полнофункциональные UI-фреймворки → компоненты на основе headless библиотек

#### Использование асинхронных импортов

```vue
<template>
  <component-a v-if="showComponentA" />
  <component-b v-else-if="showComponentB" />
</template>

<script>
export default {
  data() {
    return {
      showComponentA: false,
      showComponentB: false
    }
  },
  components: {
    // Ленивая загрузка компонентов
    ComponentA: () => import('./ComponentA.vue'),
    ComponentB: () => import('./ComponentB.vue')
  }
}
</script>
```

### 2. Оптимизация рендеринга

#### Использование `v-show` vs `v-if`

- Используйте `v-if` для условий, которые редко меняются
- Используйте `v-show` для часто переключающихся условий

```vue
<template>
  <!-- Если состояние редко меняется -->
  <div v-if="userIsAdmin">Admin Panel</div>
  
  <!-- Если состояние часто меняется -->
  <div v-show="isVisible">Toggle Content</div>
</template>
```

#### Правильное использование `v-for` и `v-if`

Избегайте одновременного использования `v-for` и `v-if` на одном элементе:

```vue
<template>
  <!-- Плохо -->
  <div v-for="item in items" v-if="item.visible">
    {{ item.name }}
  </div>
  
  <!-- Хорошо -->
  <div v-for="item in visibleItems" :key="item.id">
    {{ item.name }}
  </div>
</template>

<script>
export default {
  computed: {
    visibleItems() {
      return this.items.filter(item => item.visible)
    }
  }
}
</script>
```

#### Использование `key` атрибутов

Правильное использование `key` помогает Vue эффективно обновлять DOM:

```vue
<template>
  <!-- Правильно - уникальный ключ для каждого элемента -->
  <div v-for="item in items" :key="item.id">
    {{ item.name }}
  </div>
</template>
```

### 3. Оптимизация вычисляемых свойств

#### Использование `computed` для сложных вычислений

```vue
<template>
  <div>{{ expensiveValue }}</div>
</template>

<script>
export default {
  computed: {
    // Вычисляемое свойство кэширует результат
    expensiveValue() {
      return this.items
        .filter(item => item.active)
        .map(item => item.value)
        .reduce((sum, value) => sum + value, 0)
    }
  }
}
</script>
```

#### Использование `memo` для функций

```js
import { memoize } from 'lodash'

export default {
  methods: {
    // Мемоизация сложной функции
    expensiveFunction: memoize(function(params) {
      // Сложные вычисления
      return result
    })
  }
}
```

### 4. Оптимизация изображений

#### Использование современных форматов

- WebP для изображений (поддержка ~95% браузеров в 2025)
- AVIF для максимальной компрессии (поддержка ~80%)
- SVG для иконок и простой графики

#### Lazy loading изображений

```vue
<template>
  <img 
    v-lazy="imageSrc" 
    :alt="imageAlt"
    loading="lazy"
  />
</template>

<script>
// Использование директивы lazy loading
import VueLazyload from 'vue3-lazy'
export default {
  directives: {
    lazy: VueLazyload
  }
}
</script>
```

### 5. Кэширование

#### Кэширование компонентов с помощью `<keep-alive>`

```vue
<template>
  <keep-alive :include="['ComponentA', 'ComponentB']">
    <component :is="currentComponent" />
  </keep-alive>
</template>
```

#### Кэширование HTTP-запросов

```js
// Кэширование API-ответов
const cache = new Map()

async function fetchWithCache(url) {
  if (cache.has(url)) {
    return cache.get(url)
  }
  
  const response = await fetch(url)
  const data = await response.json()
  cache.set(url, data)
  
  return data
}
```

## Инструменты оптимизации

### Vue DevTools

Используйте [[Vue DevTools]] для анализа производительности компонентов и выявления узких мест.

### Bundle Analyzer

Для анализа размера бандла используйте инструменты вроде [[Webpack Bundle Analyzer]] или специфичные для [[Vite]] плагины.

### Performance API

Используйте встроенные браузерные инструменты:

```js
// Измерение времени выполнения
performance.mark('start-operation')
// ... выполнение операции ...
performance.mark('end-operation')
performance.measure('operation', 'start-operation', 'end-operation')
```

## Российские особенности

### CDN и локализация

- Использование российских CDN (например, [[Yandex Cloud CDN]])
- Локализация контента и ресурсов
- Учет особенностей российского сегмента интернета

### Законодательные требования

- Соответствие требованиям ФЗ-152 (персональные данные)
- Использование отечественных решений для аналитики
- Учет ограничений на использование зарубежных сервисов

## Заключение

Оптимизация Vue приложений - это комплексный процесс, требующий учета множества факторов. В 2025 году особенно важно учитывать специфику российского интернета, требования законодательства и ожидания пользователей. Правильная оптимизация позволяет улучшить пользовательский опыт и повысить конверсию.

См. также:
- [[Конфигурация-сборки]]
- [[Code-splitting]]
- [[Lazy-loading]]
- [[Анализ-бандла]]
- [[Vue DevTools]]