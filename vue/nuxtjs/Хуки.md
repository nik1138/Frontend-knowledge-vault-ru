---
aliases: ["Жизненный цикл", "Nuxt Hooks", "События Nuxt"]
tags: [vue, nuxt, lifecycle, hooks, javascript]
---

# Хуки в Nuxt.js

**Хуки** в Nuxt.js - это события, которые вызываются на различных этапах жизненного цикла приложения и модулей. Они позволяют вам выполнять код в определенные моменты, такие как инициализация приложения, создание экземпляра Vue, сборка проекта и т.д.

## Типы хуков

### 1. Хуки приложения (App Hooks)

Эти хуки связаны с жизненным циклом приложения и Vue.js:

- `app:created` - вызывается после создания экземпляра Vue
- `app:beforeMount` - вызывается перед монтированием приложения
- `app:mounted` - вызывается после монтирования приложения

Пример использования:

```javascript
// plugins/app-hooks.js
export default ({ app }) => {
  app.router.beforeEach((to, from, next) => {
    // Выполняется перед каждым переходом по маршруту
    console.log('Переход к', to.path)
    next()
  })
}
```

### 2. Хуки сервера (Server Hooks)

Доступны только на сервере:

- `render:setupMiddleware` - настройка middleware для рендеринга
- `render:beforeResponse` - перед отправкой ответа
- `render:error` - при ошибке рендеринга

Пример:

```javascript
// server-middleware/custom-headers.js
export default function (req, res, next) {
  res.setHeader('X-Custom-Header', 'Nuxt App')
  next()
}
```

### 3. Хуки сборки (Build Hooks)

Выполняются во время процесса сборки:

- `build:before` - перед началом сборки
- `build:done` - после завершения сборки
- `build:compiled` - после компиляции webpack
- `generate:before` - перед генерацией статических файлов
- `generate:done` - после генерации

### 4. Хуки жизненного цикла страницы

#### asyncData

Вызывается до создания компонента, позволяет получить данные до рендеринга:

```vue
<template>
  <div>
    <h1>{{ post.title }}</h1>
    <p>{{ post.content }}</p>
  </div>
</template>

<script>
export default {
  async asyncData({ params, $axios }) {
    const post = await $axios.$get(`/api/posts/${params.id}`)
    return { post }
  }
}
</script>
```

#### fetch

Альтернатива asyncData, доступна в компонентах, не только на страницах:

```vue
<template>
  <div>
    <p v-if="$fetchState.pending">Загрузка...</p>
    <div v-else>
      <h1>{{ title }}</h1>
      <p>{{ content }}</p>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      title: '',
      content: ''
    }
  },
  async fetch() {
    const data = await this.$axios.$get('/api/content')
    this.title = data.title
    this.content = data.content
  }
}
</script>
```

#### beforeCreate

Вызывается перед созданием экземпляра Vue:

```javascript
export default {
  beforeCreate() {
    console.log('Компонент будет создан')
  }
}
```

#### created

Вызывается после создания экземпляра Vue:

```javascript
export default {
  created() {
    console.log('Компонент создан')
    // Подходит для выполнения логики, требующей доступа к экземпляру
  }
}
```

#### beforeMount

Вызывается перед монтированием экземпляра:

```javascript
export default {
  beforeMount() {
    console.log('Компонент будет смонтирован')
  }
}
```

#### mounted

Вызывается после монтирования экземпляра:

```javascript
export default {
  mounted() {
    console.log('Компонент смонтирован')
    // Подходит для взаимодействия с DOM
  }
}
```

## Глобальные хуки в nuxt.config.js

Вы можете использовать хуки в основном конфигурационном файле:

```javascript
// nuxt.config.js
export default {
  hooks: {
    build: {
      before(nuxt, buildOptions) {
        console.log('Сборка начнется')
      },
      done(builder) {
        console.log('Сборка завершена')
      }
    },
    generate: {
      before(generator, generateOptions) {
        console.log('Генерация начнется')
      },
      page(route, path, html) {
        console.log('Страница сгенерирована:', route)
      },
      done(generator) {
        console.log('Генерация завершена')
      }
    }
  }
}
```

## Практическое применение хуков

### Логирование

Хуки полезны для логирования различных событий в приложении:

```javascript
// plugins/logging.js
export default ({ app }, inject) => {
  app.router.beforeEach((to, from, next) => {
    console.log(`Навигация с ${from.path} на ${to.path}`)
    next()
  })
}
```

### Аутентификация

Использование хуков для проверки аутентификации:

```javascript
// plugins/auth.js
export default function ({ store, redirect }) {
  // Проверка аутентификации при инициализации приложения
  if (!store.state.authenticated) {
    redirect('/login')
  }
}
```

### Управление состоянием

Хуки можно использовать для инициализации состояния приложения:

```javascript
// plugins/state.js
export default ({ store, req }) => {
  // Установка начального состояния
  store.commit('SET_USER_AGENT', req ? req.headers['user-agent'] : navigator.userAgent)
}
```

## Хуки в Nuxt 3

В Nuxt 3 появились новые хуки и composables:

```javascript
// plugins/hook-example.ts
export default defineNuxtPlugin((nuxtApp) => {
  nuxtApp.hook('app:created', async (app) => {
    console.log('Приложение создано')
  })

  nuxtApp.hook('page:start', (route) => {
    console.log('Началась загрузка страницы', route.path)
  })

  nuxtApp.hook('page:finish', (route) => {
    console.log('Загрузка страницы завершена', route.path)
  })
})
```

## Состояние на 2025 год в России

В 2025 году хуки Nuxt.js остаются важным инструментом для российских разработчиков, особенно при создании сложных приложений с многоуровневой логикой. Российские компании часто используют хуки для реализации сложных систем аутентификации, логирования и аналитики, адаптированных под местные требования.

> [!note] Примечание
> В условиях санкций и ограничений, российские разработчики активно используют хуки для интеграции с отечественными системами аналитики и аутентификации.

## Связанные темы

- [[Что-такое-Nuxt]] - основы фреймворка
- [[Роутинг]] - маршрутизация в Nuxt.js
- [[Модули]] - расширение функциональности
- [[Деплой]] - деплой приложений
- [[Vue.js]] - жизненный цикл Vue.js
- [[Middleware]] - промежуточное ПО
- [[Nuxt 3]] - особенности новой версии