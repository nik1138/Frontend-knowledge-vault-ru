---
tags:
  - vue
  - security
  - xss
  - frontend
aliases:
  - Защита от межсайтового скриптинга
  - Vue XSS Protection
---

# Защита от XSS (Межсайтовый скриптинг)

## Введение

Межсайтовый скриптинг (XSS) — это тип уязвимости веб-приложений, при котором злоумышленник вводит вредоносный скрипт на веб-страницу, которая затем выполняется в браузере пользователя. Это может привести к краже данных, сессионных идентификаторов, а также к выполнению нежелательных действий от имени пользователя. Vue.js, как и другие фреймворки, предоставляет встроенные механизмы для предотвращения XSS, но разработчики должны понимать, как эти механизмы работают, и следовать лучшим практикам безопасности.

## Типы XSS

Существует три основных типа XSS:

- **Reflected XSS (Отражённый XSS):** Вредоносный скрипт отправляется как часть запроса к серверу, а затем "отражается" обратно в ответе, который отображается пользователю. Это часто происходит через URL-адреса или формы поиска.
- **Stored XSS (Хранимый XSS):** Вредоносный скрипт сохраняется на сервере (например, в базе данных) и затем отображается другим пользователям, когда они просматривают страницу.
- **DOM-based XSS (XSS на основе DOM):** Уязвимость возникает на стороне клиента, когда JavaScript на странице изменяет DOM таким образом, что вредоносный скрипт вставляется в DOM и выполняется.

## Как Vue защищает от XSS

Vue.js по умолчанию защищает разработчиков от XSS в большинстве сценариев:

- **Автоматический HTML-эскейпинг:** При использовании интерполяции данных (например, `{{ data }}`) или директивы `v-text`, Vue автоматически экранирует HTML-символы, такие как `<`, `>`, `&`, `"`, `'`. Это означает, что если вы выводите пользовательский ввод через `{{ userInput }}`, он будет безопасно отображен как текст, а не как HTML.
- **Осторожное использование `v-html`:** Директива `v-html` позволяет вставлять "сырой" HTML. Это может быть уязвимостью, если вставляемый HTML содержит пользовательский ввод. Использовать `v-html` следует с крайней осторожностью и только после тщательной санитизации содержимого.

```vue
<template>
  <div>
    <!-- Безопасно: HTML будет экранирован -->
    <p>{{ userComment }}</p>

    <!-- Потенциально небезопасно: используйте только с санитизированным HTML -->
    <div v-html="sanitizedUserContent"></div>
  </div>
</template>
```

## Практические рекомендации

- **Избегайте `v-html`:** По возможности, избегайте использования `v-html`. Всегда санитизируйте пользовательский ввод перед его использованием с `v-html`.
- **Санитизация данных:** Используйте библиотеки для санитизации HTML (например, `DOMPurify`) при работе с пользовательским контентом, который необходимо отображать как HTML.
- **Валидация входных данных:** Проверяйте и ограничивайте пользовательский ввод на стороне клиента и сервера. Это снижает риск XSS и других уязвимостей.
- **Content Security Policy (CSP):** Настройте CSP на сервере, чтобы ограничить источники, откуда могут загружаться скрипты. Это может помочь смягчить последствия XSS-уязвимости.
- **Используйте HTTPS:** Всегда используйте HTTPS для защиты передачи данных между клиентом и сервером.

## Инструменты и библиотеки

- [DOMPurify](https://github.com/cure53/DOMPurify): Популярная библиотека для санитизации HTML на стороне клиента. Она удаляет потенциально опасные теги и атрибуты.
- [sanitize-html](https://www.npmjs.com/package/sanitize-html): Библиотека для Node.js, которая позволяет санитизировать HTML-контент на сервере.

## Примеры кода

**Небезопасный код:**

```vue
<template>
  <div v-html="userInput"></div> <!-- Опасно! -->
</template>

<script>
export default {
  data() {
    return {
      userInput: '<script>alert("XSS!")</script>' // Пользователь вводит вредоносный скрипт
    }
  }
}
</script>
```

**Безопасный код:**

```vue
<template>
  <div v-html="sanitizedInput"></div>
</template>

<script>
import DOMPurify from 'dompurify'

export default {
  data() {
    return {
      userInput: '<script>alert("XSS!")</script>',
      sanitizedInput: ''
    }
  },
  mounted() {
    // Санитизируем пользовательский ввод перед отображением
    this.sanitizedInput = DOMPurify.sanitize(this.userInput)
  }
}
</script>
```

## Ссылки на другие файлы безопасности

- [[Защита-от-CSRF]]
- [[CSP]]
- [[Валидация-входных-данных]]
- [[Аутентификация]]

## Заключение

Понимание и применение мер защиты от XSS критически важно для обеспечения безопасности Vue-приложений. Хотя Vue предоставляет встроенные механизмы для предотвращения XSS, разработчики должны быть бдительны при работе с пользовательским вводом, особенно при использовании `v-html`. Следуя лучшим практикам, таким как санитизация данных, валидация ввода и использование CSP, можно значительно снизить риск XSS-уязвимостей.
