---
aliases: [Компонентное тестирование, Unit-тестирование компонентов]
tags: [vue, testing, components, unit-test, frontend]
---

# Тестирование-компонентов

## Общие сведения

Тестирование компонентов в Vue.js - это процесс проверки корректности работы отдельных компонентов приложения. В 2025 году для тестирования Vue-компонентов используются современные инструменты и подходы, адаптированные под последние версии Vue 3 и Composition API.

## Основные цели тестирования компонентов

- Проверка корректности отображения данных
- Тестирование реакции на пользовательские события
- Проверка жизненных циклов компонента
- Тестирование взаимодействия с внешними зависимостями
- Обеспечение стабильности при рефакторинге

## Инструменты для тестирования компонентов

### Vue Test Utils

[[Vue Test Utils]] - официальная библиотека для тестирования Vue-компонентов. В 2025 году используется версия, совместимая с Vue 3.

```javascript
import { mount } from '@vue/test-utils'
import MyComponent from '@/components/MyComponent.vue'

describe('MyComponent', () => {
  test('отображает переданные пропсы', async () => {
    const wrapper = mount(MyComponent, {
      props: {
        title: 'Тестовый заголовок'
      }
    })

    expect(wrapper.text()).toContain('Тестовый заголовок')
  })
})
```

### Testing Library

[[Testing Library]] - подход, ориентированный на тестирование с точки зрения пользователя. В контексте Vue используется @testing-library/vue.

```javascript
import { render, fireEvent } from '@testing-library/vue'
import Counter from '@/components/Counter.vue'

test('увеличивает счетчик при клике', async () => {
  const { getByText } = render(Counter)
  const button = getByText('Увеличить')
  
  await fireEvent.click(button)
  
  expect(getByText('Счетчик: 1')).toBeInTheDocument()
})
```

## Типы тестов компонентов

### Snapshot-тесты

Snapshot-тесты позволяют фиксировать структуру компонента и обнаруживать непреднамеренные изменения.

```javascript
import { mount } from '@vue/test-utils'
import MyComponent from '@/components/MyComponent.vue'

test('создает правильный snapshot', () => {
  const wrapper = mount(MyComponent, {
    props: {
      title: 'Тест'
    }
  })

  expect(wrapper.element).toMatchSnapshot()
})
```

### Тестирование Composition API

При тестировании компонентов с Composition API важно учитывать особенности реактивности:

```javascript
import { mount } from '@vue/test-utils'
import { ref } from 'vue'
import MyComponent from '@/components/MyComponent.vue'

test('корректно обрабатывает реактивные данные', async () => {
  const testData = ref('начальное значение')
  const wrapper = mount(MyComponent, {
    props: {
      data: testData.value
    }
  })

  testData.value = 'новое значение'
  await wrapper.vm.$nextTick()

  expect(wrapper.text()).toContain('новое значение')
})
```

## Практические рекомендации

### Паттерн AAA (Arrange, Act, Assert)

Следование паттерну AAA делает тесты более читаемыми:

```javascript
test('обрабатывает клик по кнопке', async () => {
  // Arrange - подготовка
  const wrapper = mount(ButtonComponent, {
    props: {
      disabled: false
    }
  })

  // Act - действие
  await wrapper.find('button').trigger('click')

  // Assert - проверка
  expect(wrapper.emitted('click')).toBeTruthy()
})
```

### Использование моков

Для изоляции компонентов рекомендуется использовать моки внешних зависимостей:

```javascript
import { mount } from '@vue/test-utils'
import axios from 'axios'
import UserList from '@/components/UserList.vue'

jest.mock('axios')

test('загружает пользователей при монтировании', async () => {
  axios.get.mockResolvedValue({
    data: [{ id: 1, name: 'Иван' }]
  })

  const wrapper = mount(UserList)
  
  await wrapper.vm.$nextTick()
  
  expect(wrapper.text()).toContain('Иван')
})
```

### Тестирование асинхронных операций

При тестировании асинхронных операций важно использовать async/await:

```javascript
test('показывает индикатор загрузки', async () => {
  const wrapper = mount(AsyncComponent)
  
  wrapper.vm.loadData()
  await wrapper.vm.$nextTick()
  
  expect(wrapper.find('.loading').exists()).toBe(true)
  
  await new Promise(resolve => setTimeout(resolve, 100))
  
  expect(wrapper.find('.loading').exists()).toBe(false)
})
```

## Особенности российского рынка в 2025 году

- Акцент на локализацию: тесты должны учитывать русификацию интерфейса
- Совместимость с отечественными браузерами и ОС
- Учет требований законодательства (например, ФЗ-152 о персональных данных)
- Ограничения на использование западных сервисов требуют альтернативных решений для тестирования

## Рекомендуемые практики

- Писать тесты до реализации (TDD) для критических компонентов
- Использовать Page Object паттерн для сложных компонентов
- Покрывать тестами как положительные, так и отрицательные сценарии
- Автоматизировать запуск тестов в CI/CD процессах
- Регулярно обновлять snapshot-тесты при преднамеренных изменениях

## См. также

- [[Тестирование-хранилищ]]
- [[E2E-тестирование]]
- [[Vue Test Utils]]
- [[Testing Library]]
- [[Jest]]