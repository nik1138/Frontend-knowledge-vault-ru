---
aliases: [Системное проектирование, Проектирование систем, System Design]
tags: [system-design, architecture, interview, technical-interview, scalability]
---

# Системное проектирование

## Обзор

Системное проектирование - это критическая часть технических собеседований на позиции старшего разработчика, архитектора или техлида. В 2025 году российские IT-компании уделяют особое внимание способности кандидатов проектировать масштабируемые, надежные и эффективные системы.

## Основные концепции

### Масштабируемость

**Масштабируемость** - способность системы обрабатывать увеличивающуюся нагрузку. Существует два типа масштабирования:

- **Горизонтальное масштабирование** (scale-out) - добавление дополнительных узлов
- **Вертикальное масштабирование** (scale-up) - увеличение мощности существующих узлов

**Коэффициент масштабирования** - отношение производительности системы при увеличении ресурсов.

> [!tip] Совет
> В российских компаниях часто спрашивают о проектировании систем, способных выдерживать высокую нагрузку (миллионы пользователей), особенно в компаниях, работающих с потребительскими сервисами.

### Надежность

**Надежность** - способность системы продолжать работу даже при сбоях компонентов. Ключевые аспекты:

- **Отказоустойчивость** (fault tolerance)
- **Восстановление после сбоев**
- **Резервное копирование и восстановление**

### Доступность

**Доступность** - процент времени, в течение которого система доступна для пользователей. Часто выражается в "девятках":

- 99% - 2 дня простоя в год
- 99.9% - 8 часов простоя в год
- 99.99% - 52 минуты простоя в год

## Архитектурные паттерны

### Монолитная архитектура

**Преимущества:**
- Простота разработки и тестирования
- Простая деплоймент-процедура
- Простая отладка и профилирование

**Недостатки:**
- Сложность масштабирования
- Высокая связанность компонентов
- Сложность внедрения новых технологий

### Микросервисная архитектура

**Преимущества:**
- Независимое масштабирование сервисов
- Возможность использования разных технологий
- Изоляция сбоев

**Недостатки:**
- Сложность управления
- Проблемы с сетевыми задержками
- Сложность тестирования

> [!warning] Важно
> В 2025 году российские компании чаще переходят к гибридным архитектурам, где часть функций реализована как микросервисы, а другая - как монолит.

## Компоненты системы

### Балансировщики нагрузки

**Функции:**
- Распределение трафика между серверами
- Проверка работоспособности (health checks)
- Терминация SSL

**Типы:**
- L4 (уровень транспорта)
- L7 (уровень приложения)

**Популярные решения:**
- NGINX
- HAProxy
- AWS ELB

### Кэширование

**Кэширование на уровне приложения:**
- Redis
- Memcached

**CDN (Content Delivery Network):**
- Ускорение доставки статического контента
- Снижение нагрузки на основные серверы

**Стратегии кэширования:**
- Cache-aside
- Write-through
- Write-behind
- Refresh-ahead

### Базы данных

#### Реляционные базы данных (SQL)

**Примеры:** PostgreSQL, MySQL, Oracle

**Преимущества:**
- ACID-транзакции
- Согласованность данных
- Развитые возможности для сложных запросов

**Масштабирование:**
- Репликация (master-slave, master-master)
- Шардинг
- Партитионирование

#### Нереляционные базы данных (NoSQL)

**Типы:**
- **Документоориентированные** (MongoDB, Couchbase)
- **Ключ-значение** (Redis, DynamoDB)
- **Колоночные** (Cassandra, HBase)
- **Графовые** (Neo4j, Amazon Neptune)

**Выбор между SQL и NoSQL:**
- Используйте SQL для транзакционных данных с жесткими требованиями к согласованности
- Используйте NoSQL для высокой доступности и масштабируемости

### Сообщения и очереди

**Системы обмена сообщениями:**
- Apache Kafka
- RabbitMQ
- Amazon SQS
- Apache Pulsar

**Типы взаимодействия:**
- Point-to-point
- Publish-subscribe

## Проектирование систем: пошаговый подход

### 1. Определение требований

**Функциональные требования:**
- Что система должна делать

**Нефункциональные требования:**
- Масштабируемость
- Надежность
- Безопасность
- Производительность

### 2. Расчет емкости

**Пример расчета для системы с 100 млн пользователей:**
- DAU (Daily Active Users): 20 млн
- Запросов в секунду: 20 млн / (24 * 3600) ≈ 231 запрос/сек
- Пиковая нагрузка: 231 * 3 = 700 запросов/сек

### 3. Проектирование компонентов

**Общая архитектура:**
```
[Клиент] → [CDN] → [Балансировщик] → [API Gateway] → [Сервисы] → [Базы данных]
                                    ↓
                                [Кэш (Redis)]
```

### 4. Масштабирование и отказоустойчивость

**Методы:**
- Репликация данных
- Load balancing
- Circuit breaker
- Retry mechanisms

## Популярные задачи на системное проектирование

### Проектирование Twitter/социальной сети

**Компоненты:**
- Timeline service
- Posting service
- Following service
- Notification service

**Технологии:**
- Redis для хранения таймлайнов
- Cassandra для хранения постов
- Kafka для обработки событий

### Проектирование YouTube/видеосервиса

**Компоненты:**
- Upload service
- Video processing
- Recommendation engine
- Content delivery

**Технологии:**
- CDN для доставки видео
- Apache Kafka для обработки метрик
- Machine learning для рекомендаций

### Проектирование Uber/сервиса такси

**Компоненты:**
- Location service
- Matching service
- Payment service
- Rating service

**Технологии:**
- Redis для хранения геолокации
- Real-time matching algorithms
- Payment gateways

## Современные тенденции

### Облачные технологии

**Облачные провайдеры:**
- AWS
- Google Cloud Platform
- Яндекс.Облако
- VK Cloud Solutions

**Контейнеризация:**
- Docker
- Kubernetes
- Service mesh (Istio, Linkerd)

### Serverless архитектура

**Преимущества:**
- Масштабирование "из коробки"
- Оплата только за использование
- Меньше забот об инфраструктуре

**Недостатки:**
- Cold start проблемы
- Ограниченное время выполнения
- Сложность отладки

### Микросервисы и Service Mesh

**Service mesh:**
- Управление сервис-ту-сервис коммуникациями
- Мониторинг и безопасность
- Istio, Linkerd, Consul Connect

## Подготовка к собеседованию

### Ресурсы для изучения

- "Designing Data-Intensive Applications" - Martin Kleppmann
- "System Design Interview" - Alex Xu
- "Site Reliability Engineering" - Google Press
- [[Алгоритмы-и-структуры-данных]] - для понимания основ
- [[Архитектурные-вопросы]] - для подготовки к архитектурным вопросам

### Практика

1. **Решение системных задач** на:
   - System Design Primer
   - InterviewBit
   - Вконтакте Tech Talks

2. **Анализ существующих систем:**
   - Как работает Instagram
   - Как работает Netflix
   - Как работает WhatsApp

> [!note] Важно
> В российских компаниях часто просят учитывать особенности локального рынка: высокие нагрузки, требования к локализации данных, особенности регулирования (например, ФЗ-152).

## Часто задаваемые вопросы

1. **Как масштабировать систему с 1000 до 1000000 пользователей?**
2. **Как обеспечить отказоустойчивость?**
3. **Какие технологии выбрать для хранения данных?**
4. **Как реализовать кэширование?**
5. **Как обеспечить безопасность системы?**