---
aliases: [i18n, Интернационализация приложений]
tags: [programming, localization, internationalization, frontend]
---

# Интернационализация

## Обзор

**Интернационализация** (сокращённо i18n) — это процесс подготовки приложения к локализации на различные языки и региональные стандарты. Это включает в себя структурные изменения в коде, которые позволяют адаптировать приложение к различным культурам без изменения исходного кода.

Интернационализация отличается от [[Локализация-контента|локализации]], которая является следующим этапом и включает фактическое создание переводов и адаптацию контента для конкретной аудитории.

## Основные принципы интернационализации

### 1. Отделение локализуемого контента от кода

Важно избегать жёсткого кодирования строк, дат, чисел и других культурно-зависимых элементов. Вместо этого они должны быть вынесены в отдельные файлы ресурсов.

```javascript
// Плохо: жёсткое кодирование
console.log("Привет, мир!");

// Хорошо: использование системы локализации
const message = i18n.t('greeting');
console.log(message);
```

### 2. Поддержка различных форматов данных

Приложение должно уметь обрабатывать различные форматы дат, времени, чисел и валют в зависимости от локали пользователя. Это включает в себя:

- [[Локализация-дат-и-времени]]
- [[Локализация-валют]]
- Числовые форматы (разделители тысяч, десятичные запятые и точки)

### 3. Гибкая вёрстка

Текст на разных языках может иметь разную длину. Интерфейс должен быть адаптивным, чтобы корректно отображать как короткие, так и длинные строки.

## Инструменты интернационализации

### i18next

Одна из самых популярных библиотек интернационализации для JavaScript-приложений:

```javascript
import i18next from 'i18next';

i18next.init({
  lng: 'ru', // язык по умолчанию
  resources: {
    ru: {
      translation: {
        greeting: "Привет, мир!",
        welcome: "Добро пожаловать на сайт"
      }
    },
    en: {
      translation: {
        greeting: "Hello, world!",
        welcome: "Welcome to the site"
      }
    }
  }
});

// Использование
const greeting = i18next.t('greeting');
```

### React-i18next

Для React-приложений используется расширение i18next:

```jsx
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t, i18n } = useTranslation();
  
  return (
    <div>
      <h1>{t('greeting')}</h1>
      <button onClick={() => i18n.changeLanguage('en')}>
        Переключить на английский
      </button>
    </div>
  );
}
```

## Практические рекомендации

### 1. Структура файлов переводов

Организуйте файлы переводов по модулям или функциональным областям:

```
locales/
├── ru/
│   ├── common.json
│   ├── navigation.json
│   └── footer.json
└── en/
    ├── common.json
    ├── navigation.json
    └── footer.json
```

### 2. Параметры в строках

Используйте параметры в строках для динамического контента:

```javascript
// В файле переводов
{
  "user_greeting": "Привет, {{name}}!"
}

// В коде
const greeting = i18n.t('user_greeting', { name: userName });
```

### 3. Множественное число

Обработка множественного числа требует специального внимания:

```javascript
// В файле переводов
{
  "items_count": "{{count}} элемент",
  "items_count_plural": "{{count}} элементов",
  "items_count_few": "{{count}} элемента"
}

// Использование с автоматическим выбором формы
const message = i18n.t('items_count', { count: itemCount });
```

## Плагины и расширения

### ICU MessageFormat

Для сложных локализационных требований можно использовать формат ICU MessageFormat:

```javascript
{
  "message": "У вас {count, plural, one {# сообщение} few {# сообщения} many {# сообщений} other {# сообщения}}"
}
```

### Динамическая загрузка переводов

Для оптимизации производительности можно загружать переводы по требованию:

```javascript
i18next.use(LanguageDetector).init({
  fallbackLng: 'ru',
  ns: ['common', 'user', 'settings'], // пространства имен
  defaultNS: 'common',
  backend: {
    loadPath: '/locales/{{lng}}/{{ns}}.json'
  }
});
```

## Заключение

Интернационализация — это фундаментальный этап в создании приложений, ориентированных на международную аудиторию. Правильная реализация i18n позволяет значительно упростить процесс [[Локализация-контента|локализации]] и масштабирования приложения на новые рынки.

> [!tip] 
> Начинайте интернационализацию с самого начала разработки проекта, чтобы избежать трудоёмкой переработки кода в будущем.

> [!warning] 
> Не забывайте тестировать приложение с разными локалями, включая языки с правым направлением письма (например, арабский или иврит).