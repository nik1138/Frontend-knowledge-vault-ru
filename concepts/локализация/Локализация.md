---
aliases: [Локализация веб-приложений, Интернационализация, i18n, l10n]
tags: [frontend, localization, internationalization, web-development, javascript]
---

# Локализация веб-приложений

## Обзор

Локализация (сокращённо l10n от "localization" - 10 букв между l и n) — это процесс адаптации веб-приложения для конкретной локали (языка и региона). Это включает в себя перевод пользовательского интерфейса, форматирование дат, чисел, валют и других культурных аспектов, специфичных для конкретной аудитории.

Локализация тесно связана с интернационализацией (i18n), которая представляет собой подготовку приложения к локализации путём изоляции локализуемых элементов и обеспечения поддержки различных языков и регионов.

## Основные понятия

### Интернационализация (i18n)
Интернационализация — это подготовительный этап, на котором приложение разрабатывается так, чтобы его можно было легко адаптировать для различных языков и регионов без изменения исходного кода. Это включает:

- Использование внешних файлов для хранения строк интерфейса
- Поддержку разных направлений текста (LTR/RTL)
- Правильную обработку дат, времени и чисел
- Архитектуру, позволяющую легко переключаться между языками

### Локализация (l10n)
Локализация — это непосредственно процесс перевода и адаптации приложения для конкретной локали. Это включает:

- Перевод текстов интерфейса
- Адаптацию изображений и мультимедиа
- Соблюдение культурных особенностей
- Форматирование данных в соответствии с местными стандартами

## Техническая реализация в фронтенд-разработке

### 1. Структура файлов локализации

Обычно строки интерфейса хранятся в JSON-файлах, разделённых по языкам:

```
locales/
├── en.json
├── ru.json
└── fr.json
```

Пример содержимого `ru.json`:
```json
{
  "welcome": "Добро пожаловать",
  "login": "Войти",
  "settings": {
    "title": "Настройки",
    "language": "Язык"
  },
  "date_format": "DD.MM.YYYY"
}
```

Пример содержимого `en.json`:
```json
{
  "welcome": "Welcome",
  "login": "Login",
  "settings": {
    "title": "Settings",
    "language": "Language"
  },
  "date_format": "MM/DD/YYYY"
}
```

### 2. Простая реализация на JavaScript

Вот пример простой системы локализации на чистом JavaScript:

```javascript
class LocalizationManager {
  constructor() {
    this.currentLocale = 'en';
    this.messages = {};
    this.loadLocale(this.currentLocale);
  }

  async loadLocale(locale) {
    try {
      const response = await fetch(`locales/${locale}.json`);
      this.messages = await response.json();
      this.currentLocale = locale;
      this.updateUI();
    } catch (error) {
      console.error(`Failed to load locale ${locale}:`, error);
    }
  }

  get(key, params = {}) {
    let message = key.split('.').reduce((obj, k) => obj?.[k], this.messages);
    
    if (!message) {
      return key; // Возвращаем ключ, если перевод не найден
    }

    // Подстановка параметров
    Object.keys(params).forEach(param => {
      message = message.replace(`{{${param}}}`, params[param]);
    });

    return message;
  }

  updateUI() {
    // Обновляем все элементы с атрибутом data-i18n
    document.querySelectorAll('[data-i18n]').forEach(element => {
      const key = element.getAttribute('data-i18n');
      const params = this.parseParams(element.getAttribute('data-i18n-params'));
      element.textContent = this.get(key, params);
    });
  }

  parseParams(paramsString) {
    if (!paramsString) return {};
    try {
      return JSON.parse(paramsString);
    } catch {
      return {};
    }
  }

  setLocale(locale) {
    this.loadLocale(locale);
  }
}

// Использование
const i18n = new LocalizationManager();

// Для переключения языка
document.getElementById('language-selector').addEventListener('change', (e) => {
  i18n.setLocale(e.target.value);
});
```

### 3. Использование в HTML

```html
<!DOCTYPE html>
<html>
<head>
  <title data-i18n="welcome">Welcome</title>
</head>
<body>
  <h1 data-i18n="welcome">Welcome</h1>
  <button data-i18n="login">Login</button>
  <div class="settings">
    <h2 data-i18n="settings.title">Settings</h2>
    <label data-i18n="settings.language">Language:</label>
    <select id="language-selector">
      <option value="en">English</option>
      <option value="ru">Русский</option>
    </select>
  </div>
</body>
</html>
```

### 4. Работа с параметрами

Для передачи параметров в строки перевода:

```html
<div data-i18n="greeting" data-i18n-params='{"name": "Иван"}'>
  Hello, {{name}}!
</div>
```

```javascript
// В файле перевода
{
  "greeting": "Привет, {{name}}!"
}
```

## Современные библиотеки локализации

### React (с использованием react-i18next)

```javascript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: {
        translation: {
          "welcome": "Welcome",
          "login": "Login"
        }
      },
      ru: {
        translation: {
          "welcome": "Добро пожаловать",
          "login": "Войти"
        }
      }
    },
    lng: "en",
    fallbackLng: "en",
    interpolation: {
      escapeValue: false
    }
  });

// В компоненте
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t, i18n } = useTranslation();

  const changeLanguage = (language) => {
    i18n.changeLanguage(language);
  };

  return (
    <div>
      <h1>{t('welcome')}</h1>
      <button onClick={() => changeLanguage('ru')}>RU</button>
      <button onClick={() => changeLanguage('en')}>EN</button>
    </div>
  );
}
```

## Лучшие практики

### 1. Используйте уникальные ключи
Вместо использования английского текста в качестве ключа, используйте уникальные идентификаторы:

```javascript
// Плохо
"Save": "Сохранить"

// Хорошо
"button.save": "Сохранить"
"form.submit": "Отправить"
```

### 2. Организуйте переводы иерархически
Используйте вложенные структуры для организации переводов:

```json
{
  "navigation": {
    "home": "Главная",
    "about": "О нас",
    "contact": "Контакты"
  },
  "forms": {
    "login": {
      "username": "Имя пользователя",
      "password": "Пароль",
      "submit": "Войти"
    }
  }
}
```

### 3. Обрабатывайте множественное число
Для корректной обработки форм множественного числа:

```json
{
  "items_count": {
    "one": "{{count}} элемент",
    "few": "{{count}} элемента",
    "many": "{{count}} элементов",
    "other": "{{count}} элемента"
  }
}
```

### 4. Тестируйте с разными языками
Проверяйте, как интерфейс выглядит с разными языками, особенно с RTL-языками (например, арабский, иврит).

## Заключение

Локализация является важной частью разработки современных веб-приложений, особенно если вы планируете охватить международную аудиторию. Правильная архитектура интернационализации позволяет легко добавлять новые языки и регионы без значительных изменений в коде.

## См. также

- [[Интернационализация]]
- [[Форматирование дат]]
- [[Форматирование чисел]]
- [[React i18n]]
- [[Vue i18n]]
- [[Angular i18n]]
- [[Политика доступности]]
- [[Тестирование интерфейса]]
- [[Форматирование валюты]]
- [[Работа с текстом RTL]]

## Категории

#frontend #localization #internationalization #web-development #javascript #react #vue #angular