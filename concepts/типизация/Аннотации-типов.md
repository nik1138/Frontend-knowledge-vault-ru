---
aliases: ["Аннотации типов", "Type Annotations", "Объявление типов"]
tags: [programming, типизация, frontend, typescript, javascript, annotations]
---

# Аннотации типов

## Определение

**Аннотации типов** — это явное указание типов переменных, параметров функций, возвращаемых значений и других сущностей в коде. Аннотации типов позволяют разработчику сообщить компилятору или IDE, какого типа должна быть конкретная переменная или значение.

## Синтаксис в TypeScript

Аннотации типов в TypeScript указываются после имени переменной или параметра с помощью двоеточия:

```typescript
let variableName: Type = value;
function functionName(param: Type): ReturnType { ... }
```

## Базовые типы

### Примитивные типы:
```typescript
let userName: string = "Алексей";
let userAge: number = 25;
let isActive: boolean = true;
let nothing: null = null;
let empty: undefined = undefined;
let bigNumber: bigint = 123n;
let uniqueId: symbol = Symbol("id");
```

### Массивы:
```typescript
let stringArray: string[] = ["один", "два", "три"];
let numberArray: Array<number> = [1, 2, 3]; // альтернативный синтаксис
let mixedArray: (string | number)[] = ["один", 2, "три"]; // массив с union типом
```

## Аннотации для функций

### Параметры и возвращаемый тип:
```typescript
function greetUser(name: string, age: number): string {
  return `Привет, ${name}! Тебе ${age} лет.`;
}

// Функция без возвращаемого значения
function logMessage(message: string): void {
  console.log(message);
}

// Функция с необязательным параметром
function createUser(name: string, age?: number): User {
  return { name, age: age || 0 };
}

// Функция с параметром по умолчанию
function createProduct(name: string, price: number = 0): Product {
  return { name, price };
}

// Функция с rest параметрами
function sum(...numbers: number[]): number {
  return numbers.reduce((acc, curr) => acc + curr, 0);
}
```

### Функциональные типы:
```typescript
// Тип для функции
let calculate: (x: number, y: number) => number;

calculate = function(a: number, b: number): number {
  return a * b;
};

// Использование стрелочных функций как типов
type Operation = (a: number, b: number) => number;
const multiply: Operation = (x, y) => x * y;
```

## Объектные типы

### Inline объектные типы:
```typescript
let user: {
  name: string;
  age: number;
  email?: string; // необязательное свойство
  skills: string[];
} = {
  name: "Алексей",
  age: 25,
  skills: ["JS", "TS"]
};
```

### Интерфейсы:
```typescript
interface User {
  name: string;
  age: number;
  email?: string;
  readonly id: number; // только для чтения
}

let user: User = {
  name: "Алексей",
  age: 25,
  id: 1
};
```

### Типы (Type Aliases):
```typescript
type UserId = number | string;
type UserRole = "admin" | "user" | "guest";

type User = {
  id: UserId;
  name: string;
  role: UserRole;
  permissions: string[];
};

let currentUser: User = {
  id: 1,
  name: "Алексей",
  role: "admin",
  permissions: ["read", "write"]
};
```

## Массивы и кортежи

### Кортежи:
```typescript
// Кортеж - массив с фиксированным количеством элементов известных типов
let userTuple: [string, number, boolean] = ["Алексей", 25, true];

// Деструктуризация с аннотациями
const [name, age, isActive] = userTuple; // типы выводятся автоматически
```

### Readonly массивы:
```typescript
let readOnlyArray: readonly string[] = ["один", "два", "три"];
// readOnlyArray.push("четыре"); // ОШИБКА: метод push не доступен
```

## Union и Intersection типы

### Union типы (или):
```typescript
function formatValue(value: string | number): string {
  if (typeof value === "string") {
    return value.toUpperCase();
  }
  return value.toString();
}

// Тип для результата API
type ApiResponse = User | Error;
```

### Intersection типы (и):
```typescript
interface Address {
  street: string;
  city: string;
}

interface Contact {
  email: string;
  phone: string;
}

type FullContact = Address & Contact; // объект должен иметь все свойства из обоих интерфейсов
```

## Generic типы

```typescript
// Generic функция
function identity<T>(arg: T): T {
  return arg;
}

// Использование
let stringResult = identity<string>("hello");
let numberResult = identity<number>(42);

// Generic интерфейс
interface Container<T> {
  value: T;
}

let stringContainer: Container<string> = { value: "hello" };
let numberContainer: Container<number> = { value: 42 };
```

## Аннотации для асинхронных функций

```typescript
// Promise типы
async function fetchUserData(id: number): Promise<User> {
  const response = await fetch(`/api/users/${id}`);
  return response.json();
}

// Обработка ошибок
async function safeFetchUser(id: number): Promise<User | null> {
  try {
    return await fetchUserData(id);
  } catch (error) {
    console.error("Error fetching user:", error);
    return null;
  }
}
```

## Практические рекомендации для фронтенд-разработчиков

### 1. Аннотации для пропсов в React:
```typescript
interface UserCardProps {
  user: {
    id: number;
    name: string;
    email: string;
  };
  onEdit: (userId: number) => void;
  onDelete: (userId: number) => void;
}

function UserCard({ user, onEdit, onDelete }: UserCardProps) {
  return (
    <div>
      <h3>{user.name}</h3>
      <p>{user.email}</p>
      <button onClick={() => onEdit(user.id)}>Редактировать</button>
      <button onClick={() => onDelete(user.id)}>Удалить</button>
    </div>
  );
}
```

### 2. Аннотации для обработчиков событий:
```typescript
function handleClick(event: React.MouseEvent<HTMLButtonElement>): void {
  console.log("Кнопка нажата");
}

function handleInputChange(event: React.ChangeEvent<HTMLInputElement>): void {
  const value = event.target.value;
  console.log("Новое значение:", value);
}
```

### 3. Аннотации для состояния:
```typescript
import { useState } from 'react';

interface FormState {
  name: string;
  email: string;
  age: number;
}

function UserForm() {
  const [formData, setFormData] = useState<FormState>({
    name: "",
    email: "",
    age: 0
  });

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: name === 'age' ? parseInt(value) : value
    }));
  };
}
```

### 4. Аннотации для API вызовов:
```typescript
interface ApiResponse<T> {
  data: T;
  status: number;
  message: string;
}

interface User {
  id: number;
  name: string;
  email: string;
}

async function fetchUsers(): Promise<ApiResponse<User[]>> {
  const response = await fetch('/api/users');
  return response.json();
}
```

## Когда использовать аннотации типов

> [!tip] Когда использовать аннотации типов
> - **Пустые массивы**: `const users: User[] = [];` (иначе тип будет `any[]`)
> - **Неоднозначные возвращаемые значения**: когда функция может вернуть разные типы
> - **Коллбэки и асинхронные функции**: для явного указания типов параметров и возвращаемых значений
> - **Интерфейсы API**: для документирования структуры данных
> - **Публичные API**: когда код используется другими разработчиками

## Распространенные ошибки

### 1. Избыточные аннотации:
```typescript
// Плохо - избыточно
let userName: string = "Алексей"; // тип выводится автоматически

// Хорошо
const userName = "Алексей";
```

### 2. Использование any:
```typescript
// Плохо
function processData(data: any): any {
  return data;
}

// Лучше
function processData<T>(data: T): T {
  return data;
}
```

### 3. Неполные интерфейсы:
```typescript
// Плохо - не все свойства определены
interface User {
  name: string;
  // другие свойства отсутствуют
}

// Лучше - полное определение
interface User {
  id: number;
  name: string;
  email: string;
  age: number;
  isActive: boolean;
}
```

## Заключение

Аннотации типов — важный инструмент для создания надежного и поддерживаемого кода. Они обеспечивают лучшую автодополнение, документацию кода и помогают избежать многих ошибок на этапе разработки. Для фронтенд-разработчиков аннотации типов особенно важны при работе с API, формами и сложной логикой компонентов.

## См. также
- [[Статическая и динамическая типизация]]
- [[Выведение типов]]
- [[Сильная и слабая типизация]]
- [[TypeScript для фронтенд-разработчиков]]
- [[Generic типы в TypeScript]]
- [[React компоненты с TypeScript]]