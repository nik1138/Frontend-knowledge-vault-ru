---
aliases: [Доступные компоненты, доступные интерактивные элементы]
tags: [доступность, компоненты, a11y, javascript, react]
---

# Доступные компоненты

## Обзор

Доступные компоненты - это интерактивные элементы пользовательского интерфейса, которые могут быть использованы всеми пользователями, включая людей с ограниченными возможностями. Создание доступных компонентов требует понимания принципов доступности, семантической разметки, управления фокусом и взаимодействия с вспомогательными технологиями.

## Основные принципы доступных компонентов

### 1. Управление с клавиатуры

Каждый интерактивный элемент должен быть доступен и управляем с клавиатуры без потери функциональности.

```html
<!-- Правильно: нативный элемент с клавиатурной доступностью -->
<button onclick="doSomething()">Нажми меня</button>

<!-- Правильно: кастомный элемент с клавиатурной доступностью -->
<div role="button" 
     tabindex="0" 
     onclick="doSomething()"
     onkeydown="if(event.key === 'Enter' || event.key === ' ') doSomething()">
  Нажми меня
</div>
```

### 2. Визуальная индикация фокуса

Всегда обеспечивайте четкую визуальную индикацию элемента в фокусе.

```css
/* Обеспечение видимого фокуса */
button:focus,
.custom-button:focus {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}

/* Не отключайте outline без замены на эквивалент */
/* Плохо: */
/* button:focus { outline: none; } */

/* Хорошо: замените на эквивалент */
button:focus {
  outline: none;
  box-shadow: 0 0 0 2px #005fcc;
}
```

### 3. Правильное использование ARIA-атрибутов

Используйте ARIA-атрибуты для предоставления дополнительной информации вспомогательным технологиям.

```html
<!-- Пример доступного кастомного чекбокса -->
<div class="custom-checkbox" 
     role="checkbox" 
     aria-checked="false"
     tabindex="0"
     onclick="toggleCheckbox(this)"
     onkeydown="handleKeydown(event, this)">
  <span class="checkmark"></span>
  <span class="label">Принять условия</span>
</div>

<script>
function toggleCheckbox(checkbox) {
  const isChecked = checkbox.getAttribute('aria-checked') === 'true';
  checkbox.setAttribute('aria-checked', !isChecked);
}

function handleKeydown(event, checkbox) {
  if (event.key === ' ' || event.key === 'Enter') {
    event.preventDefault();
    toggleCheckbox(checkbox);
  }
}
</script>
```

## Реализация доступных компонентов

### 1. Кнопки

#### Нативная кнопка (рекомендуется)
```html
<button type="button" onclick="doAction()">Действие</button>
<button type="submit">Отправить</button>
<button type="reset">Сбросить</button>
```

#### Кастомная кнопка
```html
<span class="custom-button" 
      role="button" 
      tabindex="0"
      onclick="doAction()"
      onkeydown="if(event.key === 'Enter' || event.key === ' ') doAction()">
  Кастомная кнопка
</span>

<style>
.custom-button {
  display: inline-block;
  padding: 8px 16px;
  background-color: #007cba;
  color: white;
  border-radius: 4px;
  cursor: pointer;
  user-select: none;
}

.custom-button:focus {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}

.custom-button:hover {
  background-color: #005a87;
}
</style>
```

### 2. Чекбоксы и переключатели

#### Нативные элементы (рекомендуется)
```html
<label>
  <input type="checkbox" name="terms" value="accepted">
  <span>Принять условия</span>
</label>

<label>
  <input type="radio" name="size" value="small" checked>
  <span>Маленький</span>
</label>
<label>
  <input type="radio" name="size" value="medium">
  <span>Средний</span>
</label>
<label>
  <input type="radio" name="size" value="large">
  <span>Большой</span>
</label>
```

#### Кастомные чекбоксы
```html
<div class="custom-checkbox-container">
  <input type="checkbox" id="custom-checkbox" class="sr-only">
  <label for="custom-checkbox" class="custom-checkbox">
    <span class="checkmark"></span>
    <span class="label-text">Подписаться на рассылку</span>
  </label>
</div>

<style>
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.custom-checkbox {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.checkmark {
  display: inline-block;
  width: 20px;
  height: 20px;
  background-color: white;
  border: 2px solid #666;
  border-radius: 3px;
  margin-right: 8px;
  position: relative;
}

#custom-checkbox:checked + .custom-checkbox .checkmark::after {
  content: "";
  position: absolute;
  left: 5px;
  top: 1px;
  width: 6px;
  height: 12px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: rotate(45deg);
}

#custom-checkbox:checked + .custom-checkbox .checkmark {
  background-color: #007cba;
  border-color: #007cba;
}

.custom-checkbox:focus-within .checkmark {
  outline: 2px solid #005fcc;
  outline-offset: 2px;
}
</style>
```

### 3. Аккордеоны

```html
<div class="accordion">
  <div class="accordion-item">
    <h3>
      <button class="accordion-header" 
              aria-expanded="false" 
              aria-controls="accordion-panel-1"
              onclick="toggleAccordion(this)">
        <span>Заголовок аккордеона</span>
        <span class="accordion-icon">▼</span>
      </button>
    </h3>
    <div id="accordion-panel-1" 
         class="accordion-panel" 
         role="region"
         aria-labelledby="accordion-header"
         hidden>
      <div class="accordion-content">
        <p>Содержимое аккордеона...</p>
      </div>
    </div>
  </div>
</div>

<style>
.accordion {
  border: 1px solid #ddd;
  border-radius: 4px;
}

.accordion-item {
  border-bottom: 1px solid #ddd;
}

.accordion-item:last-child {
  border-bottom: none;
}

.accordion-header {
  width: 100%;
  padding: 12px 16px;
  text-align: left;
  background-color: #f5f5f5;
  border: none;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.accordion-header:focus {
  outline: 2px solid #005fcc;
  outline-offset: -2px;
}

.accordion-icon {
  transition: transform 0.2s ease;
}

.accordion-header[aria-expanded="true"] .accordion-icon {
  transform: rotate(180deg);
}

.accordion-panel {
  padding: 16px;
}
</style>

<script>
function toggleAccordion(button) {
  const isExpanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', !isExpanded);
  
  const panelId = button.getAttribute('aria-controls');
  const panel = document.getElementById(panelId);
  panel.hidden = !panel.hidden;
}
</script>
```

### 4. Вкладки

```html
<div class="tabs" role="tablist" aria-label="Пример вкладок">
  <button id="tab1" 
          class="tab" 
          role="tab" 
          aria-selected="true" 
          aria-controls="panel1"
          onclick="switchTab(this, 'panel1')">
    Вкладка 1
  </button>
  <button id="tab2" 
          class="tab" 
          role="tab" 
          aria-selected="false" 
          aria-controls="panel2"
          onclick="switchTab(this, 'panel2')">
    Вкладка 2
  </button>
  <button id="tab3" 
          class="tab" 
          role="tab" 
          aria-selected="false" 
          aria-controls="panel3"
          onclick="switchTab(this, 'panel3')">
    Вкладка 3
  </button>
</div>

<div id="panel1" 
     class="tab-panel" 
     role="tabpanel" 
     aria-labelledby="tab1">
  Содержимое первой вкладки
</div>
<div id="panel2" 
     class="tab-panel" 
     role="tabpanel" 
     aria-labelledby="tab2"
     hidden>
  Содержимое второй вкладки
</div>
<div id="panel3" 
     class="tab-panel" 
     role="tabpanel" 
     aria-labelledby="tab3"
     hidden>
  Содержимое третьей вкладки
</div>

<style>
.tabs {
  display: flex;
  border-bottom: 1px solid #ddd;
}

.tab {
  padding: 8px 16px;
  border: 1px solid transparent;
  border-bottom: none;
  background: none;
  cursor: pointer;
  border-radius: 4px 4px 0 0;
}

.tab[aria-selected="true"] {
  border: 1px solid #ddd;
  border-bottom: 1px solid white;
  background-color: white;
  margin-bottom: -1px;
}

.tab:focus {
  outline: 2px solid #005fcc;
  outline-offset: -2px;
}

.tab-panel {
  padding: 16px;
  border: 1px solid #ddd;
  border-top: none;
  min-height: 100px;
}
</style>

<script>
function switchTab(tab, panelId) {
  // Сбрасываем все вкладки
  document.querySelectorAll('[role="tab"]').forEach(t => {
    t.setAttribute('aria-selected', 'false');
  });
  document.querySelectorAll('[role="tabpanel"]').forEach(p => {
    p.hidden = true;
  });
  
  // Активируем выбранную вкладку
  tab.setAttribute('aria-selected', 'true');
  document.getElementById(panelId).hidden = false;
  
  // Устанавливаем фокус на активную вкладку
  tab.focus();
}
</script>
```

### 5. Модальные окна

```html
<button onclick="openModal()">Открыть модальное окно</button>

<div id="modal" 
     class="modal" 
     role="dialog" 
     aria-modal="true" 
     aria-labelledby="modal-title"
     hidden>
  <div class="modal-overlay" onclick="closeModal()"></div>
  <div class="modal-content" role="document">
    <header class="modal-header">
      <h2 id="modal-title">Заголовок модального окна</h2>
      <button class="modal-close" 
              aria-label="Закрыть модальное окно"
              onclick="closeModal()">&times;</button>
    </header>
    <div class="modal-body">
      <p>Содержимое модального окна...</p>
    </div>
    <footer class="modal-footer">
      <button onclick="closeModal()">Отмена</button>
      <button class="btn-primary" onclick="confirmAction()">Подтвердить</button>
    </footer>
  </div>
</div>

<style>
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
}

.modal-content {
  position: relative;
  margin: 50px auto;
  width: 90%;
  max-width: 500px;
  background-color: white;
  border-radius: 4px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.modal-header {
  padding: 16px;
  border-bottom: 1px solid #ddd;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-title {
  margin: 0;
}

.modal-close {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-body {
  padding: 16px;
}

.modal-footer {
  padding: 16px;
  border-top: 1px solid #ddd;
  text-align: right;
}

.modal-footer button {
  margin-left: 8px;
}

.modal:focus {
  outline: none;
}
</style>

<script>
let previousActiveElement;

function openModal() {
  previousActiveElement = document.activeElement;
  const modal = document.getElementById('modal');
  modal.hidden = false;
  
  // Устанавливаем фокус на модальное окно
  modal.querySelector('.modal-content').focus();
  
  // Начинаем перехват фокуса
  document.addEventListener('focusin', trapFocus);
}

function closeModal() {
  const modal = document.getElementById('modal');
  modal.hidden = true;
  
  // Возвращаем фокус на элемент, который был активен до открытия модального окна
  if (previousActiveElement) {
    previousActiveElement.focus();
  }
  
  // Останавливаем перехват фокуса
  document.removeEventListener('focusin', trapFocus);
}

function trapFocus(event) {
  const modal = document.getElementById('modal');
  if (!modal.contains(event.target)) {
    const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
    const firstElement = focusableElements[0];
    const lastElement = focusableElements[focusableElements.length - 1];
    
    if (event.shiftKey && event.target === firstElement) {
      lastElement.focus();
      event.preventDefault();
    } else if (!event.shiftKey && event.target === lastElement) {
      firstElement.focus();
      event.preventDefault();
    } else {
      firstElement.focus();
      event.preventDefault();
    }
  }
}

// Закрытие модального окна по клавише Escape
document.addEventListener('keydown', function(event) {
  if (event.key === 'Escape') {
    const modal = document.getElementById('modal');
    if (!modal.hidden) {
      closeModal();
    }
  }
});
</script>
```

## Проверка доступности компонентов

### 1. Автоматизированные инструменты

- **axe-core** - библиотека для тестирования доступности
- **WAVE** - инструмент оценки доступности
- **Lighthouse** - встроен в DevTools Chrome

### 2. Ручное тестирование

1. **Тестирование с клавиатуры**
   - Убедитесь, что все интерактивные элементы доступны с клавиатуры
   - Проверьте порядок фокуса
   - Убедитесь, что визуальная индикация фокуса видна

2. **Тестирование со скринридерами**
   - Проверьте, как компонент описывается скринридером
   - Убедитесь, что ARIA-атрибуты используются правильно
   - Проверьте, что состояние компонента обновляется при изменениях

3. **Тестирование с увеличением масштаба**
   - Увеличьте масштаб до 200-400%
   - Убедитесь, что компоненты остаются функциональными

### 3. Тестирование с реальными пользователями

Получение обратной связи от пользователей с ограниченными возможностями является наиболее ценным способом проверки доступности компонентов.

## Лучшие практики

### 1. Используйте нативные элементы когда это возможно

> [!tip] Совет
> Нативные HTML-элементы уже имеют встроенную доступность. Используйте их вместо создания кастомных элементов, когда это возможно.

### 2. Обеспечьте согласованное поведение

Компоненты должны вести себя предсказуемо и соответствовать ожиданиям пользователей.

### 3. Обновляйте ARIA-атрибуты при изменении состояния

```javascript
// Правильно: обновляем ARIA-атрибуты при изменении состояния
function toggleButton(button) {
  const isPressed = button.getAttribute('aria-pressed') === 'true';
  button.setAttribute('aria-pressed', !isPressed);
  button.textContent = isPressed ? 'Включить' : 'Выключить';
}
```

### 4. Обеспечьте достаточный размер сенсорной области

Для мобильных устройств и пользователей с моторными ограничениями обеспечьте минимальный размер сенсорной области 44x44 пикселя.

```css
.touch-target {
  min-height: 44px;
  min-width: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
}
```

## Заключение

Создание доступных компонентов требует комплексного подхода, включающего правильную семантическую разметку, управление фокусом, использование ARIA-атрибутов и тестирование с вспомогательными технологиями. При правильной реализации доступные компоненты улучшают опыт всех пользователей, а не только тех, кто использует вспомогательные технологии.

См. также:
- [[Стандарты-WCAG]]
- [[Семантическая-верстка]]
- [[ARIA-атрибуты]]

> [!warning] Важно
> Доступность - это не опциональная функция, а базовое требование современного веб-дизайна. Внедряйте принципы доступности с самого начала разработки компонентов.