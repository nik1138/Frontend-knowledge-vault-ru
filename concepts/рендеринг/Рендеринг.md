---
aliases: ["Визуализация", "Отображение", "Frontend Rendering"]
tags: [frontend, web-development, performance]
---

# Рендеринг

**Рендеринг** — это процесс преобразования данных и структуры (DOM, компонентов, шаблонов) в визуальное представление на экране пользователя. Это ключевая концепция в фронтенд-разработке, определяющая, как браузер отображает веб-страницы и как приложения реагируют на изменения данных.

## Основные понятия

Рендеринг включает в себя несколько этапов:
- **Создание DOM** — построение дерева элементов из HTML
- **Создание CSSOM** — построение дерева стилей из CSS
- **Render Tree** — объединение DOM и CSSOM
- **Layout (компоновка)** — вычисление позиций и размеров элементов
- **Paint (отрисовка)** — рисование пикселей на экране
- **Composite (композиция)** — объединение слоев в финальное изображение

## Типы рендеринга

### Клиентский рендеринг (CSR)

Клиентский рендеринг происходит в браузере пользователя. JavaScript-фреймворки, такие как [[React]], [[Vue]] и [[Angular]], создают и обновляют DOM на основе изменений в состоянии приложения.

```javascript
// Пример клиентского рендеринга с React
function App() {
  const [items, setItems] = useState([]);

  useEffect(() => {
    fetch('/api/data')
      .then(response => response.json())
      .then(data => setItems(data));
  }, []);

  return (
    <div>
      {items.map(item => (
        <div key={item.id}>{item.name}</div>
      ))}
    </div>
  );
}
```

### Серверный рендеринг (SSR)

Серверный рендеринг генерирует HTML на сервере и отправляет готовую разметку пользователю. Это улучшает SEO и время до первого отображения контента.

```javascript
// Пример серверного рендеринга с Next.js
export async function getServerSideProps() {
  const res = await fetch('https://api.example.com/data');
  const data = await res.json();

  return {
    props: { data }
  };
}

export default function Page({ data }) {
  return (
    <div>
      {data.map(item => (
        <div key={item.id}>{item.name}</div>
      ))}
    </div>
  );
}
```

### Статический рендеринг (SSG)

Статический рендеринг генерирует HTML во время сборки приложения. Подходит для контента, который не изменяется часто.

```javascript
// Пример статического рендеринга с Next.js
export async function getStaticProps() {
  const res = await fetch('https://api.example.com/data');
  const data = await res.json();

  return {
    props: { data }
  };
}
```

## Оптимизация рендеринга

### Избегайте лишних перерисовок

В фреймворках с виртуальным DOM, таких как React, важно минимизировать количество перерисовок компонентов.

```javascript
// Плохо: каждый рендер создает новую функцию
function Component({ items }) {
  return (
    <div>
      {items.map(item => 
        <ChildComponent 
          key={item.id} 
          onClick={() => console.log(item.id)} // Новая функция при каждом рендере
        />
      )}
    </div>
  );
}

// Хорошо: используем useCallback для сохранения функции
function Component({ items }) {
  const handleClick = useCallback((id) => {
    console.log(id);
  }, []);

  return (
    <div>
      {items.map(item => 
        <ChildComponent 
          key={item.id} 
          onClick={() => handleClick(item.id)}
        />
      )}
    </div>
  );
}
```

### Использование виртуального скроллинга

Для списков с большим количеством элементов используйте виртуальный скроллинг, чтобы рендерить только видимые элементы.

```javascript
import { FixedSizeList as List } from 'react-window';

function VirtualizedList({ items }) {
  const Row = ({ index, style }) => (
    <div style={style}>
      {items[index].name}
    </div>
  );

  return (
    <List
      height={400}
      itemCount={items.length}
      itemSize={50}
    >
      {Row}
    </List>
  );
}
```

## Производительность рендеринга

> [!tip] Совет
> Используйте инструменты разработчика браузера (DevTools) для анализа производительности рендеринга. Вкладки "Performance" и "Rendering" помогут выявить узкие места.

### Измерение производительности

```javascript
// Пример измерения времени рендеринга
const start = performance.now();
// Рендеринг компонента
const end = performance.now();
console.log(`Рендеринг занял ${end - start} миллисекунд`);
```

## Сравнение подходов

| Тип рендеринга | SEO | Время загрузки | Производительность | Сложность |
|----------------|-----|----------------|-------------------|-----------|
| CSR | Низкое | Высокое | Зависит от сложности | Средняя |
| SSR | Высокое | Низкое | Серверная нагрузка | Высокая |
| SSG | Высокое | Очень низкое | Оптимальное | Средняя |

## Связанные концепции

- [[Виртуальный DOM]]
- [[Оптимизация производительности]]
- [[Состояние приложения]]
- [[Компонентный подход]]
- [[Шаблонизация]]

## Заключение

Понимание принципов рендеринга критически важно для создания высокопроизводительных веб-приложений. Выбор подхода зависит от требований к SEO, времени загрузки, частоте обновления контента и сложности приложения.