---
aliases: [Дизайн-системы, Дизайн и архитектура]
tags: [design-system, frontend, architecture, ui, ux]
---

# Дизайн-системы и архитектура

Дизайн-система — это организованный набор взаимосвязанных компонентов, шаблонов и стандартов, которые позволяют создавать согласованные и эффективные пользовательские интерфейсы. Архитектура дизайн-системы определяет, как эти элементы организованы, документированы и интегрированы в процесс разработки.

## Определение и составляющие дизайн-системы

Дизайн-система включает в себя:

- **Дизайнерские токены** — атомарные значения (цвета, шрифты, размеры)
- **Компоненты** — переиспользуемые UI-элементы
- **Паттерны** — решения для распространенных задач
- **Принципы** — руководящие идеи и философия
- **Документация** — инструкции и примеры использования

## Архитектура дизайн-системы

### 1. Уровни дизайн-системы

#### Уровень 1: Дизайнерские токены (Design Tokens)
Атомарные значения, используемые в интерфейсе:

```json
{
  "color": {
    "primary": {
      "50": "#e3f2fd",
      "100": "#bbdefb",
      "500": "#2196f3",
      "700": "#1976d2"
    },
    "neutral": {
      "white": "#ffffff",
      "gray": {
        "100": "#f5f5f5",
        "300": "#e0e0e0",
        "500": "#9e9e9e",
        "700": "#616161",
        "900": "#212121"
      }
    }
  },
  "spacing": {
    "xs": "0.25rem",
    "sm": "0.5rem",
    "md": "1rem",
    "lg": "1.5rem",
    "xl": "2rem"
  },
  "typography": {
    "fontFamily": {
      "primary": "'Roboto', sans-serif",
      "secondary": "'Open Sans', sans-serif"
    },
    "fontSize": {
      "sm": "0.875rem",
      "base": "1rem",
      "lg": "1.125rem",
      "xl": "1.25rem",
      "2xl": "1.5rem"
    }
  }
}
```

#### Уровень 2: Компоненты
Переиспользуемые UI-элементы:

```jsx
// src/components/Button/Button.jsx
import React from 'react';
import PropTypes from 'prop-types';
import classnames from 'classnames';
import tokens from '../../tokens/tokens.json';
import styles from './Button.module.css';

const Button = ({
  children,
  variant = 'primary',
  size = 'medium',
  disabled = false,
  onClick,
  className,
  ...props
}) => {
  const buttonClass = classnames(
    styles.button,
    styles[variant],
    styles[size],
    { [styles.disabled]: disabled },
    className
  );

  // Применение токенов
  const getButtonStyles = () => ({
    '--primary-color': tokens.color.primary['500'],
    '--primary-hover-color': tokens.color.primary['700'],
    '--spacing-md': tokens.spacing.md,
    '--font-size-base': tokens.typography.fontSize.base
  });

  return (
    <button
      className={buttonClass}
      disabled={disabled}
      onClick={onClick}
      style={getButtonStyles()}
      {...props}
    >
      {children}
    </button>
  );
};

Button.propTypes = {
  children: PropTypes.node.isRequired,
  variant: PropTypes.oneOf(['primary', 'secondary', 'success', 'danger']),
  size: PropTypes.oneOf(['small', 'medium', 'large']),
  disabled: PropTypes.bool,
  onClick: PropTypes.func,
  className: PropTypes.string
};

export default Button;
```

#### Уровень 3: Паттерны
Решения для распространенных задач:

```jsx
// Паттерн формы
const FormPattern = ({ fields, onSubmit, submitText = 'Отправить' }) => (
  <form onSubmit={onSubmit} className="form-pattern">
    {fields.map((field) => (
      <div key={field.name} className="form-field">
        <label htmlFor={field.name}>{field.label}</label>
        <Input
          id={field.name}
          name={field.name}
          type={field.type}
          required={field.required}
          placeholder={field.placeholder}
        />
        {field.validation && (
          <span className="form-error">{field.validation.message}</span>
        )}
      </div>
    ))}
    <Button type="submit">{submitText}</Button>
  </form>
);
```

### 2. Структура проекта дизайн-системы

```
design-system/
├── tokens/
│   ├── color.json
│   ├── spacing.json
│   ├── typography.json
│   └── index.js
├── components/
│   ├── atoms/
│   │   ├── Button/
│   │   ├── Input/
│   │   └── Typography/
│   ├── molecules/
│   │   ├── Form/
│   │   ├── Card/
│   │   └── Search/
│   └── organisms/
│       ├── Header/
│       ├── Navigation/
│       └── Layout/
├── patterns/
│   ├── forms.js
│   ├── navigation.js
│   └── layouts.js
├── themes/
│   ├── light.js
│   └── dark.js
├── docs/
│   ├── components/
│   ├── patterns/
│   └── guidelines/
├── utils/
│   ├── color.js
│   ├── typography.js
│   └── responsive.js
├── build/
│   ├── tokens.js
│   └── css-variables.js
├── package.json
└── README.md
```

## Интеграция дизайн-системы в архитектуру приложения

### 1. Использование токенов в CSS

```css
/* build/css-variables.css */
:root {
  /* Цвета */
  --color-primary-500: #2196f3;
  --color-primary-700: #1976d2;
  --color-neutral-white: #ffffff;
  --color-neutral-gray-100: #f5f5f5;
  --color-neutral-gray-900: #212121;

  /* Отступы */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;

  /* Типографика */
  --font-family-primary: 'Roboto', sans-serif;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-weight-bold: 700;
}
```

### 2. Темизация через контекст

```jsx
// context/ThemeContext.jsx
import React, { createContext, useContext } from 'react';
import lightTheme from '../themes/light';
import darkTheme from '../themes/dark';

const ThemeContext = createContext();

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};

export const ThemeProvider = ({ children, initialTheme = 'light' }) => {
  const [themeName, setThemeName] = React.useState(initialTheme);
  const theme = themeName === 'dark' ? darkTheme : lightTheme;

  const toggleTheme = () => {
    setThemeName(prev => prev === 'light' ? 'dark' : 'light');
  };

  return (
    <ThemeContext.Provider value={{ theme, themeName, toggleTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

// Компонент, использующий тему
const ThemedButton = ({ children, ...props }) => {
  const { theme } = useTheme();
  
  return (
    <button
      style={{
        backgroundColor: theme.colors.primary,
        color: theme.colors.text,
        padding: theme.spacing.md,
        borderRadius: theme.borderRadius,
        fontFamily: theme.typography.fontFamily
      }}
      {...props}
    >
      {children}
    </button>
  );
};
```

### 3. Генерация CSS-переменных из токенов

```javascript
// build/generate-css-variables.js
const fs = require('fs');
const path = require('path');

const tokens = require('../tokens/index.json');

function flattenTokens(obj, prefix = '') {
  let flattened = {};
  
  for (const [key, value] of Object.entries(obj)) {
    const newKey = prefix ? `${prefix}-${key}` : key;
    
    if (typeof value === 'object') {
      Object.assign(flattened, flattenTokens(value, newKey));
    } else {
      flattened[newKey] = value;
    }
  }
  
  return flattened;
}

function generateCSSVariables(tokens) {
  const flattened = flattenTokens(tokens);
  let css = ':root {\n';
  
  for (const [key, value] of Object.entries(flattened)) {
    const cssVar = key.replace(/\./g, '-');
    css += `  --${cssVar}: ${value};\n`;
  }
  
  css += '}';
  return css;
}

const cssVariables = generateCSSVariables(tokens);
fs.writeFileSync(
  path.join(__dirname, '../build/css-variables.css'),
  cssVariables
);
```

## Практические рекомендации по созданию дизайн-системы

### 1. Определение архитектурных принципов

```javascript
// docs/principles.js
const designPrinciples = {
  consistency: {
    description: 'Единообразие во всем интерфейсе',
    examples: ['Одинаковые отступы', 'Единая цветовая палитра']
  },
  accessibility: {
    description: 'Доступность для всех пользователей',
    examples: ['Контрастность цветов', 'Поддержка клавиатурной навигации']
  },
  scalability: {
    description: 'Возможность роста и адаптации',
    examples: ['Модульная архитектура', 'Гибкие компоненты']
  },
  usability: {
    description: 'Простота использования',
    examples: ['Интуитивно понятные интерфейсы', 'Очевидные действия']
  }
};
```

### 2. Система документации

Для каждой части дизайн-системы должна быть четкая документация:

```markdown
# Кнопка (Button)

## Описание
Компонент кнопки используется для инициации действий или переходов в интерфейсе.

## Варианты
- Primary: для основных действий
- Secondary: для второстепенных действий
- Success: для успешных действий
- Danger: для потенциально опасных действий

## Пример использования
```jsx
<Button variant="primary" onClick={handleSubmit}>
  Отправить
</Button>
```

## Параметры
| Параметр | Тип | По умолчанию | Описание |
|----------|-----|--------------|----------|
| variant | string | 'primary' | Вариант стиля кнопки |
| size | string | 'medium' | Размер кнопки |
| disabled | boolean | false | Блокировка кнопки |
| onClick | function | - | Обработчик клика |
```

### 3. Система тестирования компонентов

```javascript
// tests/Button.test.js
import React from 'react';
import { render, fireEvent, screen } from '@testing-library/react';
import { ThemeProvider } from '../context/ThemeContext';
import Button from '../components/Button';

const renderWithTheme = (component) => {
  return render(
    <ThemeProvider>
      {component}
    </ThemeProvider>
  );
};

describe('Button Component', () => {
  test('рендерит текст кнопки', () => {
    renderWithTheme(<Button>Нажми меня</Button>);
    expect(screen.getByText('Нажми меня')).toBeInTheDocument();
  });

  test('вызывает onClick при клике', () => {
    const onClick = jest.fn();
    renderWithTheme(<Button onClick={onClick}>Кликни</Button>);
    
    fireEvent.click(screen.getByRole('button'));
    expect(onClick).toHaveBeenCalledTimes(1);
  });

  test('применяет стиль в зависимости от темы', () => {
    renderWithTheme(<Button variant="primary">Темная кнопка</Button>);
    
    const button = screen.getByRole('button');
    expect(button).toHaveStyle('background-color: #2196f3');
  });
});
```

## Инструменты для создания дизайн-систем

### 1. Storybook
Для документирования и демонстрации компонентов:

```javascript
// stories/Button.stories.js
import React from 'react';
import Button from '../src/components/Button';

export default {
  title: 'Components/Button',
  component: Button,
  argTypes: {
    variant: {
      control: { type: 'select' },
      options: ['primary', 'secondary', 'success', 'danger']
    },
    size: {
      control: { type: 'radio' },
      options: ['small', 'medium', 'large']
    }
  }
};

const Template = (args) => <Button {...args} />;

export const Primary = Template.bind({});
Primary.args = {
  children: 'Primary Button',
  variant: 'primary'
};

export const AllVariants = () => (
  <div style={{ display: 'flex', gap: '1rem', flexWrap: 'wrap' }}>
    <Button variant="primary">Primary</Button>
    <Button variant="secondary">Secondary</Button>
    <Button variant="success">Success</Button>
    <Button variant="danger">Danger</Button>
  </div>
);
```

### 2. Style Dictionary
Для управления дизайнерскими токенами:

```json
{
  "source": ["tokens/**/*.json"],
  "platforms": {
    "web": {
      "transformGroup": "web",
      "buildPath": "build/web/",
      "files": [{
        "destination": "variables.css",
        "format": "css/variables"
      }]
    },
    "ios": {
      "transformGroup": "ios",
      "buildPath": "build/ios/",
      "files": [{
        "destination": "StyleDictionaryColor.h",
        "format": "ios/colors.h"
      }]
    }
  }
}
```

## Архитектурные шаблоны для дизайн-систем

### 1. Паттерн "Темизация через CSS-переменные"

```css
/* themes/light.css */
:root {
  --color-bg: #ffffff;
  --color-text: #212121;
  --color-border: #e0e0e0;
}

/* themes/dark.css */
[data-theme="dark"] {
  --color-bg: #212121;
  --color-text: #ffffff;
  --color-border: #424242;
}
```

### 2. Паттерн "Адаптивные компоненты"

```jsx
// components/ResponsiveGrid.jsx
import React from 'react';
import useMediaQuery from '../hooks/useMediaQuery';

const ResponsiveGrid = ({ children, columns = { xs: 1, sm: 2, md: 3, lg: 4 } }) => {
  const isXs = useMediaQuery('(max-width: 575px)');
  const isSm = useMediaQuery('(min-width: 576px) and (max-width: 767px)');
  const isMd = useMediaQuery('(min-width: 768px) and (max-width: 991px)');
  const isLg = useMediaQuery('(min-width: 992px)');

  const getColumnCount = () => {
    if (isLg) return columns.lg;
    if (isMd) return columns.md;
    if (isSm) return columns.sm;
    return columns.xs;
  };

  return (
    <div 
      className="responsive-grid"
      style={{ 
        display: 'grid',
        gridTemplateColumns: `repeat(${getColumnCount()}, 1fr)`,
        gap: 'var(--spacing-md)'
      }}
    >
      {children}
    </div>
  );
};
```

## Масштабирование дизайн-системы

### 1. Модульная архитектура

```javascript
// packages/button/package.json
{
  "name": "@company/design-system-button",
  "version": "1.0.0",
  "dependencies": {
    "@company/design-system-tokens": "^1.0.0"
  }
}

// packages/card/package.json
{
  "name": "@company/design-system-card",
  "version": "1.0.0",
  "dependencies": {
    "@company/design-system-tokens": "^1.0.0",
    "@company/design-system-button": "^1.0.0"
  }
}
```

### 2. Система версионирования

Используйте семантическое версионирование (SemVer) для управления изменениями в дизайн-системе:
- MAJOR: Несовместимые изменения API
- MINOR: Совместимые новые функции
- PATCH: Совместимые исправления багов

## Преимущества интеграции дизайн-системы и архитектуры

1. **Согласованность**: Единый стиль по всему приложению
2. **Эффективность**: Повторное использование компонентов
3. **Масштабируемость**: Легкость добавления новых функций
4. **Поддерживаемость**: Централизованное управление изменениями
5. **Доступность**: Стандартизированные решения для a11y

## Связанные концепции

- [[Архитектурные-паттерны-компонентов]]
- [[Микрофронтенды]]
- [[Компонентные-библиотеки]]
- [[Архитектура-UI-компонентов]]

## Теги

#design-system #frontend #architecture #ui #ux #tokens #components #theming