---
aliases: [Стиль кода, Кодстайл, Соглашения о кодировании, Форматирование кода]
tags: [programming, fundamentals, code-style, best-practices, formatting, conventions]
---

# Стиль кода

## Введение

Стиль кода — это совокупность соглашений и правил, определяющих, как должен быть оформлен и структурирован исходный код. Следование хорошему стилю кода критически важно для создания понятного, поддерживаемого и качественного программного обеспечения.

## Основные принципы стиля кода

### Читаемость

Код должен быть легко читаемым и понятным для других разработчиков:

```javascript
// Плохо - непонятные имена переменных
let d = new Date();
let n = d.getTime();
let r = n * 0.1;

// Хорошо - понятные имена переменных
const currentDate = new Date();
const timestamp = currentDate.getTime();
const calculatedResult = timestamp * 0.1;
```

### Последовательность

Все участки кода должны следовать одним и тем же правилам:

```javascript
// Плохо - непоследовательное форматирование
function calculateTotal(items){
  let total=0;
  for(var i=0;i<items.length;i++){
    total+=items[i].price;
  }
  return total;
}

// Хорошо - последовательное форматирование
function calculateTotal(items) {
  let total = 0;
  
  for (let i = 0; i < items.length; i++) {
    total += items[i].price;
  }
  
  return total;
}
```

### Поддерживаемость

Код должен быть легко изменяемым и расширяемым:

```javascript
// Плохо - сложная функция, выполняющая много задач
function processUserData(userData) {
  // валидация
  if (!userData.email || !userData.email.includes('@')) {
    throw new Error('Invalid email');
  }
  
  // форматирование
  userData.name = userData.name.trim().toUpperCase();
  
  // сохранение
  localStorage.setItem('user', JSON.stringify(userData));
  
  return userData;
}

// Хорошо - разбитая на маленькие функции
function validateUser(userData) {
  if (!userData.email || !userData.email.includes('@')) {
    throw new Error('Invalid email');
  }
  return true;
}

function formatUserName(userData) {
  userData.name = userData.name.trim().toUpperCase();
  return userData;
}

function saveUser(userData) {
  localStorage.setItem('user', JSON.stringify(userData));
}

function processUserData(userData) {
  validateUser(userData);
  const formattedUser = formatUserName(userData);
  saveUser(formattedUser);
  return formattedUser;
}
```

## Именование переменных и функций

### Соглашения об именовании

```javascript
// camelCase для переменных и функций
let userAccountBalance = 0;
function calculateTotalAmount() { /* ... */ }

// PascalCase для конструкторов и классов
class UserProfile { /* ... */ }
function CreateUser(name) { /* ... */ }

// UPPER_SNAKE_CASE для констант
const API_BASE_URL = 'https://api.example.com';
const MAX_RETRY_COUNT = 3;

// Имена функций должны быть глаголами
function getUserData() { /* ... */ }
function validateEmail(email) { /* ... */ }
function calculateTax(income) { /* ... */ }

// Булевы переменные должны начинаться с is, has, can, should
let isLoggedIn = false;
let hasPermission = true;
let canEdit = false;
let shouldUpdate = true;
```

### Понятные и описательные имена

```javascript
// Плохо
let d = new Date();
let u = getUser();
let arr = [];

// Хорошо
let currentDate = new Date();
let currentUser = getUser();
let userPermissions = [];

// Плохо - неинформативные имена
function processData(d) {
  return d.map(i => i * 2);
}

// Хорошо - информативные имена
function doubleValues(numbers) {
  return numbers.map(number => number * 2);
}
```

## Форматирование кода

### Отступы и пробелы

```javascript
// Используем 2 пробела для отступов (или 4, в зависимости от соглашения)
function exampleFunction() {
  if (condition) {
    doSomething();
  }
  
  for (let i = 0; i < 10; i++) {
    console.log(i);
  }
}

// Пробелы вокруг операторов
let result = a + b;
if (condition === true) { /* ... */ }

// Пробелы в вызовах функций
function myFunction(param1, param2) {
  return param1 + param2;
}

// Пробелы в блоках кода
if (condition) {
  // код
} else {
  // код
}
```

### Структура объектов и массивов

```javascript
// Объекты
const user = {
  name: 'Иван',
  age: 30,
  email: 'ivan@example.com',
  isActive: true
};

// Массивы
const items = [
  'яблоко',
  'банан',
  'апельсин'
];

// Длинные массивы или объекты
const complexObject = {
  property1: 'value1',
  property2: 'value2',
  nestedObject: {
    nestedProperty1: 'nestedValue1',
    nestedProperty2: 'nestedValue2'
  }
};
```

### Структура функций

```javascript
// Хорошо структурированная функция
/**
 * Вычисляет налог с дохода
 * @param {number} income - Доход для расчета налога
 * @param {string} region - Регион для определения ставки налога
 * @returns {number} Сумма налога
 */
function calculateIncomeTax(income, region) {
  // Проверка входных данных
  if (typeof income !== 'number' || income < 0) {
    throw new Error('Доход должен быть положительным числом');
  }
  
  // Определение ставки налога
  const taxRate = getTaxRateByRegion(region);
  
  // Вычисление налога
  const taxAmount = income * taxRate;
  
  // Возврат результата
  return taxAmount;
}

function getTaxRateByRegion(region) {
  switch (region) {
    case 'Москва':
    case 'СПб':
      return 0.15;
    default:
      return 0.13;
  }
}
```

## Практические рекомендации

### Длина строк

```javascript
// Плохо - слишком длинная строка
const message = 'Это очень длинное сообщение, которое превышает рекомендуемую длину строки и делает код трудночитаемым';

// Хорошо - разбиение длинных строк
const message = 'Это сообщение разбито на несколько строк ' +
                'для лучшей читаемости кода и соответствия ' +
                'рекомендуемой длине строки';

// Или с использованием шаблонных строк
const longMessage = `
  Это длинное сообщение, которое разбито на несколько строк
  с использованием шаблонных строк для лучшей читаемости
`;
```

### Организация кода

```javascript
// Хорошая организация кода в файле
// 1. Импорты в начале файла
import { validateEmail, formatPhone } from './validators';
import { RussianDateUtils } from './date-utils';

// 2. Константы
const MAX_LOGIN_ATTEMPTS = 3;
const SESSION_TIMEOUT = 3600000; // 1 час в миллисекундах

// 3. Вспомогательные функции
function generateSessionId() {
  return Math.random().toString(36).substring(2, 15);
}

// 4. Основная логика
class AuthService {
  constructor() {
    this.loginAttempts = new Map();
  }
  
  async login(credentials) {
    // реализация логина
  }
  
  logout(sessionId) {
    // реализация логаута
  }
}

// 5. Экспорт
export default AuthService;
```

### Использование современных возможностей

```javascript
// Используем const и let вместо var
const userName = 'Алексей';
let userAge = 25;

// Используем деструктуризацию
const user = { name: 'Мария', age: 28, email: 'maria@example.com' };
const { name, age, email } = user;

// Используем spread оператор
const defaultSettings = { theme: 'light', lang: 'ru' };
const userSettings = { ...defaultSettings, theme: 'dark' };

// Используем стрелочные функции для кратких функций
const double = x => x * x;
const isPositive = num => num > 0;
```

## Современные подходы в фронтенд-разработке

### ESLint и Prettier

ESLint и Prettier — инструменты для автоматического форматирования и проверки стиля кода:

```json
// .eslintrc.json
{
  "extends": ["eslint:recommended"],
  "rules": {
    "indent": ["error", 2],
    "quotes": ["error", "single"],
    "semi": ["error", "always"],
    "no-unused-vars": "error"
  }
}
```

```json
// .prettierrc
{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true,
  "printWidth": 80,
  "tabWidth": 2
}
```

### Соглашения в React

```jsx
// Компоненты именуются в PascalCase
function UserProfile({ user }) {
  // Свойства (props) именуются в camelCase
  const { name, email, isActive } = user;
  
  return (
    <div className="user-profile">
      <h2>{name}</h2>
      <p>{email}</p>
      {isActive && <span>Активен</span>}
    </div>
  );
}

// Именование обработчиков событий
function Button({ onClick, disabled }) {
  const handleClick = () => {
    if (!disabled) {
      onClick();
    }
  };
  
  return (
    <button 
      onClick={handleClick}
      disabled={disabled}
      className={disabled ? 'btn-disabled' : 'btn-active'}
    >
      Нажми меня
    </button>
  );
}
```

### Модульность и организация

```javascript
// Каждый файл содержит одну основную сущность
// user-service.js
export class UserService {
  static async getUser(id) {
    // реализация
  }
  
  static async updateUser(id, data) {
    // реализация
  }
}

// Валидаторы в отдельных файлах
// validators/email-validator.js
export function validateEmail(email) {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}

// utils/array-utils.js
export function removeDuplicates(array) {
  return [...new Set(array)];
}

export function shuffleArray(array) {
  const newArray = [...array];
  for (let i = newArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
  }
  return newArray;
}
```

## Российские реалии и особенности

При разработке для российского рынка:

- Следует учитывать командную разработку
- Обычно требуется строгая типизация (TypeScript)
- Часто требуется поддержка кириллических строк

```javascript
// Пример файла с российскими стандартами
/**
 * Утилиты для работы с российскими персональными данными
 * Следует требованиям 152-ФЗ "О персональных данных"
 */
export class RussianPersonalDataUtils {
  /**
   * Валидирует российский ИНН
   * @param {string} inn - ИНН для валидации
   * @returns {boolean} Результат валидации
   */
  static validateInn(inn) {
    // Удаляем все нецифровые символы
    const digits = inn.replace(/\D/g, '');
    
    // Проверяем длину: 10 для организаций, 12 для физических лиц
    if (digits.length !== 10 && digits.length !== 12) {
      return false;
    }
    
    // Проверка контрольных цифр по алгоритму
    if (digits.length === 10) {
      // Для организаций
      const checkDigit = (2 * +digits[0] + 4 * +digits[1] + 
                         10 * +digits[2] + 3 * +digits[3] + 
                         5 * +digits[4] + 9 * +digits[5] + 
                         4 * +digits[6] + 6 * +digits[7] + 
                         8 * +digits[8]) % 11 % 10;
      
      return +digits[9] === checkDigit;
    } else {
      // Для физических лиц
      const checkDigits = [
        (7 * +digits[0] + 2 * +digits[1] + 4 * +digits[2] + 
         10 * +digits[3] + 3 * +digits[4] + 5 * +digits[5] + 
         9 * +digits[6] + 4 * +digits[7] + 6 * +digits[8] + 
         8 * +digits[9]) % 11 % 10,
        (3 * +digits[0] + 7 * +digits[1] + 2 * +digits[2] + 
         4 * +digits[3] + 10 * +digits[4] + 3 * +digits[5] + 
         5 * +digits[6] + 9 * +digits[7] + 4 * +digits[8] + 
         6 * +digits[9] + 8 * +digits[10]) % 11 % 10
      ];
      
      return +digits[10] === checkDigits[0] && +digits[11] === checkDigits[1];
    }
  }
  
  /**
   * Форматирует российский номер телефона
   * @param {string} phone - Неформатированный номер телефона
   * @returns {string} Форматированный номер телефона
   */
  static formatRussianPhone(phone) {
    // Удаляем все нецифровые символы
    const digits = phone.replace(/\D/g, '');
    
    // Проверяем формат и добавляем префиксы
    if (digits.length === 10) {
      // Формат: 9261234567 -> +7 (926) 123-45-67
      const areaCode = digits.substring(0, 3);
      const exchange = digits.substring(3, 6);
      const number1 = digits.substring(6, 8);
      const number2 = digits.substring(8, 10);
      
      return `+7 (${areaCode}) ${exchange}-${number1}-${number2}`;
    } else if (digits.length === 11 && digits[0] === '8') {
      // Формат: 89261234567 -> +7 (926) 123-45-67
      const areaCode = digits.substring(1, 4);
      const exchange = digits.substring(4, 7);
      const number1 = digits.substring(7, 9);
      const number2 = digits.substring(9, 11);
      
      return `+7 (${areaCode}) ${exchange}-${number1}-${number2}`;
    }
    
    // Если формат не распознан, возвращаем оригинальный номер
    return phone;
  }
}
```

## Заключение

Следование хорошему стилю кода — это инвестиция в будущее проекта. Код с хорошим стилем легче читать, поддерживать и расширять. Современные фронтенд-фреймворки и инструменты предоставляют мощные средства для автоматического форматирования и проверки стиля кода.

> [!tip] Совет
> Используйте инструменты автоматического форматирования кода (ESLint, Prettier) для обеспечения последовательности стиля во всем проекте.

> [!warning] Важно
> Стиль кода должен быть согласован со всей командой разработчиков для обеспечения единообразия.

## См. также

- [[Комментарии-и-документация]]
- [[Отладка]]
- [[Функции]]
- [[Объекты-и-массивы]]