---
aliases: ["Мониторинг веб-приложений", "Frontend Monitoring", "Application Monitoring"]
tags: [frontend, monitoring, performance, observability, web-development]
---

# Мониторинг веб-приложений

## Обзор

Мониторинг веб-приложений - это процесс отслеживания и анализа производительности, доступности и поведения веб-приложений в реальном времени. В контексте фронтенд-разработки, мониторинг позволяет выявлять проблемы с производительностью, отслеживать пользовательский опыт и предотвращать сбои в работе приложения до того, как они повлияют на конечных пользователей.

## Зачем нужен мониторинг

Мониторинг веб-приложений важен по нескольким причинам:

- **Обнаружение проблем до пользователей**: Позволяет выявлять ошибки и проблемы с производительностью до того, как они повлияют на пользователей
- **Улучшение пользовательского опыта**: Помогает обеспечить быструю и надежную работу приложения
- **Оптимизация производительности**: Позволяет идентифицировать узкие места и оптимизировать код
- **Принятие решений на основе данных**: Предоставляет информацию о реальном использовании и поведении приложения

## Типы мониторинга

### 1. Мониторинг ошибок

Отслеживает JavaScript ошибки, возникающие в браузере пользователя. Позволяет быстро выявлять и устранять проблемы в коде.

```javascript
// Пример обработки ошибок с отправкой в систему мониторинга
window.addEventListener('error', (event) => {
  console.error('JavaScript ошибка:', event.error);
  // Отправка ошибки в систему мониторинга (например, Sentry)
  if (typeof Sentry !== 'undefined') {
    Sentry.captureException(event.error);
  }
});

window.addEventListener('unhandledrejection', (event) => {
  console.error('Необработанное обещание:', event.reason);
  if (typeof Sentry !== 'undefined') {
    Sentry.captureException(event.reason);
  }
});
```

### 2. Мониторинг производительности

Отслеживает метрики производительности, такие как время загрузки страницы, время до интерактивности (TTI), время до первого отображения (FCP) и другие.

```javascript
// Пример измерения производительности с использованием Navigation Timing API
function measurePageLoadTime() {
  const perfData = performance.getEntriesByType('navigation')[0];
  const loadTime = perfData.loadEventEnd - perfData.loadEventStart;
  console.log(`Время загрузки страницы: ${loadTime}ms`);
  
  // Отправка данных в систему аналитики
  if (typeof gtag !== 'undefined') {
    gtag('event', 'timing_complete', {
      'name': 'page_load',
      'value': loadTime,
      'event_category': 'Performance'
    });
  }
}

// Вызов функции после загрузки страницы
window.addEventListener('load', measurePageLoadTime);
```

### 3. Мониторинг пользовательских метрик

Отслеживает ключевые пользовательские метрики, такие как время до первого взаимодействия (FID) и кумулятивный сдвиг макета (CLS).

```javascript
// Пример измерения Core Web Vitals
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals';

function sendToAnalytics(metric) {
  // Отправка метрики в аналитическую систему
  gtag('event', metric.name, {
    value: Math.round(metric.name === 'CLS' ? metric.value * 1000 : metric.value),
    event_category: 'Web Vitals',
    event_label: metric.id,
    non_interaction: true,
  });
}

// Измерение метрик
getCLS(sendToAnalytics);
getFID(sendToAnalytics);
getFCP(sendToAnalytics);
getLCP(sendToAnalytics);
getTTFB(sendToAnalytics);
```

## Инструменты мониторинга

### [[Sentry]] - Мониторинг ошибок

Популярный инструмент для отслеживания ошибок в реальном времени с детализацией стека вызовов, пользовательского контекста и среды выполнения.

### [[Google Analytics]] - Аналитика и мониторинг поведения

Позволяет отслеживать пользовательское поведение, производительность страниц и технические метрики.

### [[New Relic]] - Комплексный мониторинг

Предоставляет комплексный набор инструментов для мониторинга производительности фронтенда и бэкенда.

### [[Datadog]] - Инфраструктурный и прикладной мониторинг

Популярный инструмент для мониторинга инфраструктуры и приложений с расширенными возможностями визуализации.

## Практические рекомендации

### Установка базового мониторинга

1. **Добавьте систему отслеживания ошибок** - Интегрируйте инструмент типа [[Sentry]] на ранних этапах разработки
2. **Измеряйте Core Web Vitals** - Используйте библиотеку `web-vitals` для отслеживания ключевых метрик производительности
3. **Логируйте пользовательские действия** - Отслеживайте ключевые пользовательские события для понимания поведения пользователей
4. **Установите алерты** - Настройте уведомления о критических ошибках и проблемах с производительностью

### Пример реализации мониторинга пользовательских действий

```javascript
// Класс для отслеживания пользовательских действий
class UserActionTracker {
  constructor(analyticsProvider) {
    this.analytics = analyticsProvider;
    this.init();
  }

  init() {
    // Отслеживание кликов
    document.addEventListener('click', (event) => {
      this.trackEvent('click', {
        element: event.target.tagName,
        id: event.target.id,
        class: event.target.className
      });
    });

    // Отслеживание просмотров страниц
    window.addEventListener('popstate', () => {
      this.trackPageView(window.location.pathname);
    });
  }

  trackEvent(eventName, properties = {}) {
    if (this.analytics) {
      this.analytics.track(eventName, {
        ...properties,
        timestamp: Date.now(),
        url: window.location.href,
        userAgent: navigator.userAgent
      });
    }
  }

  trackPageView(path) {
    if (this.analytics) {
      this.analytics.pageview(path);
    }
  }
}

// Использование трекера
const tracker = new UserActionTracker(ga);
```

## Заключение

Мониторинг веб-приложений - неотъемлемая часть современной фронтенд-разработки. Он позволяет поддерживать высокое качество пользовательского опыта, выявлять и устранять проблемы до того, как они повлияют на пользователей, и принимать обоснованные решения на основе данных.

Для эффективного мониторинга важно:

- Выбрать подходящие инструменты для ваших нужд
- Установить базовые метрики и алерты
- Регулярно анализировать собранные данные
- Интегрировать мониторинг в процесс разработки

См. также:
- [[Performance Optimization]] - Оптимизация производительности веб-приложений
- [[Error Handling]] - Обработка ошибок в JavaScript
- [[Web Vitals]] - Основные метрики производительности веб-сайтов
- [[Frontend Architecture]] - Архитектурные паттерны фронтенд-разработки