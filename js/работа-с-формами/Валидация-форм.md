---
aliases: ["Валидация форм", "Проверка форм", "Form Validation"]
tags: [javascript, forms, validation, frontend]
---

# Валидация форм в JavaScript

## Обзор

Валидация форм - это критический аспект разработки веб-приложений, обеспечивающий корректность и целостность пользовательских данных. В 2025 году валидация форм в JavaScript включает в себя как клиентские, так и серверные методы проверки данных, с упором на пользовательский опыт и безопасность.

## Зачем нужна валидация форм

- **Безопасность**: Предотвращение вредоносных данных
- **Целостность данных**: Обеспечение корректности вводимой информации
- **Улучшение UX**: Своевременные подсказки пользователю
- **Снижение нагрузки на сервер**: Предварительная проверка данных

## Основные типы валидации

### Клиентская валидация
- Выполняется в браузере
- Быстрая обратная связь
- Не является безопасной сама по себе

### Серверная валидация
- Обязательна для безопасности
- Проверяет данные после получения
- Независима от клиентского кода

## HTML5 валидация

HTML5 предоставляет встроенные механизмы валидации:

```html
<form>
  <input type="email" required placeholder="Электронная почта">
  <input type="password" minlength="8" required placeholder="Пароль">
  <input type="tel" pattern="[0-9]{10}" placeholder="Телефон">
  <button type="submit">Отправить</button>
</form>
```

### Атрибуты валидации HTML5

- `required` - поле обязательно для заполнения
- `minlength`/`maxlength` - минимальная/максимальная длина
- `min`/`max` - минимальное/максимальное значение
- `pattern` - регулярное выражение для проверки
- `type` - тип данных (email, url, number и др.)

## JavaScript валидация

### Встроенные методы

```javascript
const form = document.querySelector('form');
const emailInput = document.querySelector('#email');

form.addEventListener('submit', (e) => {
  if (!emailInput.validity.valid) {
    e.preventDefault();
    // Показать пользователю ошибку
    showErrorMessage(emailInput, getErrorMessage(emailInput));
  }
});

function getErrorMessage(input) {
  if (input.validity.valueMissing) {
    return 'Это поле обязательно';
  } else if (input.validity.typeMismatch) {
    return 'Пожалуйста, введите корректный email';
  }
  return 'Некорректное значение';
}
```

### Проверка на уровне формы

```javascript
function validateForm(form) {
  const inputs = form.querySelectorAll('input[required]');
  let isValid = true;

  inputs.forEach(input => {
    if (!input.value.trim()) {
      markAsInvalid(input, 'Это поле обязательно');
      isValid = false;
    } else if (!isValidValue(input)) {
      markAsInvalid(input, 'Некорректное значение');
      isValid = false;
    } else {
      markAsValid(input);
    }
  });

  return isValid;
}

function markAsInvalid(input, message) {
  input.classList.add('error');
  showFieldError(input, message);
}

function markAsValid(input) {
  input.classList.remove('error');
  hideFieldError(input);
}
```

## Современные подходы к валидации

### Библиотеки валидации

В 2025 году популярны следующие библиотеки:

- **Yup** - схема-основанная валидация
- **Joi** - мощная валидация с поддержкой сложных схем
- **Zod** - TypeScript-совместимая валидация
- **VeeValidate** - для Vue.js приложений
- **Formik** - для React приложений

### Пример с Zod

```javascript
import { z } from 'zod';

const userSchema = z.object({
  email: z.string().email('Некорректный email'),
  password: z.string().min(8, 'Пароль должен содержать минимум 8 символов'),
  age: z.number().min(18, 'Вы должны быть старше 18 лет').max(120, 'Некорректный возраст')
});

function validateUser(data) {
  try {
    const validatedData = userSchema.parse(data);
    return { success: true, data: validatedData };
  } catch (error) {
    return { success: false, errors: error.errors };
  }
}
```

## Практические рекомендации

### 1. Комбинирование методов

Используйте как HTML5, так и JavaScript валидацию:

```javascript
// Используем HTML5 валидацию как базовую
// и дополняем JavaScript для сложных случаев
function enhancedValidation(form) {
  // Проверяем HTML5 валидацию
  if (!form.checkValidity()) {
    form.reportValidity();
    return false;
  }

  // Дополнительная JavaScript проверка
  return customValidation(form);
}
```

### 2. Валидация в реальном времени

```javascript
const inputs = document.querySelectorAll('input[data-validate]');

inputs.forEach(input => {
  input.addEventListener('blur', () => {
    validateField(input);
  });

  input.addEventListener('input', () => {
    // Очищаем ошибку при вводе
    if (input.classList.contains('error')) {
      validateField(input, false); // без показа ошибки
    }
  });
});
```

### 3. А11у (доступность) при валидации

```javascript
function showFieldError(input, message) {
  // Создаем элемент для сообщения об ошибке
  const errorId = `error-${input.id}`;
  let errorElement = document.getElementById(errorId);
  
  if (!errorElement) {
    errorElement = document.createElement('div');
    errorElement.id = errorId;
    errorElement.className = 'form-error';
    errorElement.setAttribute('aria-live', 'polite');
    input.parentNode.insertBefore(errorElement, input.nextSibling);
  }
  
  errorElement.textContent = message;
  input.setAttribute('aria-describedby', errorId);
  input.setAttribute('aria-invalid', 'true');
}
```

## Российские особенности

### 1. Валидация телефонных номеров

```javascript
function validateRussianPhone(phone) {
  const regex = /^(\+7|8)[\s-]?\(?[0-9]{3}\)?[\s-]?[0-9]{3}[\s-]?[0-9]{2}[\s-]?[0-9]{2}$/;
  return regex.test(phone);
}

// Примеры корректных форматов:
// +7 (999) 123-45-67
// 8 999 123-45-67
// +79991234567
```

### 2. Валидация ИНН

```javascript
function validateINN(inn) {
  if (!/^\d{10}$|^\d{12}$/.test(inn)) {
    return false;
  }

  const innArr = inn.split('').map(Number);
  
  if (inn.length === 10) {
    // Проверка для юридических лиц
    const checkDigit = (2 * innArr[0] + 4 * innArr[1] + 10 * innArr[2] + 
                       3 * innArr[3] + 5 * innArr[4] + 9 * innArr[5] + 
                       4 * innArr[6] + 6 * innArr[7] + 8 * innArr[8]) % 11 % 10;
    return checkDigit === innArr[9];
  } else {
    // Проверка для физических лиц
    const checkDigits = [
      (7 * innArr[0] + 2 * innArr[1] + 4 * innArr[2] + 10 * innArr[3] + 
       3 * innArr[4] + 5 * innArr[5] + 9 * innArr[6] + 4 * innArr[7] + 
       6 * innArr[8] + 8 * innArr[9]) % 11 % 10,
      (3 * innArr[0] + 7 * innArr[1] + 2 * innArr[2] + 4 * innArr[3] + 
       10 * innArr[4] + 3 * innArr[5] + 5 * innArr[6] + 9 * innArr[7] + 
       4 * innArr[8] + 6 * innArr[9] + 8 * innArr[10]) % 11 % 10
    ];
    
    return checkDigits[0] === innArr[10] && checkDigits[1] === innArr[11];
  }
}
```

### 3. Валидация ОГРН

```javascript
function validateOGRN(ogrn) {
  if (!/^\d{13}$/.test(ogrn)) return false;
  
  const checkDigit = parseInt(ogrn.substring(0, 12)) % 11 % 10;
  return checkDigit === parseInt(ogrn[12]);
}
```

## Лучшие практики

1. **Не полагайтесь только на клиентскую валидацию** - всегда проверяйте данные на сервере
2. **Обеспечьте понятные сообщения об ошибках** - пользователь должен понимать, что именно неправильно
3. **Используйте валидацию в реальном времени умеренно** - не раздражайте пользователя
4. **Сохраняйте UX при валидации** - не блокируйте ввод, а направляйте
5. **Тестируйте валидацию тщательно** - особенно граничные случаи

## Заключение

Валидация форм в 2025 году требует комплексного подхода, сочетающего HTML5, JavaScript и современные библиотеки. При этом важно учитывать специфику российского рынка, особенно при работе с локализованными данными, такими как ИНН, ОГРН и номера телефонов.

> [!tip] 
> Всегда комбинируйте клиентскую валидацию с серверной - это обеспечивает как удобство пользователя, так и безопасность приложения.

См. также: [[Работа-с-полями-ввода]], [[Обработка-событий-форм]], [[Отправка-данных]], [[Валидация-на-стороне-клиента]]