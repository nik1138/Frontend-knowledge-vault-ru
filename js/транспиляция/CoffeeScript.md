---
aliases: ["Транспиляция CoffeeScript", "CS компиляция", "Кофевый скрипт"]
tags: [coffeescript, javascript, transpilation, frontend-development, legacy-code]
---

# CoffeeScript

**CoffeeScript** — это язык программирования, который компилируется в JavaScript. Созданный Jeremy Ashkenas в 2009 году, CoffeeScript стремится упростить написание JavaScript-кода, предоставляя более чистый и лаконичный синтаксис. Несмотря на снижение популярности в последние годы, CoffeeScript все еще используется в некоторых проектах и может встречаться в российских компаниях при поддержке устаревших систем.

## Основные особенности

- Упрощенный синтаксис по сравнению с JavaScript
- Отсутствие необходимости в точках с запятой и скобках
- Встроенная поддержка списковых выражений и срезов
- Строгая идентификация через отступы (как Python)
- Автоматическое создание замыканий для анонимных функций
- Поддержка шаблонных строк и деструктуризации

## Синтаксис CoffeeScript

### Переменные и функции

```coffeescript
# Объявление переменной
number = 42
opposite = true

# Объявление функции
square = (x) -> x * x

# Условие
if opposite
  number = -42

# Массивы и объекты
list = [1, 2, 3, 4, 5]
math =
  root: Math.sqrt
  square: square
```

### Циклы и условия

```coffeescript
# Цикл for
for num in [1..10]
  console.log num

# Списковые выражения
cubes = (math.cube num for num in list)

# Условные присваивания
greeting = if licensed then "Welcome" else "Not allowed"
```

## Установка и использование

Для установки CoffeeScript выполните:

```bash
npm install --save-dev coffeescript
```

### Компиляция CoffeeScript в JavaScript

Компиляция одного файла:

```bash
npx coffee -c script.coffee
```

Компиляция с отслеживанием изменений:

```bash
npx coffee -w -c script.coffee
```

Компиляция директории:

```bash
npx coffee -c -o js/ src/
```

### Настройка через package.json

```json
{
  "scripts": {
    "build": "coffee -c src/",
    "watch": "coffee -w -c src/"
  }
}
```

## Конфигурационный файл

CoffeeScript не требует сложной конфигурации, но можно создать файл `.coffee` с настройками:

```coffeescript
# .coffee или coffeescript.json
{
  "bare": true,
  "transpile": {
    "presets": ["env"]
  }
}
```

## Современное использование в России

В 2025 году CoffeeScript в российской разработке встречается преимущественно в следующих сценариях:

1. **Поддержка устаревших проектов**: Многие компании, создавшие проекты в 2010-2015 годах, до сих пор используют CoffeeScript и нуждаются в специалистах, способных поддерживать такой код.

2. **Академические и исследовательские проекты**: Некоторые университеты и исследовательские центры продолжают использовать CoffeeScript для прототипирования.

3. **Личные предпочтения разработчиков**: Некоторые российские разработчики предпочитают синтаксис CoffeeScript при создании небольших утилит и скриптов.

## Преимущества и недостатки

### Преимущества

- Чистый, лаконичный синтаксис
- Меньше шаблонного кода
- Автоматические замыкания
- Безопасное сравнение с null/undefined

### Недостатки

- Необходимость дополнительного этапа компиляции
- Сложности с отладкой из-за различий между исходным и транспилированным кодом
- Снижение популярности и поддержки
- Отсутствие нативной поддержки современных возможностей JavaScript

## Практические рекомендации

### Работа с исходными файлами

При работе с CoffeeScript рекомендуется:

1. Хранить исходные `.coffee` файлы в системе контроля версий
2. Использовать source maps для отладки
3. Не хранить транспилированные `.js` файлы в репозитории

### Интеграция с системами сборки

#### Webpack

Для использования CoffeeScript с Webpack установите `coffee-loader`:

```bash
npm install --save-dev coffee-loader
```

Конфигурация webpack:

```javascript
module.exports = {
  module: {
    rules: [
      {
        test: /\.coffee$/,
        use: ['coffee-loader']
      }
    ]
  },
  resolve: {
    extensions: ['.coffee', '.js']
  }
};
```

#### Gulp

Для использования с Gulp:

```javascript
const gulp = require('gulp');
const coffee = require('gulp-coffee');

gulp.task('coffee', function() {
  return gulp.src('src/**/*.coffee')
    .pipe(coffee({bare: true}))
    .pipe(gulp.dest('dist/'));
});
```

## Миграция на современные технологии

В российских компаниях, где используется CoffeeScript, часто возникает необходимость миграции на современные технологии:

1. **Прямая миграция в JavaScript**: Использование автоматических инструментов для преобразования CoffeeScript в JavaScript, а затем ручная доработка.

2. **Миграция в TypeScript**: Постепенная замена CoffeeScript на TypeScript для получения преимуществ статической типизации.

3. **Использование Babel**: Применение Babel для работы с современным JavaScript с сохранением чистого синтаксиса.

## Связанные темы

- [[Babel]] - для интеграции с современными системами сборки
- [[Преобразование-кода]] - общие принципы транспиляции
- [[TypeScript]] - альтернатива CoffeeScript с типизацией
- [[Legacy-код]] - поддержка устаревших систем
- [[Webpack]] - интеграция с системами сборки

## Заключение

Хотя CoffeeScript потерял популярность в пользу современных возможностей JavaScript и TypeScript, он все еще может встречаться в российских проектах, особенно при поддержке устаревших систем. Знание CoffeeScript полезно для разработчиков, сталкивающихся с необходимостью поддержки существующих проектов или работы с унаследованным кодом.