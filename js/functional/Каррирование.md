---
aliases: ["Функциональное каррирование", "Currying"]
tags: [programming, javascript, functional-programming, best-practices]
---

# Каррирование

**Каррирование** (currying) — это техника преобразования функции с несколькими аргументами в последовательность вложенных функций, каждая из которых принимает один аргумент. Это важная концепция функционального программирования, которая позволяет создавать более гибкие и переиспользуемые функции.

## Основная концепция

Каррирование позволяет нам частично применять функции, то есть передавать им не все аргументы сразу, а лишь часть из них, и получать новую функцию, которая ожидает оставшиеся аргументы. Это особенно полезно в российском контексте, где часто требуется создавать специализированные функции на основе более общих, адаптированных под конкретные бизнес-требования.

## Примеры каррирования

### Простой пример

```javascript
// Некаррированная функция
function add(a, b, c) {
    return a + b + c;
}

// Каррированная функция
const curryAdd = a => b => c => a + b + c;

// Использование
console.log(add(1, 2, 3)); // 6
console.log(curryAdd(1)(2)(3)); // 6
```

### Практический пример

```javascript
// Функция для вычисления налога в зависимости от региона
const calculateTax = rate => amount => amount * rate;

// Создание специализированных функций для разных регионов
const calculateTaxMoscow = calculateTax(0.2); // 20% налог в Москве
const calculateTaxSPB = calculateTax(0.18); // 18% налог в Санкт-Петербурге

console.log(calculateTaxMoscow(1000)); // 200
console.log(calculateTaxSPB(1000)); // 180
```

## Реализация универсального каррирования

```javascript
function curry(fn) {
    return function curried(...args) {
        if (args.length >= fn.length) {
            return fn.apply(this, args);
        } else {
            return function (...nextArgs) {
                return curried.apply(this, args.concat(nextArgs));
            };
        }
    };
}

// Пример использования
const multiply = (a, b, c) => a * b * c;
const curriedMultiply = curry(multiply);

console.log(curriedMultiply(2)(3)(4)); // 24
console.log(curriedMultiply(2, 3)(4)); // 24
console.log(curriedMultiply(2, 3, 4)); // 24
```

## Преимущества каррирования

- **Повторное использование**: Можно создавать новые функции на основе существующих с частично применёнными аргументами
- **Композиция**: Каррированные функции легче комбинировать с другими функциями
- **Чистота кода**: Упрощает создание специализированных функций
- **Гибкость**: Позволяет частично применять функции в разных частях приложения

## Практическое применение в российских условиях

В российском программировании каррирование особенно полезно при работе с:

- Формами ввода данных с валидацией
- Фильтрацией данных по различным критериям
- Расчётом налогов и сборов в зависимости от региона
- Созданием специализированных функций для работы с датами и временем в разных часовых поясах

```javascript
// Пример: валидация электронной почты для российских доменов
const validateEmail = domain => email => email.endsWith(domain);

const validateRussianEmail = validateEmail('@mail.ru');
const validateYandexEmail = validateEmail('@yandex.ru');

console.log(validateRussianEmail('user@mail.ru')); // true
console.log(validateYandexEmail('user@gmail.com')); // false
```

## Сравнение с частичным применением

Каррирование часто путают с частичным применением (partial application), но это разные концепции:

- **Каррирование**: Преобразование функции в последовательность функций, каждая из которых принимает один аргумент
- **Частичное применение**: Создание новой функции с предзаполненными аргументами

```javascript
// Каррирование
const curryAdd = a => b => a + b;
const add5 = curryAdd(5);
console.log(add5(3)); // 8

// Частичное применение
const partialAdd = (a, b) => a + b;
const add5Partial = (b) => partialAdd(5, b);
console.log(add5Partial(3)); // 8
```

## Заключение

Каррирование — мощный инструмент функционального программирования, который позволяет создавать более гибкие и переиспользуемые функции. В российской практике разработки это особенно актуально при создании масштабируемых приложений, где часто требуется адаптация общих функций под специфические бизнес-требования.

## См. также

- [[Композиция-функций]]
- [[Неизменяемость]]
- [[Функции-высшего-порядка]]