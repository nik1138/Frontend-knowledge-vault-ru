---
tags: [javascript, arrays, programming, best-practices]
aliases: [Массивы JavaScript, JS массивы]
---

# Комплексное руководство по массивам JavaScript

## Введение

Массивы в JavaScript - это упорядоченные коллекции значений, которые могут содержать элементы любого типа. Они являются одними из самых важных структур данных в JavaScript и обеспечивают мощные методы для манипуляции данными.

## Объявление и инициализация массивов

Массивы можно создать несколькими способами:

```javascript
// Литерал массива (наиболее распространенный способ)
const numbers = [1, 2, 3, 4, 5];
const fruits = ['яблоко', 'банан', 'апельсин'];
const mixed = [1, 'текст', true, null, {name: 'Иван'}];

// Конструктор Array
const emptyArray = new Array(); // Пустой массив
const arrayWithLength = new Array(5); // Массив с длиной 5
const filledArray = new Array(1, 2, 3); // [1, 2, 3]

// Метод Array.of() - создает массив из переданных аргументов
const arr = Array.of(1, 2, 3); // [1, 2, 3]

// Метод Array.from() - создает массив из массивоподобного или итерируемого объекта
const fromString = Array.from('hello'); // ['h', 'e', 'l', 'l', 'o']
```

## Методы массивов

### Перебирающие методы

#### map()
Создает новый массив с результатами вызова функции для каждого элемента:

```javascript
const numbers = [1, 2, 3, 4];
const doubled = numbers.map(num => num * 2); // [2, 4, 6, 8]
```

#### filter()
Создает новый массив с элементами, прошедшими проверку:

```javascript
const numbers = [1, 2, 3, 4, 5, 6];
const evens = numbers.filter(num => num % 2 === 0); // [2, 4, 6]
```

#### reduce()
Сводит элементы массива к одному значению:

```javascript
const numbers = [1, 2, 3, 4];
const sum = numbers.reduce((acc, curr) => acc + curr, 0); // 10
```

#### forEach()
Выполняет функцию для каждого элемента массива:

```javascript
const fruits = ['яблоко', 'банан', 'апельсин'];
fruits.forEach(fruit => console.log(fruit));
```

### Методы поиска

#### find() и findIndex()
Находят первый элемент, удовлетворяющий условию:

```javascript
const users = [
  {id: 1, name: 'Иван'},
  {id: 2, name: 'Мария'},
  {id: 3, name: 'Петр'}
];

const user = users.find(u => u.id === 2); // {id: 2, name: 'Мария'}
const index = users.findIndex(u => u.name === 'Петр'); // 2
```

#### some() и every()
Проверяют, удовлетворяет ли хотя бы один или все элементы условию:

```javascript
const numbers = [1, 2, 3, 4, 5];
const hasEven = numbers.some(n => n % 2 === 0); // true
const allPositive = numbers.every(n => n > 0); // true
```

### Методы изменения

#### push(), pop(), shift(), unshift()
Изменяют массив, добавляя или удаляя элементы:

```javascript
const arr = [1, 2, 3];
arr.push(4);    // Добавляет в конец: [1, 2, 3, 4]
arr.pop();      // Удаляет с конца: [1, 2, 3]
arr.unshift(0); // Добавляет в начало: [0, 1, 2, 3]
arr.shift();    // Удаляет с начала: [1, 2, 3]
```

#### splice()
Добавляет, удаляет или заменяет элементы:

```javascript
const arr = [1, 2, 3, 4, 5];
arr.splice(2, 1);        // Удаляет 1 элемент с индекса 2: [1, 2, 4, 5]
arr.splice(2, 0, 'new'); // Добавляет 'new' с индекса 2: [1, 2, 'new', 4, 5]
arr.splice(1, 1, 'x');   // Заменяет 1 элемент с индекса 1: [1, 'x', 'new', 4, 5]
```

#### slice()
Создает новый массив из части исходного:

```javascript
const arr = [1, 2, 3, 4, 5];
const part = arr.slice(1, 4); // [2, 3, 4] - элементы с 1 по 3 индекс
```

## Деструктуризация массивов

Деструктуризация позволяет извлекать элементы массива в отдельные переменные:

```javascript
const colors = ['красный', 'зеленый', 'синий'];
const [first, second, third] = colors;
console.log(first); // 'красный'

// Пропуск элементов
const [a, , c] = [1, 2, 3]; // a = 1, c = 3

// Оператор остатка
const [first, ...rest] = [1, 2, 3, 4, 5]; // first = 1, rest = [2, 3, 4, 5]

// Значения по умолчанию
const [x = 10, y = 20] = [5]; // x = 5, y = 20
```

## Многомерные массивы

Массивы могут содержать другие массивы, создавая многомерные структуры:

```javascript
const matrix = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9]
];

// Доступ к элементам
console.log(matrix[1][2]); // 6

// Перебор многомерного массива
matrix.forEach(row => {
  row.forEach(cell => console.log(cell));
});
```

## Оператор расширения (Spread)

Оператор `...` позволяет развертывать массивы:

```javascript
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];

// Объединение массивов
const combined = [...arr1, ...arr2]; // [1, 2, 3, 4, 5, 6]

// Копирование массива
const copy = [...arr1]; // [1, 2, 3]

// Передача элементов как аргументов
Math.max(...[1, 2, 3]); // 3
```

## Производительность массивов

При работе с массивами важно учитывать производительность:

- Методы, изменяющие исходный массив (push, pop, shift, unshift, splice) могут быть быстрее
- Методы, создающие новые массивы (map, filter, slice) требуют дополнительной памяти
- Для больших массивов избегайте циклов for...in, используйте for...of или обычный for
- Используйте `Array.from()` или spread-оператор с осторожностью для больших коллекций

## TypedArray

TypedArray предоставляет буферы для работы с бинарными данными:

```javascript
const int8 = new Int8Array(5); // Массив из 5 8-битных целых чисел
const float32 = new Float32Array([1.1, 2.2, 3.3]); // [1.1, 2.2, 3.3]
```

## Массивоподобные объекты

Многие объекты выглядят как массивы, но не имеют его методов:

```javascript
// Arguments - массивоподобный объект
function example() {
  const args = Array.from(arguments); // Преобразуем в массив
  return args.map(arg => arg * 2);
}

// DOM-коллекции также массивоподобны
const divs = document.querySelectorAll('div');
const divArray = Array.from(divs); // Преобразуем в массив
```

## Преобразования между массивами и другими типами

### Строки и массивы
```javascript
const str = 'hello';
const arr = Array.from(str); // ['h', 'e', 'l', 'l', 'o']
const backToStr = arr.join(''); // 'hello'
```

### Объекты и массивы
```javascript
const obj = {a: 1, b: 2, c: 3};
const entries = Object.entries(obj); // [['a', 1], ['b', 2], ['c', 3]]
const keys = Object.keys(obj); // ['a', 'b', 'c']
const values = Object.values(obj); // [1, 2, 3]

// Обратное преобразование
const newObj = Object.fromEntries(entries); // {a: 1, b: 2, c: 3}
```

## Немутабельность с массивами

Для обеспечения немутабельности используйте методы, не изменяющие исходный массив:

```javascript
// Вместо мутирующих методов:
const original = [1, 2, 3];
// original.push(4); // Мутирует массив

// Используйте немутирующие альтернативы:
const newArray = [...original, 4]; // Не мутирует original
const filtered = original.filter(x => x !== 2); // Создает новый массив
```

## Техники валидации массивов

```javascript
// Проверка, является ли значение массивом
Array.isArray([1, 2, 3]); // true
Array.isArray('не массив'); // false

// Проверка, все ли элементы удовлетворяют условию
const allNumbers = [1, 2, 3].every(item => typeof item === 'number'); // true

// Проверка на пустоту
const isEmpty = arr => Array.isArray(arr) && arr.length === 0;
```

## Связь с другими файлами

- [[js/functions]] - Функции, которые часто используются с массивами
- [[js/objects]] - Связь между объектами и массивами
- [[js/iterators]] - Итераторы и итерируемые объекты
- [[js/error-handling]] - Обработка ошибок при работе с массивами
- [[js/performance]] - Дополнительная информация о производительности

## Заключение

Массивы являются фундаментальной частью JavaScript и обеспечивают мощные возможности для работы с коллекциями данных. Понимание различных методов и подходов к работе с массивами позволяет писать более эффективный и читаемый код.

> [!tip] Совет
> При работе с массивами всегда учитывайте, мутирует ли метод исходный массив или создает новый. Это особенно важно при работе с немутабельными архитектурами.

> [!warning] Важно
> Не забывайте проверять тип данных при работе с массивами, особенно при получении данных из внешних источников.
