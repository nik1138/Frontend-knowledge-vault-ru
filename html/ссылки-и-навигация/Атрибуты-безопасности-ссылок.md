---
aliases: [Безопасность ссылок HTML, Атрибуты безопасности, Защита от атак через ссылки]
tags: [html, ссылки, безопасность, атаки, защита, web-security]
---

# Атрибуты безопасности ссылок в HTML

## Обзор

Атрибуты безопасности ссылок в HTML помогают защитить веб-сайты и пользователей от различных видов атак, таких как межсайтовая подделка запроса (CSRF), межсайтовый скриптинг (XSS) и другие уязвимости. Эти атрибуты обеспечивают дополнительный уровень защиты при работе с внешними ссылками и ресурсами.

## Основные атрибуты безопасности

### 1. `rel="noopener"`

Атрибут `noopener` предотвращает доступ новой вкладки к объекту `window.opener`, что защищает от атак типа "tabnabbing".

```html
<!-- Безопасная внешняя ссылка -->
<a href="https://externalsite.com" target="_blank" rel="noopener">Внешний ресурс</a>
```

#### Проблема, которую решает `noopener`

Без `rel="noopener"` новая вкладка может получить доступ к родительской вкладке через `window.opener`:

```javascript
// В новой вкладке
window.opener.location = "https://phishingsite.com"; // Перенаправление родительской вкладки
```

### 2. `rel="noreferrer"`

Атрибут `noreferrer` не только предотвращает доступ к `window.opener`, но и не отправляет HTTP-заголовок `Referer` при переходе по ссылке.

```html
<!-- Полная защита с реферером -->
<a href="https://externalsite.com" target="_blank" rel="noreferrer">Внешний ресурс</a>
```

#### Различия между `noopener` и `noreferrer`

- `noopener`: защищает от атак через `window.opener`
- `noreferrer`: дополнительно скрывает источник перехода (не отправляет `Referer`)

### 3. `rel="noopener noreferrer"`

Комбинация обоих атрибутов для максимальной безопасности:

```html
<!-- Рекомендуемый подход -->
<a href="https://externalsite.com" target="_blank" rel="noopener noreferrer">Внешний ресурс</a>
```

## Современные атрибуты безопасности

### 1. `rel="external"`

Указывает, что ссылка ведет на ресурс, не принадлежащий к текущему сайту:

```html
<a href="https://externalsite.com" rel="external">Внешний ресурс</a>
```

### 2. `rel="nofollow"`

Инструкция поисковым роботам не индексировать ссылку и не передавать по ней вес страницы:

```html
<!-- Для пользовательского контента -->
<a href="https://externalsite.com" rel="nofollow">Пользовательская ссылка</a>
```

### 3. `rel="sponsored"`

Указывает, что ссылка является частью рекламы или спонсорского контента:

```html
<!-- Для рекламных ссылок -->
<a href="https://externalsite.com" rel="sponsored">Реклама</a>
```

### 4. `rel="ugc"`

Указывает, что ссылка находится в пользовательском контенте (комментарии, форумы и т.д.):

```html
<!-- Для пользовательского контента -->
<a href="https://externalsite.com" rel="ugc">Ссылка в комментариях</a>
```

## Политика безопасности содержимого (CSP)

### 1. `Content-Security-Policy` заголовок

Можно также использовать CSP для ограничения открытия внешних ссылок:

```
Content-Security-Policy: default-src 'self'; frame-ancestors 'none';
```

### 2. Атрибут `sandbox` для iframe

При встраивании внешнего контента:

```html
<iframe src="https://externalsite.com" sandbox="allow-scripts allow-same-origin"></iframe>
```

## Практические примеры использования

### 1. Внешние ссылки в контенте

```html
<!-- Безопасная внешняя ссылка -->
<p>Дополнительную информацию можно найти на 
<a href="https://externalsite.com" target="_blank" rel="noopener noreferrer">официальном сайте</a>.</p>
```

### 2. Ссылки в пользовательском контенте

```html
<!-- Пользовательский комментарий -->
<div class="comment">
  <p>Посмотрите этот ресурс: 
  <a href="https://externalsite.com" rel="nofollow ugc">полезный сайт</a></p>
</div>
```

### 3. Спонсорские ссылки

```html
<!-- Рекламный баннер -->
<a href="https://sponsor.com" rel="sponsored noopener noreferrer" target="_blank">
  <img src="sponsor-banner.jpg" alt="Реклама">
</a>
```

## Современные рекомендации

### 1. Автоматическое добавление атрибутов

В современных приложениях атрибуты безопасности могут добавляться автоматически:

```javascript
// Пример добавления атрибутов безопасности к внешним ссылкам
document.querySelectorAll('a[target="_blank"]').forEach(link => {
  link.rel = 'noopener noreferrer';
});
```

### 2. Использование фреймворков

В современных фреймворках атрибуты безопасности часто добавляются автоматически:

```jsx
// React пример
function ExternalLink({ href, children }) {
  return (
    <a 
      href={href} 
      target="_blank" 
      rel="noopener noreferrer"
    >
      {children}
    </a>
  );
}
```

### 3. Проверка доменов

```javascript
// Проверка, является ли ссылка внешней
function isExternal(url) {
  try {
    const link = new URL(url, window.location);
    return link.hostname !== window.location.hostname;
  } catch (e) {
    return false;
  }
}

// Добавление атрибутов только для внешних ссылок
document.querySelectorAll('a').forEach(link => {
  if (isExternal(link.href)) {
    link.rel = 'noopener noreferrer';
    link.target = '_blank';
  }
});
```

## Рекомендации по использованию

### 1. Всегда используйте `rel="noopener noreferrer"` для `target="_blank"`

```html
<!-- Хорошо -->
<a href="https://externalsite.com" target="_blank" rel="noopener noreferrer">Ссылка</a>

<!-- Плохо -->
<a href="https://externalsite.com" target="_blank">Ссылка</a>
```

### 2. Используйте `rel="nofollow"` для пользовательского контента

```html
<!-- Для комментариев, форумов и других пользовательских данных -->
<a href="https://externalsite.com" rel="nofollow">Пользовательская ссылка</a>
```

### 3. Используйте `rel="sponsored"` для рекламных ссылок

```html
<!-- Для рекламных и спонсорских материалов -->
<a href="https://sponsor.com" rel="sponsored">Реклама</a>
```

## Тестирование безопасности

### 1. Проверка атрибутов

Используйте инструменты разработчика для проверки наличия атрибутов безопасности:

```javascript
// Проверка наличия атрибутов безопасности
const externalLinks = document.querySelectorAll('a[target="_blank"]');
externalLinks.forEach(link => {
  const rel = link.getAttribute('rel') || '';
  if (!rel.includes('noopener') || !rel.includes('noreferrer')) {
    console.warn('Небезопасная внешняя ссылка:', link.href);
  }
});
```

### 2. Автоматические проверки

Включите проверки безопасности в процесс CI/CD:

```html
<!-- Проверка с помощью linter'ов и сканеров безопасности -->
<!-- Пример для HTML-валидатора -->
```

## Совместимость

Все упомянутые атрибуты безопасности полностью поддерживаются современными браузерами:

- Chrome 49+
- Firefox 52+
- Safari 10.1+
- Edge 16+

Для старых браузеров атрибуты безопасности игнорируются без негативного эффекта.

## Заключение

Атрибуты безопасности ссылок - важная часть веб-безопасности. Их правильное использование помогает защитить пользователей от различных атак и улучшает доверие к вашему веб-сайту. Рекомендуется всегда использовать `rel="noopener noreferrer"` для внешних ссылок с `target="_blank"` и соответствующие атрибуты (`nofollow`, `sponsored`, `ugc`) для разных типов ссылок.

См. также:
- [[Типы-ссылок]]
- [[Относительные-и-абсолютные-ссылки]]
- [[Навигационные-элементы]]
- [[Меню]]
- [[Хлебные-крошки]]