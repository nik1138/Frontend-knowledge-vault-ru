---
aliases: [Конфигурация сборщиков, Настройка сборщиков, Конфигурация Build Tools]
tags: [html, css, js, build-tools, конфигурация, frontend, сборка, webpack, rollup, parcel, vite]
---

# Конфигурация сборщиков

Конфигурация инструментов сборки - это ключевой аспект настройки фронтенд-проектов. В 2025 году в российских реалиях правильная конфигурация сборщиков играет особенно важную роль из-за требований к безопасности, производительности и совместимости с внутренними системами.

## Общие принципы конфигурации

Конфигурация любого сборщика включает в себя:

- **Входные точки (Entry Points)** - определение начальных файлов приложения
- **Выходные настройки (Output)** - указание директории и формата выходных файлов
- **Правила обработки (Rules/Loaders)** - определение способов обработки различных типов файлов
- **Плагины (Plugins)** - расширение функциональности сборки
- **Режимы (Modes)** - настройка под development и production
- **Оптимизации** - tree-shaking, code splitting, минификация

## Конфигурация Webpack

Файл `webpack.config.js` или `webpack.config.ts` включает:

```javascript
module.exports = {
  mode: 'development', // или 'production'
  entry: './src/index.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: '[name].[contenthash].js',
    clean: true
  },
  module: {
    rules: [
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: {
          loader: 'babel-loader',
          options: {
            presets: ['@babel/preset-env']
          }
        }
      }
    ]
  },
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html'
    })
  ],
  devServer: {
    static: './dist',
    port: 3000,
    hot: true
  }
};
```

### Особенности для российских реалий

- Использование локальных зеркал npm-репозиториев
- Настройка proxy для работы с внутренними API
- Интеграция с системами безопасности и мониторинга
- Поддержка отечественных браузеров и систем

## Конфигурация Rollup

Файл `rollup.config.js` или `rollup.config.ts` включает:

```javascript
export default {
  input: 'src/main.js',
  output: {
    dir: 'dist',
    format: 'es',
    sourcemap: true
  },
  plugins: [
    resolve({
      browser: true
    }),
    commonjs(),
    typescript()
  ]
};
```

### Особенности для библиотек

- Настройка нескольких форматов вывода (ES, CJS, UMD)
- Оптимизация для tree-shaking
- Генерация declaration файлов для TypeScript
- Настройка externals для предотвращения включения зависимостей

## Конфигурация Parcel

Parcel работает с минимальной конфигурацией через `.parcelrc`:

```json
{
  "extends": "@parcel/config-default",
  "transformers": {
    "*.js": ["@parcel/transformer-js"],
    "*.css": ["@parcel/transformer-css"]
  },
  "namers": ["@parcel/namer-default"],
  "runtimes": ["@parcel/runtime-js"],
  "packagers": {
    "*.html": "@parcel/packager-html"
  }
}
```

### Особенности Parcel

- Оптимизация через zero-configuration подход
- Автоматическая обработка большинства форматов
- Встроенные возможности оптимизации изображений и шрифтов

## Конфигурация Vite

Файл `vite.config.js` или `vite.config.ts` включает:

```javascript
import { defineConfig } from 'vite';
import vue from '@vitejs/plugin-vue';

export default defineConfig({
  plugins: [vue()],
  server: {
    port: 3000,
    host: true,
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  },
  build: {
    outDir: 'dist',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router']
        }
      }
    }
  }
});
```

### Особенности Vite

- Настройка для ES-модулей в режиме разработки
- Интеграция с фреймворками через официальные плагины
- Оптимизация через manual chunks и code splitting

## Общие рекомендации по конфигурации

### Для российских реалий 2025

1. **Безопасность и совместимость**:
   - Использование внутренних реестров пакетов
   - Проверка зависимостей на уязвимости
   - Совместимость с отечественными браузерами

2. **Производительность**:
   - Оптимизация для медленного интернета в регионах
   - Code splitting для уменьшения начального веса
   - Lazy loading для улучшения производительности

3. **Поддержка и обслуживание**:
   - Документирование конфигурации
   - Использование TypeScript для конфигов
   - Разделение конфигураций по окружениям

### Сравнение подходов

| Характеристика | Webpack | Rollup | Parcel | Vite |
|----------------|---------|--------|--------|------|
| Сложность настройки | Высокая | Средняя | Минимальная | Низкая |
| Скорость разработки | Средняя | Средняя | Высокая | Очень высокая |
| Оптимизация бандлов | Высокая | Очень высокая | Высокая | Высокая |
| Поддержка HTML | Через плагины | Через плагины | Встроенная | Встроенная |
| Назначение | Приложения | Библиотеки | Прототипы | Современные приложения |

## Практические примеры

### Многоуровневая конфигурация

Для сложных проектов рекомендуется использовать многоуровневую конфигурацию:

```javascript
// webpack.common.js
const commonConfig = {
  entry: './src/index.js',
  module: {
    rules: [
      // общие правила
    ]
  }
};

// webpack.dev.js
const { merge } = require('webpack-merge');
module.exports = merge(commonConfig, {
  mode: 'development',
  devtool: 'inline-source-map'
});

// webpack.prod.js
module.exports = merge(commonConfig, {
  mode: 'production',
  optimization: {
    minimize: true
  }
});
```

### Управление окружением

Использование переменных окружения:

```javascript
// vite.config.js
export default defineConfig(({ mode }) => {
  const env = loadEnv(mode, process.cwd(), '');
  
  return {
    define: {
      __API_URL__: JSON.stringify(env.VITE_API_URL)
    }
  };
});
```

## Ресурсы

- [[Webpack]]
- [[Rollup]]
- [[Parcel]]
- [[Vite]]
- [[HTML]]
- [[CSS]]
- [[JavaScript]]

> [!tip] Совет
> В российских реалиях 2025 года рекомендуется использовать TypeScript для написания конфигурационных файлов - это обеспечивает лучшую поддержку и автодополнение. Также полезно использовать инструменты вроде `webpack-merge` или `@rollup/plugin-alias` для управления сложными конфигурациями.

> [!warning] Важно
> При настройке сборщиков в государственных и банковских проектах обязательно учитывайте требования к безопасности и совместимости с внутренними системами. Всегда проверяйте зависимости на наличие уязвимостей и используйте утвержденные внутренние реестры пакетов.