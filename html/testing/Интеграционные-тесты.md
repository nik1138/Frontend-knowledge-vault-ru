---
aliases: ["Интеграционное тестирование", "HTML Integration Testing", "Тестирование взаимодействия компонентов"]
tags: [html/testing, integration-testing, front-end-testing, javascript]
---

# Интеграционные-тесты

## Введение

Интеграционные тесты в контексте HTML-разработки проверяют взаимодействие между различными компонентами системы. В отличие от unit-тестов, которые тестируют отдельные элементы изолированно, интеграционные тесты проверяют, как компоненты работают вместе.

## Основные принципы интеграционного тестирования HTML

Интеграционные тесты для HTML фокусируются на:

- Взаимодействии между HTML-элементами и JavaScript-логикой
- Интеграции с API и внешними сервисами
- Совместной работе различных HTML-компонентов
- Правильности отображения данных из внешних источников
- Работе форм с серверной логикой

## Инструменты для интеграционного тестирования HTML

### Jest с фейковыми API
Jest позволяет создавать моки для внешних зависимостей и тестировать интеграцию компонентов.

```javascript
// Пример интеграционного теста с фейковым API
describe('Интеграция HTML-компонента с API', () => {
  let container;
  let dom;

  beforeEach(() => {
    dom = new JSDOM('<!DOCTYPE html><html><body><div id="user-list"></div></body></html>');
    global.document = dom.window.document;
    global.window = dom.window;
    container = document.getElementById('user-list');
  });

  test('должен загрузить и отобразить пользователей', async () => {
    // Мокаем fetch
    const mockUsers = [
      { id: 1, name: 'Иван' },
      { id: 2, name: 'Мария' }
    ];
    
    global.fetch = jest.fn(() =>
      Promise.resolve({
        json: () => Promise.resolve(mockUsers),
      })
    );

    // Имитируем логику компонента
    await loadUsersAndRender(container);

    expect(fetch).toHaveBeenCalledWith('/api/users');
    expect(container.children.length).toBe(2);
    expect(container.children[0].textContent).toContain('Иван');
  });
});
```

### Cypress
Cypress - мощный инструмент для интеграционного тестирования, который работает в реальном браузере.

```javascript
// Пример интеграционного теста в Cypress
describe('Интеграция формы с API', () => {
  beforeEach(() => {
    cy.visit('/registration');
    cy.intercept('POST', '/api/register', {
      statusCode: 200,
      body: { success: true, userId: 123 }
    }).as('register');
  });

  it('должна успешно зарегистрировать пользователя', () => {
    cy.get('#username').type('testuser');
    cy.get('#email').type('test@example.com');
    cy.get('#password').type('password123');
    cy.get('form').submit();

    cy.wait('@register');
    cy.get('.success-message').should('be.visible');
  });
});
```

### Playwright
Microsoft Playwright также поддерживает интеграционное тестирование с возможностью тестирования в разных браузерах.

## Практические примеры интеграционных тестов

### Тестирование формы с API

```javascript
// Интеграционный тест для формы обратной связи
describe('Форма обратной связи', () => {
  let form;
  let nameInput;
  let emailInput;
  let messageTextarea;

  beforeEach(async () => {
    // Загружаем HTML-шаблон
    const html = await loadHtmlTemplate('feedback-form.html');
    const dom = new JSDOM(html);
    const document = dom.window.document;

    form = document.querySelector('form');
    nameInput = document.getElementById('name');
    emailInput = document.getElementById('email');
    messageTextarea = document.getElementById('message');

    // Мокаем fetch
    global.fetch = jest.fn(() =>
      Promise.resolve({
        ok: true,
        json: () => Promise.resolve({ success: true }),
      })
    );
  });

  test('должна отправить данные на сервер', async () => {
    nameInput.value = 'Иван Иванов';
    emailInput.value = 'ivan@example.com';
    messageTextarea.value = 'Тестовое сообщение';

    form.dispatchEvent(new dom.window.Event('submit'));

    expect(fetch).toHaveBeenCalledWith('/api/feedback', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        name: 'Иван Иванов',
        email: 'ivan@example.com',
        message: 'Тестовое сообщение'
      })
    });
  });
});
```

### Тестирование динамического контента

```javascript
// Интеграционный тест для компонента с динамическим контентом
describe('Компонент списка товаров', () => {
  let container;

  beforeEach(() => {
    const dom = new JSDOM('<!DOCTYPE html><html><body><div id="product-list"></div></body></html>');
    const document = dom.window.document;
    container = document.getElementById('product-list');

    global.fetch = jest.fn(() =>
      Promise.resolve({
        ok: true,
        json: () => Promise.resolve([
          { id: 1, name: 'Товар 1', price: 100 },
          { id: 2, name: 'Товар 2', price: 200 }
        ]),
      })
    );
  });

  test('должен отобразить список товаров', async () => {
    await renderProductList(container, '/api/products');

    expect(container.children.length).toBe(2);
    expect(container.children[0].querySelector('.name').textContent).toBe('Товар 1');
    expect(container.children[0].querySelector('.price').textContent).toBe('100 руб.');
  });
});
```

## Лучшие практики интеграционного тестирования HTML

1. **Тестирование реальных сценариев**: Создавайте тесты, отражающие реальные пользовательские сценарии
2. **Использование моков и стабов**: Изолируйте внешние зависимости, но сохраняйте реалистичность
3. **Проверка состояния компонентов**: Убедитесь, что компоненты переходят в правильные состояния
4. **Тестирование ошибок**: Проверяйте поведение при ошибках взаимодействия
5. **Поддержка актуальности**: Обновляйте тесты при изменении API или взаимодействий

## Особенности в российских реалиях 2025

В 2025 году в России интеграционное тестирование HTML-компонентов становится особенно важным из-за:

- Перехода на отечественные API и сервисы
- Ужесточения требований к надежности систем
- Роста использования микросервисной архитектуры
- Повышенного внимания к [[Тесты-доступности]] и [[Безопасность HTML|безопасности HTML]]

Многие российские компании активно используют интеграционные тесты для проверки соответствия отечественным стандартам и требованиям.

## Заключение

Интеграционные тесты обеспечивают уверенность в том, что различные компоненты HTML-приложения работают вместе корректно. Они помогают выявить проблемы на стыке взаимодействия компонентов и обеспечивают более высокий уровень надежности приложения.

См. также:
- [[Unit-тесты]]
- [[E2E-тесты]]
- [[HTML тестирование|Общее руководство по тестированию HTML]]
- [[Тестирование API]]