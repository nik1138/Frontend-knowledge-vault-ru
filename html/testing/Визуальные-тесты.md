---
aliases: ["Визуальное тестирование", "Visual Regression Testing", "Тестирование визуального отображения"]
tags: [html/testing, visual-testing, regression-testing, front-end-testing]
---

# Визуальные-тесты

## Введение

Визуальные тесты (Visual Testing) в контексте HTML-разработки проверяют правильность отображения веб-страниц и компонентов. Эти тесты сравнивают визуальное представление элементов с эталонными изображениями, чтобы выявить непреднамеренные изменения в пользовательском интерфейсе.

## Основные принципы визуального тестирования HTML

Визуальные тесты для HTML-элементов фокусируются на:

- Проверке корректности отображения HTML-элементов
- Выявлении регрессий в визуальном оформлении
- Проверке адаптивности и отображения на разных устройствах
- Контроле соответствия дизайну
- Обнаружении проблем с версткой

## Инструменты для визуального тестирования HTML

### Percy
Percy - популярный инструмент для визуального тестирования с интеграцией в CI/CD.

```javascript
// Пример визуального теста с использованием Percy и Cypress
import { mount } from 'cypress/react18';
import { Button } from './Button';

describe('Компонент Button', () => {
  it('должен корректно отображаться в разных состояниях', () => {
    mount(<Button variant="primary">Primary Button</Button>);
    cy.percySnapshot('Primary Button');

    mount(<Button variant="secondary">Secondary Button</Button>);
    cy.percySnapshot('Secondary Button');

    mount(<Button disabled>Disabled Button</Button>);
    cy.percySnapshot('Disabled Button');
  });
});
```

### Playwright с визуальным тестированием
Playwright имеет встроенные возможности для визуального тестирования.

```javascript
// Пример визуального теста с использованием Playwright
import { test, expect } from '@playwright/test';

test.describe('Визуальные тесты главной страницы', () => {
  test('должна корректно отображаться на десктопе', async ({ page }) => {
    await page.goto('https://example.com');
    
    // Сравнение скриншота с эталоном
    await expect(page).toHaveScreenshot('main-page-desktop.png', {
      maxDiffPixelRatio: 0.01 // Допуск 1% различий
    });
  });

  test('должна корректно отображаться на мобильном', async ({ page }) => {
    await page.setViewportSize({ width: 375, height: 667 });
    await page.goto('https://example.com');
    
    await expect(page).toHaveScreenshot('main-page-mobile.png', {
      maxDiffPixelRatio: 0.01
    });
  });
});
```

### Applitools Eyes
Инструмент для визуального тестирования с использованием ИИ для анализа изменений.

### Happo.io
Инструмент для визуального регрессионного тестирования.

## Практические примеры визуальных тестов

### Тестирование компонентов

```javascript
// Визуальное тестирование HTML-компонента карточки
import { test, expect } from '@playwright/test';

test.describe('Компонент карточки товара', () => {
  test('должен корректно отображаться в разных состояниях', async ({ page }) => {
    await page.setContent(`
      <div class="product-card">
        <img src="placeholder.jpg" alt="Товар" class="product-image">
        <h3 class="product-title">Название товара</h3>
        <p class="product-price">1000 руб.</p>
        <button class="buy-button">Купить</button>
      </div>
    `);

    // Тестирование стандартного состояния
    await expect(page.locator('.product-card')).toHaveScreenshot('product-card-default.png');

    // Тестирование состояния при наведении
    await page.hover('.product-card');
    await expect(page.locator('.product-card')).toHaveScreenshot('product-card-hover.png');

    // Тестирование состояния "распродано"
    await page.evaluate(() => {
      document.querySelector('.buy-button').textContent = 'Распродано';
      document.querySelector('.buy-button').classList.add('sold-out');
    });
    await expect(page.locator('.product-card')).toHaveScreenshot('product-card-sold-out.png');
  });
});
```

### Тестирование адаптивности

```javascript
// Визуальное тестирование адаптивности формы
import { test, expect } from '@playwright/test';

test.describe('Адаптивность формы входа', () => {
  test('должна корректно отображаться на разных размерах экрана', async ({ page }) => {
    const component = `
      <form class="login-form">
        <input type="text" placeholder="Имя пользователя" class="username-input">
        <input type="password" placeholder="Пароль" class="password-input">
        <button type="submit" class="login-button">Войти</button>
      </form>
    `;

    await page.setContent(component);

    // Тестирование на десктопе
    await page.setViewportSize({ width: 1200, height: 800 });
    await expect(page.locator('.login-form')).toHaveScreenshot('login-form-desktop.png');

    // Тестирование на планшете
    await page.setViewportSize({ width: 768, height: 1024 });
    await expect(page.locator('.login-form')).toHaveScreenshot('login-form-tablet.png');

    // Тестирование на мобильном
    await page.setViewportSize({ width: 375, height: 667 });
    await expect(page.locator('.login-form')).toHaveScreenshot('login-form-mobile.png');
  });
});
```

### Тестирование тем оформления

```javascript
// Визуальное тестирование светлой и темной тем
import { test, expect } from '@playwright/test';

test.describe('Темы оформления', () => {
  test('должны корректно отображаться', async ({ page }) => {
    await page.goto('https://example.com/settings');

    // Тестирование светлой темы
    await page.locator('#theme-selector').selectOption('light');
    await expect(page.locator('body')).toHaveScreenshot('theme-light.png');

    // Тестирование темной темы
    await page.locator('#theme-selector').selectOption('dark');
    await expect(page.locator('body')).toHaveScreenshot('theme-dark.png');
  });
});
```

## Лучшие практики визуального тестирования HTML

1. **Выбор ключевых страниц**: Фокусируйтесь на важнейших страницах и компонентах
2. **Управление эталонами**: Поддерживайте актуальность эталонных изображений
3. **Настройка допусков**: Используйте разумные допуски для различий
4. **Тестирование на разных разрешениях**: Проверяйте отображение на разных устройствах
5. **Интеграция в CI/CD**: Автоматизируйте визуальное тестирование в процессе разработки

## Особенности в российских реалиях 2025

В 2025 году в России визуальное тестирование HTML-компонентов становится особенно важным из-за:

- Роста требований к качеству пользовательского интерфейса
- Перехода на отечественные дизайн-системы
- Увеличения числа пользователей цифровых сервисов
- Повышенного внимания к [[Тесты-доступности]] и [[Безопасность HTML|безопасности HTML]]
- Необходимости соответствия отечественным стандартам визуального оформления

Многие российские компании активно внедряют визуальное тестирование для обеспечения консистентности своих цифровых продуктов.

## Заключение

Визуальные тесты обеспечивают контроль качества пользовательского интерфейса и помогают выявлять непреднамеренные изменения в отображении HTML-элементов. Они являются важной частью процесса обеспечения визуальной целостности веб-приложений.

См. также:
- [[Unit-тесты]]
- [[E2E-тесты]]
- [[HTML тестирование|Общее руководство по тестированию HTML]]
- [[Дизайн-системы]]
- [[Тестирование адаптивности]]